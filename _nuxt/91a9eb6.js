/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{0:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return P})),n.d(t,"c",(function(){return L})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return U})),n.d(t,"g",(function(){return _})),n.d(t,"h",(function(){return $})),n.d(t,"i",(function(){return V})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return H})),n.d(t,"l",(function(){return w})),n.d(t,"m",(function(){return y})),n.d(t,"n",(function(){return v})),n.d(t,"o",(function(){return I})),n.d(t,"p",(function(){return W})),n.d(t,"q",(function(){return E})),n.d(t,"r",(function(){return A})),n.d(t,"s",(function(){return C})),n.d(t,"t",(function(){return F})),n.d(t,"u",(function(){return N})),n.d(t,"v",(function(){return D})),n.d(t,"w",(function(){return k})),n.d(t,"x",(function(){return S})),n.d(t,"y",(function(){return O})),n.d(t,"z",(function(){return R})),n.d(t,"A",(function(){return B})),n.d(t,"B",(function(){return z})),n.d(t,"C",(function(){return x}));const o=function(e){const t=[];let p=0;for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);n<128?t[p++]=n:n<2048?(t[p++]=n>>6|192,t[p++]=63&n|128):55296==(64512&n)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++i)),t[p++]=n>>18|240,t[p++]=n>>12&63|128,t[p++]=n>>6&63|128,t[p++]=63&n|128):(t[p++]=n>>12|224,t[p++]=n>>6&63|128,t[p++]=63&n|128)}return t},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(input,e){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[];for(let i=0;i<input.length;i+=3){const e=input[i],n=i+1<input.length,r=n?input[i+1]:0,o=i+2<input.length,c=o?input[i+2]:0,l=e>>2,h=(3&e)<<4|r>>4;let d=(15&r)<<2|c>>6,f=63&c;o||(f=64,n||(d=64)),output.push(t[l],t[h],t[d],t[f])}return output.join("")},encodeString(input,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(input):this.encodeByteArray(o(input),e)},decodeString(input,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(input):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&c)}else if(o>239&&o<365){const u=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{const c=e[n++],l=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&c)<<6|63&l)}}return t.join("")}(this.decodeStringToByteArray(input,e))},decodeStringToByteArray(input,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,output=[];for(let i=0;i<input.length;){const e=t[input.charAt(i++)],n=i<input.length?t[input.charAt(i)]:0;++i;const r=i<input.length?t[input.charAt(i)]:64;++i;const o=i<input.length?t[input.charAt(i)]:64;if(++i,null==e||null==n||null==r||null==o)throw Error();const c=e<<2|n>>4;if(output.push(c),64!==r){const e=n<<4&240|r>>2;if(output.push(e),64!==o){const e=r<<6&192|o;output.push(e)}}}return output},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},l=function(e){return function(e){const t=o(e);return c.encodeByteArray(t,!0)}(e).replace(/\./g,"")},h=function(e){try{return c.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function d(e,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return source}for(const t in source)source.hasOwnProperty(t)&&"__proto__"!==t&&(e[t]=d(e[t],source[t]));return e}const f=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,m=()=>{try{return f()||(()=>{if(void 0===r||void 0===r.env)return;const e=r.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&h(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},y=e=>{var t,n;return null===(n=null===(t=m())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},v=e=>{const t=y(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},w=()=>{var e;return null===(e=m())||void 0===e?void 0:e.config},I=e=>{var t;return null===(t=m())||void 0===t?void 0:t[`_${e}`]};class T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function _(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,sub=e.sub||e.user_id;if(!sub)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:sub,user_id:sub,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(o)),""].join(".")}function E(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function k(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())}function S(){var t;const n=null===(t=m())||void 0===t?void 0:t.forceEnvironment;if("node"===n)return!0;if("browser"===n)return!1;try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}}function A(){return"object"==typeof self&&self.self===self}function C(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function O(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function N(){const e=E();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function R(){return!S()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D(){try{return"object"==typeof indexedDB}catch(e){return!1}}function x(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class L extends Error{constructor(code,e,t){super(e),this.code=code,this.customData=t,this.name="FirebaseError",Object.setPrototypeOf(this,L.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,P.prototype.create)}}class P{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(code,...data){const e=data[0]||{},t=`${this.service}/${code}`,template=this.errors[code],n=template?function(template,data){return template.replace(M,((e,t)=>{const n=data[t];return null!=n?String(n):`<${t}?>`}))}(template,e):"Error",r=`${this.serviceName}: ${n} (${t}).`;return new L(t,r,e)}}const M=/\{\$([^}]+)}/g;function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function F(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function V(a,b){if(a===b)return!0;const e=Object.keys(a),t=Object.keys(b);for(const n of e){if(!t.includes(n))return!1;const e=a[n],r=b[n];if(j(e)&&j(r)){if(!V(e,r))return!1}else if(e!==r)return!1}for(const n of t)if(!e.includes(n))return!1;return!0}function j(e){return null!==e&&"object"==typeof e}function B(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function z(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function H(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function $(e,t){const n=new K(e,t);return n.subscribe.bind(n)}class K{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=G),void 0===r.error&&(r.error=G),void 0===r.complete&&(r.complete=G);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),o}unsubscribeOne(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(i,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[i])try{e(this.observers[i])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function G(){}function W(e){return e&&e._delegate?e._delegate:e}}).call(this,n(39),n(90))},1:function(e,t,n){"use strict";n.d(t,"a",(function(){return lt})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return ke})),n.d(t,"e",(function(){return Ce})),n.d(t,"f",(function(){return Le})),n.d(t,"g",(function(){return oe})),n.d(t,"h",(function(){return Fe})),n.d(t,"i",(function(){return Be})),n.d(t,"j",(function(){return Ln})),n.d(t,"k",(function(){return ze})),n.d(t,"l",(function(){return An})),n.d(t,"m",(function(){return He})),n.d(t,"n",(function(){return qe})),n.d(t,"o",(function(){return Ke})),n.d(t,"p",(function(){return Ge})),n.d(t,"q",(function(){return Ye})),n.d(t,"r",(function(){return at})),n.d(t,"s",(function(){return ct})),n.d(t,"t",(function(){return ut})),n.d(t,"u",(function(){return Xt})),n.d(t,"v",(function(){return mt})),n.d(t,"w",(function(){return gt})),n.d(t,"x",(function(){return yt})),n.d(t,"y",(function(){return vt})),n.d(t,"z",(function(){return wt})),n.d(t,"A",(function(){return bt})),n.d(t,"B",(function(){return It})),n.d(t,"C",(function(){return Tt})),n.d(t,"D",(function(){return _t})),n.d(t,"E",(function(){return Et})),n.d(t,"F",(function(){return ae})),n.d(t,"G",(function(){return sr})),n.d(t,"H",(function(){return Yn})),n.d(t,"I",(function(){return Jn})),n.d(t,"J",(function(){return _e})),n.d(t,"K",(function(){return en})),n.d(t,"L",(function(){return $e})),n.d(t,"M",(function(){return kt})),n.d(t,"N",(function(){return St})),n.d(t,"O",(function(){return At})),n.d(t,"P",(function(){return Ct})),n.d(t,"Q",(function(){return Ot})),n.d(t,"R",(function(){return Nt})),n.d(t,"S",(function(){return tt})),n.d(t,"T",(function(){return Ft})),n.d(t,"U",(function(){return zt})),n.d(t,"V",(function(){return Kt})),n.d(t,"W",(function(){return N})),n.d(t,"X",(function(){return ye})),n.d(t,"Y",(function(){return pe})),n.d(t,"Z",(function(){return _})),n.d(t,"ab",(function(){return Pr})),n.d(t,"bb",(function(){return lr})),n.d(t,"cb",(function(){return ve})),n.d(t,"db",(function(){return E})),n.d(t,"eb",(function(){return C})),n.d(t,"fb",(function(){return ar})),n.d(t,"gb",(function(){return D})),n.d(t,"hb",(function(){return Jt})),n.d(t,"ib",(function(){return Bn})),n.d(t,"jb",(function(){return Hn})),n.d(t,"kb",(function(){return zn})),n.d(t,"lb",(function(){return er})),n.d(t,"mb",(function(){return rr})),n.d(t,"nb",(function(){return nr})),n.d(t,"ob",(function(){return mn})),n.d(t,"pb",(function(){return ir})),n.d(t,"qb",(function(){return Ur})),n.d(t,"rb",(function(){return Nn})),n.d(t,"sb",(function(){return jr})),n.d(t,"tb",(function(){return Gr})),n.d(t,"ub",(function(){return d})),n.d(t,"vb",(function(){return Rn})),n.d(t,"wb",(function(){return On})),n.d(t,"xb",(function(){return xn})),n.d(t,"yb",(function(){return Vt})),n.d(t,"zb",(function(){return jt}));var r=n(0),o=n(11),c=n(20),l=n(93),h=n(30);const d={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},f={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function m(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},v=m,w=new r.b("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),I=new c.b("@firebase/auth");function T(e,...t){I.logLevel<=c.a.ERROR&&I.error(`Auth (${o.SDK_VERSION}): ${e}`,...t)}function _(e,...t){throw A(e,...t)}function E(e,...t){return A(e,...t)}function k(e,code,t){const n=Object.assign(Object.assign({},v()),{[code]:t});return new r.b("auth","Firebase",n).create(code,{appName:e.name})}function S(e,object,t){if(!(object instanceof t))throw t.name!==object.constructor.name&&_(e,"argument-error"),k(e,"argument-error",`Type of ${object.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function A(e,...t){if("string"!=typeof e){const code=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(code,...n)}return w.create(e,...t)}function C(e,t,...n){if(!e)throw A(t,...n)}function O(e){const t="INTERNAL ASSERTION FAILED: "+e;throw T(t),new Error(t)}function N(e,t){e||O(t)}const R=new Map;function D(e){N(e instanceof Function,"Expected a class definition");let t=R.get(e);return t?(N(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,R.set(e,t),t)}function x(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function L(){return"http:"===P()||"https:"===P()}function P(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class M{constructor(e,t){this.shortDelay=e,this.longDelay=t,N(t>e,"Short delay should be less than long delay!"),this.isMobile=Object(r.w)()||Object(r.y)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(L()||Object(r.s)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function U(e,path){N(e.emulator,"Emulator should always be set here");const{url:t}=e.emulator;return path?`${t}${path.startsWith("/")?path.slice(1):path}`:t}class F{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void O("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void O("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void O("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const V={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},j=new M(3e4,6e4);function B(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function z(e,t,path,n,o={}){return H(e,o,(async()=>{let body={},o={};n&&("GET"===t?o=n:body={body:JSON.stringify(n)});const c=Object(r.A)(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),F.fetch()(K(e,e.config.apiHost,path,c),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},body))}))}async function H(e,t,n){e._canInitEmulator=!1;const o=Object.assign(Object.assign({},V),t);try{const t=new G(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const c=await r.json();if("needConfirmation"in c)throw W(e,"account-exists-with-different-credential",c);if(r.ok&&!("errorMessage"in c))return c;{const t=r.ok?c.errorMessage:c.error.message,[n,l]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw W(e,"credential-already-in-use",c);if("EMAIL_EXISTS"===n)throw W(e,"email-already-in-use",c);if("USER_DISABLED"===n)throw W(e,"user-disabled",c);const h=o[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw k(e,h,l);_(e,h)}}catch(t){if(t instanceof r.c)throw t;_(e,"network-request-failed")}}async function $(e,t,path,n,r={}){const o=await z(e,t,path,n,r);return"mfaPendingCredential"in o&&_(e,"multi-factor-auth-required",{_serverResponse:o}),o}function K(e,t,path,n){const base=`${t}${path}?${n}`;return e.config.emulator?U(e.config,base):`${e.config.apiScheme}://${base}`}class G{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(E(this.auth,"network-request-failed"))),j.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function W(e,code,t){const n={appName:e.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=E(e,code,n);return r.customData._tokenResponse=t,r}function Q(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function J(e){return 1e3*Number(e)}function Y(e){const[t,n,o]=e.split(".");if(void 0===t||void 0===n||void 0===o)return T("JWT malformed, contained fewer than 3 sections"),null;try{const e=Object(r.d)(n);return e?JSON.parse(e):(T("Failed to decode base64 JWT payload"),null)}catch(e){return T("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function X(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof r.c&&function({code:code}){return"auth/user-disabled"===code||"auth/user-token-expired"===code}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Z{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class ee{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Q(this.lastLoginAt),this.creationTime=Q(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function te(e){var t;const n=e.auth,r=await e.getIdToken(),o=await X(e,async function(e,t){return z(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));C(null==o?void 0:o.users.length,n,"internal-error");const c=o.users[0];e._notifyReloadListener(c);const h=(null===(t=c.providerUserInfo)||void 0===t?void 0:t.length)?c.providerUserInfo.map((e=>{var{providerId:t}=e,n=Object(l.a)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const d=(f=e.providerData,m=h,[...f.filter((e=>!m.some((t=>t.providerId===e.providerId)))),...m]);var f,m;const y=e.isAnonymous,v=!(e.email&&c.passwordHash||(null==d?void 0:d.length)),w=!!y&&v,I={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:d,metadata:new ee(c.createdAt,c.lastLoginAt),isAnonymous:w};Object.assign(e,I)}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){C(e.idToken,"internal-error"),C(void 0!==e.idToken,"internal-error"),C(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Y(e);return C(t,"internal-error"),C(void 0!==t.exp,"internal-error"),C(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return C(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:o,expiresIn:c}=await async function(e,t){const n=await H(e,{},(async()=>{const body=Object(r.A)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:o}=e.config,c=K(e,n,"/v1/token",`key=${o}`),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",F.fetch()(c,{method:"POST",headers:l,body:body})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,o,Number(c))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,object){const{refreshToken:t,accessToken:n,expirationTime:r}=object,o=new ne;return t&&(C("string"==typeof t,"internal-error",{appName:e}),o.refreshToken=t),n&&(C("string"==typeof n,"internal-error",{appName:e}),o.accessToken=n),r&&(C("number"==typeof r,"internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return O("not implemented")}}function re(e,t){C("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ie{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,o=Object(l.a)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ee(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await X(this,this.stsTokenManager.getToken(this.auth,e));return C(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Object(r.p)(e),o=await n.getIdToken(t),c=Y(o);C(c&&c.exp&&c.auth_time&&c.iat,n.auth,"internal-error");const l="object"==typeof c.firebase?c.firebase:void 0,h=null==l?void 0:l.sign_in_provider;return{claims:c,token:o,authTime:Q(J(c.auth_time)),issuedAtTime:Q(J(c.iat)),expirationTime:Q(J(c.exp)),signInProvider:h||null,signInSecondFactor:(null==l?void 0:l.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Object(r.p)(e);await te(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(C(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ie(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){C(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await te(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await X(this,async function(e,t){return z(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,object){var t,n,r,o,c,l,h,d;const f=null!==(t=object.displayName)&&void 0!==t?t:void 0,m=null!==(n=object.email)&&void 0!==n?n:void 0,y=null!==(r=object.phoneNumber)&&void 0!==r?r:void 0,v=null!==(o=object.photoURL)&&void 0!==o?o:void 0,w=null!==(c=object.tenantId)&&void 0!==c?c:void 0,I=null!==(l=object._redirectEventId)&&void 0!==l?l:void 0,T=null!==(h=object.createdAt)&&void 0!==h?h:void 0,_=null!==(d=object.lastLoginAt)&&void 0!==d?d:void 0,{uid:E,emailVerified:k,isAnonymous:S,providerData:A,stsTokenManager:O}=object;C(E&&O,e,"internal-error");const N=ne.fromJSON(this.name,O);C("string"==typeof E,e,"internal-error"),re(f,e.name),re(m,e.name),C("boolean"==typeof k,e,"internal-error"),C("boolean"==typeof S,e,"internal-error"),re(y,e.name),re(v,e.name),re(w,e.name),re(I,e.name),re(T,e.name),re(_,e.name);const R=new ie({uid:E,auth:e,email:m,emailVerified:k,displayName:f,isAnonymous:S,photoURL:v,phoneNumber:y,tenantId:w,stsTokenManager:N,createdAt:T,lastLoginAt:_});return A&&Array.isArray(A)&&(R.providerData=A.map((e=>Object.assign({},e)))),I&&(R._redirectEventId=I),R}static async _fromIdTokenResponse(e,t,n=!1){const r=new ne;r.updateFromServerResponse(t);const o=new ie({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await te(o),o}}class se{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}se.type="NONE";const oe=se;function ae(e,t,n){return`firebase:${e}:${t}:${n}`}class ce{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:o}=this.auth;this.fullUserKey=ae(this.userKey,r.apiKey,o),this.fullPersistenceKey=ae("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ie._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ce(D(oe),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let o=r[0]||D(oe);const c=ae(n,e.config.apiKey,e.name);let l=null;for(const n of t)try{const t=await n._get(c);if(t){const r=ie._fromJSON(e,t);n!==o&&(l=r),o=n;break}}catch(e){}const h=r.filter((p=>p._shouldAllowMigration));return o._shouldAllowMigration&&h.length?(o=h[0],l&&await o._set(c,l.toJSON()),await Promise.all(t.map((async e=>{if(e!==o)try{await e._remove(c)}catch(e){}}))),new ce(o,e,n)):new ce(o,e,n)}}function ue(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(le(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(me(t))return"Blackberry";if(ge(t))return"Webos";if(he(t))return"Safari";if((t.includes("chrome/")||de(t))&&!t.includes("edge/"))return"Chrome";if(pe(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function le(e=Object(r.q)()){return/firefox\//i.test(e)}function he(e=Object(r.q)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function de(e=Object(r.q)()){return/crios\//i.test(e)}function fe(e=Object(r.q)()){return/iemobile/i.test(e)}function pe(e=Object(r.q)()){return/android/i.test(e)}function me(e=Object(r.q)()){return/blackberry/i.test(e)}function ge(e=Object(r.q)()){return/webos/i.test(e)}function ye(e=Object(r.q)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ve(e=Object(r.q)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function we(e=Object(r.q)()){return ye(e)||pe(e)||ge(e)||me(e)||/windows phone/i.test(e)||fe(e)}function be(e,t=[]){let n;switch(e){case"Browser":n=ue(Object(r.q)());break;case"Worker":n=`${ue(Object(r.q)())}-${e}`;break;default:n=e}const c=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${c}`}class Ie{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Te{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ee(this),this.idTokenSubscription=new Ee(this),this.beforeStateQueue=new Ie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=w,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=D(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ce.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,c=null==r?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);n&&n!==c||!(null==l?void 0:l.user)||(r=l.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return C(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await te(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Object(r.p)(e):null;return t&&C(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&C(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(D(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.b("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&D(e)||this._popupRedirectResolver;C(t,this,"argument-error"),this.redirectPersistenceManager=await ce.create(this,[D(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t),c=this._isInitialized?Promise.resolve():this._initializationPromise;return C(c,this,"internal-error"),c.then((()=>o(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return C(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=be(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function _e(e){return Object(r.p)(e)}class Ee{constructor(e){this.auth=e,this.observer=null,this.addObserver=Object(r.h)((e=>this.observer=e))}get next(){return C(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ke(e,t,n){const r=_e(e);C(r._canInitEmulator,r,"emulator-config-failed"),C(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!!(null==n?void 0:n.disableWarnings),c=Se(t),{host:l,port:h}=function(e){const t=Se(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const e=o[1];return{host:e,port:Ae(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ae(t)}}}(t),d=null===h?"":`:${h}`;r.config.emulator={url:`${c}//${l}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:h,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Se(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ae(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ce{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return O("not implemented")}_getIdTokenResponse(e){return O("not implemented")}_linkToIdToken(e,t){return O("not implemented")}_getReauthenticationResolver(e){return O("not implemented")}}async function Oe(e,t){return z(e,"POST","/v1/accounts:resetPassword",B(e,t))}async function Ne(e,t){return z(e,"POST","/v1/accounts:update",t)}async function Re(e,t){return z(e,"POST","/v1/accounts:sendOobCode",B(e,t))}class De extends Ce{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new De(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new De(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return $(e,"POST","/v1/accounts:signInWithPassword",B(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return $(e,"POST","/v1/accounts:signInWithEmailLink",B(e,t))}(e,{email:this._email,oobCode:this._password});default:_(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ne(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return $(e,"POST","/v1/accounts:signInWithEmailLink",B(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:_(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xe(e,t){return $(e,"POST","/v1/accounts:signInWithIdp",B(e,t))}class Le extends Ce{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Le(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,o=Object(l.a)(t,["providerId","signInMethod"]);if(!n||!r)return null;const c=new Le(n,r);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){return xe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xe(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Object(r.A)(t)}return e}}const Pe={USER_NOT_FOUND:"user-not-found"};class Me extends Ce{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Me({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Me({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return $(e,"POST","/v1/accounts:signInWithPhoneNumber",B(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await $(e,"POST","/v1/accounts:signInWithPhoneNumber",B(e,t));if(n.temporaryProof)throw W(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return $(e,"POST","/v1/accounts:signInWithPhoneNumber",B(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Pe)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}=e;return n||t||r||o?new Me({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}):null}}class Ue{constructor(e){var t,n,o,c,l,h;const d=Object(r.B)(Object(r.k)(e)),f=null!==(t=d.apiKey)&&void 0!==t?t:null,code=null!==(n=d.oobCode)&&void 0!==n?n:null,m=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(o=d.mode)&&void 0!==o?o:null);C(f&&code&&m,"argument-error"),this.apiKey=f,this.operation=m,this.code=code,this.continueUrl=null!==(c=d.continueUrl)&&void 0!==c?c:null,this.languageCode=null!==(l=d.languageCode)&&void 0!==l?l:null,this.tenantId=null!==(h=d.tenantId)&&void 0!==h?h:null}static parseLink(link){const e=function(e){const link=Object(r.B)(Object(r.k)(e)).link,t=link?Object(r.B)(Object(r.k)(link)).deep_link_id:null,n=Object(r.B)(Object(r.k)(e)).deep_link_id;return(n?Object(r.B)(Object(r.k)(n)).link:null)||n||t||link||e}(link);try{return new Ue(e)}catch(e){return null}}}class Fe{constructor(){this.providerId=Fe.PROVIDER_ID}static credential(e,t){return De._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ue.parseLink(t);return C(n,"argument-error"),De._fromEmailAndCode(e,n.code,n.tenantId)}}Fe.PROVIDER_ID="password",Fe.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Fe.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ve{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class je extends Ve{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qe extends je{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return C("providerId"in t&&"signInMethod"in t,"argument-error"),Le._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return C(e.idToken||e.accessToken,"argument-error"),Le._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return qe.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return qe.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:o,nonce:c,providerId:l}=e;if(!(n||r||t||o))return null;if(!l)return null;try{return new qe(l)._credential({idToken:t,accessToken:n,nonce:c,pendingToken:o})}catch(e){return null}}}class Be extends je{constructor(){super("facebook.com")}static credential(e){return Le._fromParams({providerId:Be.PROVIDER_ID,signInMethod:Be.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Be.credentialFromTaggedObject(e)}static credentialFromError(e){return Be.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Be.credential(e.oauthAccessToken)}catch(e){return null}}}Be.FACEBOOK_SIGN_IN_METHOD="facebook.com",Be.PROVIDER_ID="facebook.com";class ze extends je{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Le._fromParams({providerId:ze.PROVIDER_ID,signInMethod:ze.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ze.credentialFromTaggedObject(e)}static credentialFromError(e){return ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return ze.credential(t,n)}catch(e){return null}}}ze.GOOGLE_SIGN_IN_METHOD="google.com",ze.PROVIDER_ID="google.com";class He extends je{constructor(){super("github.com")}static credential(e){return Le._fromParams({providerId:He.PROVIDER_ID,signInMethod:He.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return He.credentialFromTaggedObject(e)}static credentialFromError(e){return He.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return He.credential(e.oauthAccessToken)}catch(e){return null}}}He.GITHUB_SIGN_IN_METHOD="github.com",He.PROVIDER_ID="github.com";class $e extends Ce{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return xe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xe(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:o}=t;return n&&r&&o&&n===r?new $e(n,o):null}static _create(e,t){return new $e(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ke extends Ve{constructor(e){C(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Ke.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Ke.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=$e.fromJSON(e);return C(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return $e._create(n,t)}catch(e){return null}}}class Ge extends je{constructor(){super("twitter.com")}static credential(e,t){return Le._fromParams({providerId:Ge.PROVIDER_ID,signInMethod:Ge.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ge.credentialFromTaggedObject(e)}static credentialFromError(e){return Ge.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Ge.credential(t,n)}catch(e){return null}}}async function We(e,t){return $(e,"POST","/v1/accounts:signUp",B(e,t))}Ge.TWITTER_SIGN_IN_METHOD="twitter.com",Ge.PROVIDER_ID="twitter.com";class Qe{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const o=await ie._fromIdTokenResponse(e,n,r),c=Je(n);return new Qe({user:o,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Je(n);return new Qe({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Je(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function Ye(e){var t;const n=_e(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Qe({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await We(n,{returnSecureToken:!0}),o=await Qe._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(o.user),o}class Xe extends r.c{constructor(e,t,n,r){var o;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Xe.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Xe(e,t,n,r)}}function Ze(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Xe._fromErrorAndOperation(e,n,t,r);throw n}))}function et(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}async function tt(e,t){const n=Object(r.p)(e);await it(!0,n,t);const{providerUserInfo:o}=await async function(e,t){return z(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),c=et(o||[]);return n.providerData=n.providerData.filter((e=>c.has(e.providerId))),c.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function nt(e,t,n=!1){const r=await X(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Qe._forOperation(e,"link",r)}async function it(e,t,n){await te(t);const code=!1===e?"provider-already-linked":"no-such-provider";C(et(t.providerData).has(n)===e,t.auth,code)}async function st(e,t,n=!1){const{auth:r}=e,o="reauthenticate";try{const c=await X(e,Ze(r,o,t,e),n);C(c.idToken,r,"internal-error");const l=Y(c.idToken);C(l,r,"internal-error");const{sub:h}=l;return C(e.uid===h,r,"user-mismatch"),Qe._forOperation(e,o,c)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&_(r,"user-mismatch"),e}}async function ot(e,t,n=!1){const r="signIn",o=await Ze(e,r,t),c=await Qe._fromIdTokenResponse(e,r,o);return n||await e._updateCurrentUser(c.user),c}async function at(e,t){return ot(_e(e),t)}async function ct(e,t){const n=Object(r.p)(e);return await it(!1,n,t.providerId),nt(n,t)}async function ut(e,t){return st(Object(r.p)(e),t)}async function lt(e,t){const n=_e(e),r=await async function(e,t){return $(e,"POST","/v1/accounts:signInWithCustomToken",B(e,t))}(n,{token:t,returnSecureToken:!0}),o=await Qe._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(o.user),o}class ht{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ft._fromServerResponse(e,t):_(e,"internal-error")}}class ft extends ht{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ft(t)}}function pt(e,t,n){var r;C((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),C(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(C(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(C(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function mt(e,t,n){const o=Object(r.p)(e),c={requestType:"PASSWORD_RESET",email:t};n&&pt(o,c,n),await async function(e,t){return Re(e,t)}(o,c)}async function gt(e,t,n){await Oe(Object(r.p)(e),{oobCode:t,newPassword:n})}async function yt(e,t){await async function(e,t){return z(e,"POST","/v1/accounts:update",B(e,t))}(Object(r.p)(e),{oobCode:t})}async function vt(e,t){const n=Object(r.p)(e),o=await Oe(n,{oobCode:t}),c=o.requestType;switch(C(c,n,"internal-error"),c){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":C(o.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":C(o.mfaInfo,n,"internal-error");default:C(o.email,n,"internal-error")}let l=null;return o.mfaInfo&&(l=ht._fromServerResponse(_e(n),o.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===o.requestType?o.newEmail:o.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===o.requestType?o.email:o.newEmail)||null,multiFactorInfo:l},operation:c}}async function wt(e,code){const{data:data}=await vt(Object(r.p)(e),code);return data.email}async function bt(e,t,n){const r=_e(e),o=await We(r,{returnSecureToken:!0,email:t,password:n}),c=await Qe._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function It(e,t,n){return at(Object(r.p)(e),Fe.credential(t,n))}async function Tt(e,t,n){const o=Object(r.p)(e),c={requestType:"EMAIL_SIGNIN",email:t};C(n.handleCodeInApp,o,"argument-error"),n&&pt(o,c,n),await async function(e,t){return Re(e,t)}(o,c)}function _t(e,t){const n=Ue.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}async function Et(e,t,n){const o=Object(r.p)(e),c=Fe.credentialWithLink(t,n||x());return C(c._tenantId===(o.tenantId||null),o,"tenant-id-mismatch"),at(o,c)}async function kt(e,t){const n={identifier:t,continueUri:L()?x():"http://localhost"},{signinMethods:o}=await async function(e,t){return z(e,"POST","/v1/accounts:createAuthUri",B(e,t))}(Object(r.p)(e),n);return o||[]}async function St(e,t){const n=Object(r.p)(e),o={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&pt(n.auth,o,t);const{email:c}=await async function(e,t){return Re(e,t)}(n.auth,o);c!==e.email&&await e.reload()}async function At(e,t,n){const o=Object(r.p)(e),c={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&pt(o.auth,c,n);const{email:l}=await async function(e,t){return Re(e,t)}(o.auth,c);l!==e.email&&await e.reload()}async function Ct(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const o=Object(r.p)(e),c={idToken:await o.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},l=await X(o,async function(e,t){return z(e,"POST","/v1/accounts:update",t)}(o.auth,c));o.displayName=l.displayName||null,o.photoURL=l.photoUrl||null;const h=o.providerData.find((({providerId:e})=>"password"===e));h&&(h.displayName=o.displayName,h.photoURL=o.photoURL),await o._updateTokensIfNecessary(l)}function Ot(e,t){return Rt(Object(r.p)(e),t,null)}function Nt(e,t){return Rt(Object(r.p)(e),null,t)}async function Rt(e,t,n){const{auth:r}=e,o={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(o.email=t),n&&(o.password=n);const c=await X(e,Ne(r,o));await e._updateTokensIfNecessary(c,!0)}class Dt{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class xt extends Dt{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Lt extends Dt{constructor(e,t){super(e,"facebook.com",t)}}class Pt extends xt{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Mt extends Dt{constructor(e,t){super(e,"google.com",t)}}class Ut extends xt{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Ft(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,o=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},c=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Y(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Dt(c,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Lt(c,o);case"github.com":return new Pt(c,o);case"google.com":return new Mt(c,o);case"twitter.com":return new Ut(c,o,e.screenName||null);case"custom":case"anonymous":return new Dt(c,null);default:return new Dt(c,r,o)}}(n)}function Vt(e,t,n,o){return Object(r.p)(e).onAuthStateChanged(t,n,o)}function jt(e){return Object(r.p)(e).signOut()}class qt{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new qt("enroll",e,t)}static _fromMfaPendingCredential(e){return new qt("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return qt._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return qt._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Bt{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=_e(e),r=t.customData._serverResponse,o=(r.mfaInfo||[]).map((e=>ht._fromServerResponse(n,e)));C(r.mfaPendingCredential,n,"internal-error");const c=qt._fromMfaPendingCredential(r.mfaPendingCredential);return new Bt(c,o,(async e=>{const o=await e._process(n,c);delete r.mfaInfo,delete r.mfaPendingCredential;const l=Object.assign(Object.assign({},r),{idToken:o.idToken,refreshToken:o.refreshToken});switch(t.operationType){case"signIn":const e=await Qe._fromIdTokenResponse(n,t.operationType,l);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return C(t.user,n,"internal-error"),Qe._forOperation(t.user,t.operationType,l);default:_(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function zt(e,t){var n;const o=Object(r.p)(e),c=t;return C(t.customData.operationType,o,"argument-error"),C(null===(n=c.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,o,"argument-error"),Bt._fromError(o,c)}class Ht{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>ht._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Ht(e)}async getSession(){return qt._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){const n=e,r=await this.getSession(),o=await X(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await X(this.user,(r=this.user.auth,o={idToken:n,mfaEnrollmentId:t},z(r,"POST","/v2/accounts/mfaEnrollment:withdraw",B(r,o))));this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}var r,o}}const $t=new WeakMap;function Kt(e){const t=Object(r.p)(e);return $t.has(t)||$t.set(t,Ht._fromUser(t)),$t.get(t)}const Gt="__sak";class Wt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gt,"1"),this.storage.removeItem(Gt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Qt extends Wt{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Object(r.q)();return he(e)||ye(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=we(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const o=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},c=this.storage.getItem(n);Object(r.u)()&&10===document.documentMode&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,10):o()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qt.type="LOCAL";const Jt=Qt;class Yt extends Wt{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Yt.type="SESSION";const Xt=Yt;class Zt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Zt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:data}=t.data,o=this.handlersMap[r];if(!(null==o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const c=Array.from(o).map((async e=>e(t.origin,data))),l=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(c);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:l})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function en(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}Zt.receivers=[];class tn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,data,t=50){const n="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let r,o;return new Promise(((c,l)=>{const h=en("",20);n.port1.start();const d=setTimeout((()=>{l(new Error("unsupported_event"))}),t);o={messageChannel:n,onMessage(e){const t=e;if(t.data.eventId===h)switch(t.data.status){case"ack":clearTimeout(d),r=setTimeout((()=>{l(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),c(t.data.response);break;default:clearTimeout(d),clearTimeout(r),l(new Error("invalid_response"))}}},this.handlers.add(o),n.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:data},[n.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function nn(){return window}function rn(){return void 0!==nn().WorkerGlobalScope&&"function"==typeof nn().importScripts}const sn="firebaseLocalStorageDb",on=1,an="firebaseLocalStorage",cn="fbase_key";class un{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ln(e,t){return e.transaction([an],t?"readwrite":"readonly").objectStore(an)}function hn(){const e=indexedDB.open(sn,on);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(an,{keyPath:cn})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(an)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(sn);return new un(e).toPromise()}(),t(await hn()))}))}))}async function dn(e,t,n){const r=ln(e,!0).put({[cn]:t,value:n});return new un(r).toPromise()}function fn(e,t){const n=ln(e,!0).delete(t);return new un(n).toPromise()}class pn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await hn()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zt._getInstance(rn()?self:null),this.receiver._subscribe("keyChanged",(async(e,data)=>({keyProcessed:(await this._poll()).includes(data.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new tn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hn();return await dn(e,Gt,"1"),await fn(e,Gt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>dn(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ln(e,!1).get(t),data=await new un(n).toPromise();return void 0===data?null:data.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>fn(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ln(e,!1).getAll();return new un(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}pn.type="LOCAL";const mn=pn;function gn(e){return new Promise(((t,n)=>{const r=document.createElement("script");var o,c;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=E("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(c=null===(o=document.getElementsByTagName("head"))||void 0===o?void 0:o[0])&&void 0!==c?c:document).appendChild(r)}))}function yn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const vn=1e12;class wn{constructor(e){this.auth=e,this.counter=vn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new bn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||vn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||vn;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||vn;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class bn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;C(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const In=yn("rcb"),Tn=new M(3e4,6e4);class _n{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=nn().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return C(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(nn().grecaptcha):new Promise(((n,o)=>{const c=nn().setTimeout((()=>{o(E(e,"network-request-failed"))}),Tn.get());nn()[In]=()=>{nn().clearTimeout(c),delete nn()[In];const r=nn().grecaptcha;if(!r)return void o(E(e,"internal-error"));const l=r.render;r.render=(e,t)=>{const n=l(e,t);return this.counter++,n},this.hostLanguage=t,n(r)};gn(`https://www.google.com/recaptcha/api.js??${Object(r.A)({onload:In,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(c),o(E(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=nn().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class En{async load(e){return new wn(e)}clearedOneInstance(){}}const kn="recaptcha",Sn={theme:"light",type:"image"};class An{constructor(e,t=Object.assign({},Sn),n){this.parameters=t,this.type=kn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_e(n),this.isInvisible="invisible"===this.parameters.size,C("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;C(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new En:new _n,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){C(!this.parameters.sitekey,this.auth,"argument-error"),C(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),C("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const n=nn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){C(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){C(L()&&!rn(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await z(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);C(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return C(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Cn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Me._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function On(e,t,n){const o=_e(e),c=await Dn(o,t,Object(r.p)(n));return new Cn(c,(e=>at(o,e)))}async function Nn(e,t,n){const o=Object(r.p)(e);await it(!1,o,"phone");const c=await Dn(o.auth,t,Object(r.p)(n));return new Cn(c,(e=>ct(o,e)))}async function Rn(e,t,n){const o=Object(r.p)(e),c=await Dn(o.auth,t,Object(r.p)(n));return new Cn(c,(e=>ut(o,e)))}async function Dn(e,t,n){var r;const o=await n.verify();try{let c;if(C("string"==typeof o,e,"argument-error"),C(n.type===kn,e,"argument-error"),c="string"==typeof t?{phoneNumber:t}:t,"session"in c){const t=c.session;if("phoneNumber"in c){C("enroll"===t.type,e,"internal-error");const n=await function(e,t){return z(e,"POST","/v2/accounts/mfaEnrollment:start",B(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:c.phoneNumber,recaptchaToken:o}});return n.phoneSessionInfo.sessionInfo}{C("signin"===t.type,e,"internal-error");const n=(null===(r=c.multiFactorHint)||void 0===r?void 0:r.uid)||c.multiFactorUid;C(n,e,"missing-multi-factor-info");const l=await function(e,t){return z(e,"POST","/v2/accounts/mfaSignIn:start",B(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:o}});return l.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return z(e,"POST","/v1/accounts:sendVerificationCode",B(e,t))}(e,{phoneNumber:c.phoneNumber,recaptchaToken:o});return t}}finally{n._reset()}}async function xn(e,t){await nt(Object(r.p)(e),t)}class Ln{constructor(e){this.providerId=Ln.PROVIDER_ID,this.auth=_e(e)}verifyPhoneNumber(e,t){return Dn(this.auth,e,Object(r.p)(t))}static credential(e,t){return Me._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ln.credentialFromTaggedObject(t)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Me._fromTokenResponse(t,n):null}}function Pn(e,t){return t?D(t):(C(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ln.PROVIDER_ID="phone",Ln.PHONE_SIGN_IN_METHOD="phone";class Mn extends Ce{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xe(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xe(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xe(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Un(e){return ot(e.auth,new Mn(e),e.bypassAuthState)}function Fn(e){const{auth:t,user:n}=e;return C(n,t,"internal-error"),st(n,new Mn(e),e.bypassAuthState)}async function Vn(e){const{auth:t,user:n}=e;return C(n,t,"internal-error"),nt(n,new Mn(e),e.bypassAuthState)}class jn{constructor(e,filter,t,n,r=!1){this.auth=e,this.resolver=t,this.user=n,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(filter)?filter:[filter]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:o,error:c,type:l}=e;if(c)return void this.reject(c);const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(h))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Un;case"linkViaPopup":case"linkViaRedirect":return Vn;case"reauthViaPopup":case"reauthViaRedirect":return Fn;default:_(this.auth,"internal-error")}}resolve(e){N(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){N(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qn=new M(2e3,1e4);async function Bn(e,t,n){const r=_e(e);S(e,t,Ve);const o=Pn(r,n);return new $n(r,"signInViaPopup",t,o).executeNotNull()}async function zn(e,t,n){const o=Object(r.p)(e);S(o.auth,t,Ve);const c=Pn(o.auth,n);return new $n(o.auth,"reauthViaPopup",t,c,o).executeNotNull()}async function Hn(e,t,n){const o=Object(r.p)(e);S(o.auth,t,Ve);const c=Pn(o.auth,n);return new $n(o.auth,"linkViaPopup",t,c,o).executeNotNull()}class $n extends jn{constructor(e,filter,t,n,r){super(e,filter,n,r),this.provider=t,this.authWindow=null,this.pollId=null,$n.currentPopupAction&&$n.currentPopupAction.cancel(),$n.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return C(e,this.auth,"internal-error"),e}async onExecution(){N(1===this.filter.length,"Popup operations only handle one event");const e=en();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(E(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(E(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$n.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(E(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,qn.get())};e()}}$n.currentPopupAction=null;const Kn="pendingRedirect",Gn=new Map;class Wn extends jn{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Gn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Zn(t),r=Xn(e);if(!await r._isAvailable())return!1;const o="true"===await r._get(n);return await r._remove(n),o}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Gn.set(this.auth._key(),e)}return this.bypassAuthState||Gn.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Qn(e,t){return Xn(e)._set(Zn(t),"true")}function Jn(){Gn.clear()}function Yn(e,t){Gn.set(e._key(),t)}function Xn(e){return D(e._redirectPersistence)}function Zn(e){return ae(Kn,e.config.apiKey,e.name)}function er(e,t,n){return async function(e,t,n){const r=_e(e);S(e,t,Ve),await r._initializationPromise;const o=Pn(r,n);return await Qn(o,r),o._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function nr(e,t,n){return async function(e,t,n){const o=Object(r.p)(e);S(o.auth,t,Ve),await o.auth._initializationPromise;const c=Pn(o.auth,n);await Qn(c,o.auth);const l=await or(o);return c._openRedirect(o.auth,t,"reauthViaRedirect",l)}(e,t,n)}function rr(e,t,n){return async function(e,t,n){const o=Object(r.p)(e);S(o.auth,t,Ve),await o.auth._initializationPromise;const c=Pn(o.auth,n);await it(!1,o,t.providerId),await Qn(c,o.auth);const l=await or(o);return c._openRedirect(o.auth,t,"linkViaRedirect",l)}(e,t,n)}async function ir(e,t){return await _e(e)._initializationPromise,sr(e,t,!1)}async function sr(e,t,n=!1){const r=_e(e),o=Pn(r,t),c=new Wn(r,o,n),l=await c.execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,t)),l}async function or(e){const t=en(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class ar{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ur(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ur(e)){const code=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(E(this.auth,code))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cr(e))}saveEventToCache(e){this.cachedEventUids.add(cr(e)),this.lastProcessedEventTime=Date.now()}}function cr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function ur({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function lr(e,t={}){return z(e,"GET","/v1/projects",t)}const dr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fr=/^https?/;function pr(e){const t=x(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return""===o.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!fr.test(n))return!1;if(dr.test(e))return r===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const mr=new M(3e4,6e4);function gr(){const e=nn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let i=0;i<e.CP.length;i++)e.CP[i]=null}let yr=null;function vr(e){return yr=yr||function(e){return new Promise(((t,n)=>{var r,o,c;function l(){gr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{gr(),n(E(e,"network-request-failed"))},timeout:mr.get()})}if(null===(o=null===(r=nn().gapi)||void 0===r?void 0:r.iframes)||void 0===o?void 0:o.Iframe)t(gapi.iframes.getContext());else{if(!(null===(c=nn().gapi)||void 0===c?void 0:c.load)){const t=yn("iframefcb");return nn()[t]=()=>{gapi.load?l():n(E(e,"network-request-failed"))},gn(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}l()}})).catch((e=>{throw yr=null,e}))}(e),yr}const wr=new M(5e3,15e3),Ir="__/auth/iframe",Tr="emulator/auth/iframe",_r={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Er=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kr(e){const t=e.config;C(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?U(t,Tr):`https://${e.config.authDomain}/${Ir}`,c={apiKey:t.apiKey,appName:e.name,v:o.SDK_VERSION},l=Er.get(e.config.apiHost);l&&(c.eid=l);const h=e._getFrameworks();return h.length&&(c.fw=h.join(",")),`${n}?${Object(r.A)(c).slice(1)}`}const Sr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ar=500,Cr=600,Or="_blank",Nr="http://localhost";class Rr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Dr(e,t,n,o=Ar,c=Cr){const l=Math.max((window.screen.availHeight-c)/2,0).toString(),h=Math.max((window.screen.availWidth-o)/2,0).toString();let d="";const f=Object.assign(Object.assign({},Sr),{width:o.toString(),height:c.toString(),top:l,left:h}),m=Object(r.q)().toLowerCase();n&&(d=de(m)?Or:n),le(m)&&(t=t||Nr,f.scrollbars="yes");const y=Object.entries(f).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=Object(r.q)()){var t;return ye(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(m)&&"_self"!==d)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",d),new Rr(null);const v=window.open(t||"",d,y);C(v,e,"popup-blocked");try{v.focus()}catch(e){}return new Rr(v)}const xr="__/auth/handler",Lr="emulator/auth/handler";function Pr(e,t,n,c,l,h){C(e.config.authDomain,e,"auth-domain-config-required"),C(e.config.apiKey,e,"invalid-api-key");const d={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:c,v:o.SDK_VERSION,eventId:l};if(t instanceof Ve){t.setDefaultLanguage(e.languageCode),d.providerId=t.providerId||"",Object(r.t)(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(h||{}))d[e]=t}if(t instanceof je){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(d.scopes=e.join(","))}e.tenantId&&(d.tid=e.tenantId);const f=d;for(const e of Object.keys(f))void 0===f[e]&&delete f[e];return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${xr}`;return U(e,Lr)}(e)}?${Object(r.A)(f).slice(1)}`}const Mr="webStorageSupport";const Ur=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xt,this._completeRedirectFn=sr,this._overrideRedirectResult=Yn}async _openPopup(e,t,n,r){var o;N(null===(o=this.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");return Dr(e,Pr(e,t,n,x(),r),en())}async _openRedirect(e,t,n,r){var o;return await this._originValidation(e),o=Pr(e,t,n,x(),r),nn().location.href=o,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(N(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const iframe=await async function(e){const t=await vr(e),n=nn().gapi;return C(n,e,"internal-error"),t.open({where:document.body,url:kr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_r,dontclear:!0},(iframe=>new Promise((async(t,n)=>{await iframe.restyle({setHideOnLeave:!1});const r=E(e,"network-request-failed"),o=nn().setTimeout((()=>{n(r)}),wr.get());function c(){nn().clearTimeout(o),t(iframe)}iframe.ping(c).then(c,(()=>{n(r)}))}))))}(e),t=new ar(e);return iframe.register("authEvent",(n=>{C(null==n?void 0:n.authEvent,e,"invalid-auth-event");return{status:t.onEvent(n.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:t},this.iframes[e._key()]=iframe,t}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mr,{type:Mr},(n=>{var r;const o=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Mr];void 0!==o&&t(!!o),_(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await lr(e);for(const e of t)try{if(pr(e))return}catch(e){}_(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return we()||he()||ye()}};class Fr{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return O("unexpected MultiFactorSessionType")}}}class Vr extends Fr{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Vr(e)}_finalizeEnroll(e,t,n){return function(e,t){return z(e,"POST","/v2/accounts/mfaEnrollment:finalize",B(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return z(e,"POST","/v2/accounts/mfaSignIn:finalize",B(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class jr{constructor(){}static assertion(e){return Vr._fromCredential(e)}}jr.FACTOR_ID="phone";var qr="@firebase/auth",Br="0.21.3";class zr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){C(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Hr=Object(r.o)("authIdTokenMaxAge")||300;let $r=null;const Kr=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Hr)return;const o=null==n?void 0:n.token;$r!==o&&($r=o,await fetch(e,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Gr(e=Object(o.getApp)()){const t=Object(o._getProvider)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Object(o._getProvider)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),o=n.getOptions();if(Object(r.i)(o,null!=t?t:{}))return e;_(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ur,persistence:[mn,Jt,Xt]}),c=Object(r.o)("authTokenSyncURL");if(c){const e=Kr(c);!function(e,t,n){Object(r.p)(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,o){Object(r.p)(e).onIdTokenChanged(t,n,o)}(n,(t=>e(t)))}const l=Object(r.m)("auth");return l&&ke(n,`http://${l}`),n}var Wr;Wr="Browser",Object(o._registerComponent)(new h.a("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:o,authDomain:c}=n.options;return((e,n)=>{C(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),C(!(null==c?void 0:c.includes(":")),"argument-error",{appName:e.name});const r={apiKey:o,authDomain:c,clientPlatform:Wr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:be(Wr)},l=new Te(e,n,r);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(D);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l})(n,r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Object(o._registerComponent)(new h.a("auth-internal",(e=>(e=>new zr(e))(_e(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Object(o.registerVersion)(qr,Br,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Wr)),Object(o.registerVersion)(qr,Br,"esm2017")},11:function(e,t,n){"use strict";n.r(t),n.d(t,"FirebaseError",(function(){return c.c})),n.d(t,"SDK_VERSION",(function(){return W})),n.d(t,"_DEFAULT_ENTRY_NAME",(function(){return L})),n.d(t,"_addComponent",(function(){return F})),n.d(t,"_addOrOverwriteComponent",(function(){return V})),n.d(t,"_apps",(function(){return M})),n.d(t,"_clearComponents",(function(){return H})),n.d(t,"_components",(function(){return U})),n.d(t,"_getProvider",(function(){return B})),n.d(t,"_registerComponent",(function(){return j})),n.d(t,"_removeServiceInstance",(function(){return z})),n.d(t,"deleteApp",(function(){return X})),n.d(t,"getApp",(function(){return J})),n.d(t,"getApps",(function(){return Y})),n.d(t,"initializeApp",(function(){return Q})),n.d(t,"onLog",(function(){return ee})),n.d(t,"registerVersion",(function(){return Z})),n.d(t,"setLogLevel",(function(){return te}));var r=n(30),o=n(20),c=n(0);const l=(object,e)=>e.some((e=>object instanceof e));let h,d;const f=new WeakMap,m=new WeakMap,y=new WeakMap,v=new WeakMap,w=new WeakMap;let I={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return m.get(e);if("objectStoreNames"===t)return e.objectStoreNames||y.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return E(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function T(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(d||(d=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(k(this),t),E(f.get(this))}:function(...t){return E(e.apply(k(this),t))}:function(t,...n){const r=e.call(k(this),t,...n);return y.set(r,t.sort?t.sort():[t]),E(r)}}function _(e){return"function"==typeof e?T(e):(e instanceof IDBTransaction&&function(e){if(m.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",c),e.removeEventListener("abort",c)},o=()=>{t(),r()},c=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",c),e.addEventListener("abort",c)}));m.set(e,t)}(e),l(e,h||(h=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,I):e)}function E(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",c)},o=()=>{t(E(e.result)),r()},c=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",c)}));return t.then((t=>{t instanceof IDBCursor&&f.set(t,e)})).catch((()=>{})),w.set(t,e),t}(e);if(v.has(e))return v.get(e);const t=_(e);return t!==e&&(v.set(e,t),w.set(t,e)),t}const k=e=>w.get(e);const S=["get","getKey","getAll","getAllKeys","count"],A=["put","add","delete","clear"],C=new Map;function O(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(C.get(t))return C.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=A.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!S.includes(n))return;const c=async function(e,...t){const c=this.transaction(e,o?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(t.shift())),(await Promise.all([l[n](...t),o&&c.done]))[0]};return C.set(t,c),c}I=(e=>({...e,get:(t,n,r)=>O(t,n)||e.get(t,n,r),has:(t,n)=>!!O(t,n)||e.has(t,n)}))(I);class N{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const component=e.getComponent();return"VERSION"===(null==component?void 0:component.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const R="@firebase/app",D="0.9.3",x=new o.b("@firebase/app"),L="[DEFAULT]",P={[R]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},M=new Map,U=new Map;function F(e,component){try{e.container.addComponent(component)}catch(t){x.debug(`Component ${component.name} failed to register with FirebaseApp ${e.name}`,t)}}function V(e,component){e.container.addOrOverwriteComponent(component)}function j(component){const e=component.name;if(U.has(e))return x.debug(`There were multiple attempts to register component ${e}.`),!1;U.set(e,component);for(const e of M.values())F(e,component);return!0}function B(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function z(e,t,n=L){B(e,t).clearInstance(n)}function H(){U.clear()}const $={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},K=new c.b("app","Firebase",$);class G{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.a("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw K.create("app-deleted",{appName:this._name})}}const W="9.17.1";function Q(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const o=Object.assign({name:L,automaticDataCollectionEnabled:!1},t),l=o.name;if("string"!=typeof l||!l)throw K.create("bad-app-name",{appName:String(l)});if(n||(n=Object(c.l)()),!n)throw K.create("no-options");const h=M.get(l);if(h){if(Object(c.i)(n,h.options)&&Object(c.i)(o,h.config))return h;throw K.create("duplicate-app",{appName:l})}const d=new r.b(l);for(const component of U.values())d.addComponent(component);const f=new G(n,o,d);return M.set(l,f),f}function J(e=L){const t=M.get(e);if(!t&&e===L)return Q();if(!t)throw K.create("no-app",{appName:e});return t}function Y(){return Array.from(M.values())}async function X(e){const t=e.name;M.has(t)&&(M.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Z(e,t,n){var o;let c=null!==(o=P[e])&&void 0!==o?o:e;n&&(c+=`-${n}`);const l=c.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const e=[`Unable to register library "${c}" with version "${t}":`];return l&&e.push(`library name "${c}" contains illegal characters (whitespace or "/")`),l&&h&&e.push("and"),h&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void x.warn(e.join(" "))}j(new r.a(`${c}-version`,(()=>({library:c,version:t})),"VERSION"))}function ee(e,t){if(null!==e&&"function"!=typeof e)throw K.create("invalid-log-argument");Object(o.d)(e,t)}function te(e){Object(o.c)(e)}const ne="firebase-heartbeat-database",re=1,ie="firebase-heartbeat-store";let se=null;function oe(){return se||(se=function(e,t,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const l=indexedDB.open(e,t),h=E(l);return r&&l.addEventListener("upgradeneeded",(e=>{r(E(l.result),e.oldVersion,e.newVersion,E(l.transaction))})),n&&l.addEventListener("blocked",(()=>n())),h.then((e=>{c&&e.addEventListener("close",(()=>c())),o&&e.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),h}(ne,re,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(ie)}}).catch((e=>{throw K.create("idb-open",{originalErrorMessage:e.message})}))),se}async function ae(e,t){try{const n=(await oe()).transaction(ie,"readwrite"),r=n.objectStore(ie);return await r.put(t,ce(e)),n.done}catch(e){if(e instanceof c.c)x.warn(e.message);else{const t=K.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});x.warn(t.message)}}}function ce(e){return`${e.name}!${e.options.appId}`}const ue=1024;class le{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new de(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=he();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=he(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=ue){const n=[];let r=e.slice();for(const o of e){const e=n.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),fe(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),fe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Object(c.e)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function he(){return(new Date).toISOString().substring(0,10)}class de{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Object(c.v)()&&Object(c.C)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{return(await oe()).transaction(ie).objectStore(ie).get(ce(e))}catch(e){if(e instanceof c.c)x.warn(e.message);else{const t=K.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});x.warn(t.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ae(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ae(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function fe(e){return Object(c.e)(JSON.stringify({version:2,heartbeats:e})).length}var pe;pe="",j(new r.a("platform-logger",(e=>new N(e)),"PRIVATE")),j(new r.a("heartbeat",(e=>new le(e)),"PRIVATE")),Z(R,D,pe),Z(R,D,"esm2017"),Z("fire-js","")},13:function(e,t,n){"use strict";var r=n(206);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c})),n.d(t,"d",(function(){return r.d})),n.d(t,"e",(function(){return r.e})),n.d(t,"f",(function(){return r.f})),n.d(t,"g",(function(){return r.g})),n.d(t,"h",(function(){return r.h})),n.d(t,"i",(function(){return r.i})),n.d(t,"j",(function(){return r.j}))},148:function(e,t,n){"use strict";var r={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var n=t.parent,r=t.slots,o=t.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?e(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||h):l.length>0?l.map((function(){return e(!1)})):e(!1))}};e.exports=r},151:function(e,t,n){"use strict";var r=n(11);n.d(t,"a",(function(){return r.getApps})),n.d(t,"b",(function(){return r.initializeApp}));Object(r.registerVersion)("firebase","9.17.1","app")},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return y}));const r=[];var o;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));const c={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},l=o.INFO,h={[o.DEBUG]:"log",[o.VERBOSE]:"log",[o.INFO]:"info",[o.WARN]:"warn",[o.ERROR]:"error"},d=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),o=h[t];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[o](`[${r}]  ${e.name}:`,...n)};class f{constructor(e){this.name=e,this._logLevel=l,this._logHandler=d,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in o))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?c[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,o.DEBUG,...e),this._logHandler(this,o.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,o.VERBOSE,...e),this._logHandler(this,o.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,o.INFO,...e),this._logHandler(this,o.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,o.WARN,...e),this._logHandler(this,o.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,o.ERROR,...e),this._logHandler(this,o.ERROR,...e)}}function m(e){r.forEach((t=>{t.setLogLevel(e)}))}function y(e,t){for(const n of r){let r=null;t&&t.level&&(r=c[t.level]),n.userLogHandler=null===e?null:(t,n,...c)=>{const l=c.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((e=>e)).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:l,args:c,type:t.name})}}}},206:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return Xs})),n.d(t,"b",(function(){return Zs})),n.d(t,"c",(function(){return oa})),n.d(t,"d",(function(){return ca})),n.d(t,"e",(function(){return ho})),n.d(t,"f",(function(){return Wo})),n.d(t,"g",(function(){return Ko})),n.d(t,"h",(function(){return Bo})),n.d(t,"i",(function(){return ua})),n.d(t,"j",(function(){return Ho}));var r=n(11),o=n(30),c=n(20),l=n(0),h=n(21);const b="@firebase/firestore";class d{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}d.UNAUTHENTICATED=new d(null),d.GOOGLE_CREDENTIALS=new d("google-credentials-uid"),d.FIRST_PARTY=new d("first-party-uid"),d.MOCK_USER=new d("mock-user");let f="9.17.1";const m=new c.b("@firebase/firestore");function y(){return m.logLevel}function v(e,...t){if(m.logLevel<=c.a.DEBUG){const n=t.map(T);m.debug(`Firestore (${f}): ${e}`,...n)}}function w(e,...t){if(m.logLevel<=c.a.ERROR){const n=t.map(T);m.error(`Firestore (${f}): ${e}`,...n)}}function I(e,...t){if(m.logLevel<=c.a.WARN){const n=t.map(T);m.warn(`Firestore (${f}): ${e}`,...n)}}function T(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function _(e="Unexpected state"){const t=`FIRESTORE (${f}) INTERNAL ASSERTION FAILED: `+e;throw w(t),new Error(t)}function E(e,t){e||_()}function k(e,t){return e}const S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class A extends l.c{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class q{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class C{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(d.UNAUTHENTICATED)))}shutdown(){}}class N{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class R{constructor(e){this.t=e,this.currentUser=d.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const s=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new q;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new q,e.enqueueRetryable((()=>s(this.currentUser)))};const r=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await s(this.currentUser)}))},o=e=>{v("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(v("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new q)}}),0),r()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(v("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(E("string"==typeof t.accessToken),new C(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return E(null===e||"string"==typeof e),new d(e)}}class D{constructor(e,t,n,s){this.h=e,this.l=t,this.m=n,this.g=s,this.type="FirstParty",this.user=d.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(E(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class x{constructor(e,t,n,s){this.h=e,this.l=t,this.m=n,this.g=s}getToken(){return Promise.resolve(new D(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable((()=>t(d.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class L{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class P{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const n=e=>{null!=e.error&&v("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.A;return this.A=e.token,v("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const s=e=>{v("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.T.onInit((e=>s(e))),setTimeout((()=>{if(!this.appCheck){const e=this.T.getImmediate({optional:!0});e?s(e):v("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(E("string"==typeof e.token),this.A=e.token,new L(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function M(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class U{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=M(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<t&&(n+=e.charAt(s[i]%e.length))}return n}}function F(e,t){return e<t?-1:e>t?1:0}function V(e,t,n){return e.length===t.length&&e.every(((e,s)=>n(e,t[s])))}class j{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new A(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new A(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new A(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return j.fromMillis(Date.now())}static fromDate(e){return j.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new j(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?F(this.nanoseconds,e.nanoseconds):F(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class B{constructor(e){this.timestamp=e}static fromTimestamp(e){return new B(e)}static min(){return new B(new j(0,0))}static max(){return new B(new j(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class z{constructor(e,t,n){void 0===t?t=0:t>e.length&&_(),void 0===n?n=e.length-t:n>e.length-t&&_(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===z.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof z?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const n=e.get(s),i=t.get(s);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rt extends z{construct(e,t,n){return new rt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new A(S.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new rt(t)}static emptyPath(){return new rt([])}}const H=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $ extends z{construct(e,t,n){return new $(e,t,n)}static isValidIdentifier(e){return H.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $(["__name__"])}static fromServerFormat(e){const t=[];let n="",s=0;const i=()=>{if(0===n.length)throw new A(S.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let r=!1;for(;s<e.length;){const t=e[s];if("\\"===t){if(s+1===e.length)throw new A(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[s+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new A(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,s+=2}else"`"===t?(r=!r,s++):"."!==t||r?(n+=t,s++):(i(),s++)}if(i(),r)throw new A(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $(t)}static emptyPath(){return new $([])}}class K{constructor(e){this.path=e}static fromPath(e){return new K(rt.fromString(e))}static fromName(e){return new K(rt.fromString(e).popFirst(5))}static empty(){return new K(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new rt(e.slice()))}}class G{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}G.UNKNOWN_ID=-1;function W(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=B.fromTimestamp(1e9===s?new j(n+1,0):new j(n,s));return new J(i,K.empty(),t)}function Q(e){return new J(e.readTime,e.key,-1)}class J{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new J(B.min(),K.empty(),-1)}static max(){return new J(B.max(),K.empty(),-1)}}function Y(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=K.comparator(e.documentKey,t.documentKey),0!==n?n:F(e.largestBatchId,t.largestBatchId))}const X="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ee(e){if(e.code!==S.FAILED_PRECONDITION||e.message!==X)throw e;v("LocalStore","Unexpectedly lost primary lease")}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((n,s)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,s)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(e){return te.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,n)=>{t(e)}))}static reject(e){return new te(((t,n)=>{n(e)}))}static waitFor(e){return new te(((t,n)=>{let s=0,i=0,r=!1;e.forEach((e=>{++s,e.next((()=>{++i,r&&i===s&&t()}),(e=>n(e)))})),r=!0,i===s&&t()}))}static or(e){let t=te.resolve(!1);for(const n of e)t=t.next((e=>e?te.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,s)=>{n.push(t.call(this,e,s))})),this.waitFor(n)}static mapArray(e,t){return new te(((n,s)=>{const i=e.length,r=new Array(i);let o=0;for(let u=0;u<i;u++){const c=u;t(e[c]).next((e=>{r[c]=e,++o,o===i&&n(r)}),(e=>s(e)))}}))}static doWhile(e,t){return new te(((n,s)=>{const i=()=>{!0===e()?t().next((()=>{i()}),s):n()};i()}))}}function ne(e){return"IndexedDbTransactionError"===e.name}class re{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ut(e),this.ct=e=>t.writeSequenceNumber(e))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}re.at=-1;class ie{constructor(e,t,n,s,i,r,o,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.useFetchStreams=u}}class se{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new se("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof se&&e.projectId===this.projectId&&e.database===this.database}}function oe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ae(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ce(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ue(e){return null==e}function le(e){return 0===e&&1/e==-1/0}function he(e){return"number"==typeof e&&Number.isInteger(e)&&!le(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class de{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new de(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new de(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return F(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}de.EMPTY_BYTE_STRING=new de("");const fe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pe(e){if(E(!!e),"string"==typeof e){let t=0;const n=fe.exec(e);if(E(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:me(e.seconds),nanos:me(e.nanos)}}function me(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ge(e){return"string"==typeof e?de.fromBase64String(e):de.fromUint8Array(e)}function ye(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ve(e){const t=e.mapValue.fields.__previous_value__;return ye(t)?ve(t):t}function we(e){const t=pe(e.mapValue.fields.__local_write_time__.timestampValue);return new j(t.seconds,t.nanos)}const be={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ie(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ye(e)?4:Pe(e)?9007199254740991:10:_()}function Te(e,t){if(e===t)return!0;const n=Ie(e);if(n!==Ie(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return we(e).isEqual(we(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=pe(e.timestampValue),s=pe(t.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ge(e.bytesValue).isEqual(ge(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return me(e.geoPointValue.latitude)===me(t.geoPointValue.latitude)&&me(e.geoPointValue.longitude)===me(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return me(e.integerValue)===me(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=me(e.doubleValue),s=me(t.doubleValue);return n===s?le(n)===le(s):isNaN(n)&&isNaN(s)}return!1}(e,t);case 9:return V(e.arrayValue.values||[],t.arrayValue.values||[],Te);case 10:return function(e,t){const n=e.mapValue.fields||{},s=t.mapValue.fields||{};if(oe(n)!==oe(s))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===s[e]||!Te(n[e],s[e])))return!1;return!0}(e,t);default:return _()}}function _e(e,t){return void 0!==(e.values||[]).find((e=>Te(e,t)))}function Ee(e,t){if(e===t)return 0;const n=Ie(e),s=Ie(t);if(n!==s)return F(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return F(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=me(e.integerValue||e.doubleValue),s=me(t.integerValue||t.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(e,t);case 3:return ke(e.timestampValue,t.timestampValue);case 4:return ke(we(e),we(t));case 5:return F(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ge(e),s=ge(t);return n.compareTo(s)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),s=t.split("/");for(let e=0;e<n.length&&e<s.length;e++){const t=F(n[e],s[e]);if(0!==t)return t}return F(n.length,s.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=F(me(e.latitude),me(t.latitude));return 0!==n?n:F(me(e.longitude),me(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],s=t.values||[];for(let e=0;e<n.length&&e<s.length;++e){const t=Ee(n[e],s[e]);if(t)return t}return F(n.length,s.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===be.mapValue&&t===be.mapValue)return 0;if(e===be.mapValue)return 1;if(t===be.mapValue)return-1;const n=e.fields||{},s=Object.keys(n),i=t.fields||{},r=Object.keys(i);s.sort(),r.sort();for(let e=0;e<s.length&&e<r.length;++e){const t=F(s[e],r[e]);if(0!==t)return t;const o=Ee(n[s[e]],i[r[e]]);if(0!==o)return o}return F(s.length,r.length)}(e.mapValue,t.mapValue);default:throw _()}}function ke(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return F(e,t);const n=pe(e),s=pe(t),i=F(n.seconds,s.seconds);return 0!==i?i:F(n.nanos,s.nanos)}function Se(e){return Ae(e)}function Ae(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=pe(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ge(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,K.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const s of e.values||[])n?n=!1:t+=",",t+=Ae(s);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",s=!0;for(const i of t)s?s=!1:n+=",",n+=`${i}:${Ae(e.fields[i])}`;return n+"}"}(e.mapValue):_();var t,n}function Ce(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Oe(e){return!!e&&"integerValue"in e}function Ne(e){return!!e&&"arrayValue"in e}function Re(e){return!!e&&"nullValue"in e}function De(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function xe(e){return!!e&&"mapValue"in e}function Le(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ae(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Le(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Le(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Pe(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Me{constructor(e,t){this.position=e,this.inclusive=t}}function Ue(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(s=r.field.isKeyField()?K.comparator(K.fromName(o.referenceValue),n.key):Ee(o,n.data.field(r.field)),"desc"===r.dir&&(s*=-1),0!==s)break}return s}function Fe(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Te(e.position[n],t.position[n]))return!1;return!0}class Ve{}class je extends Ve{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new We(e,t,n):"array-contains"===t?new Xe(e,n):"in"===t?new Ze(e,n):"not-in"===t?new et(e,n):"array-contains-any"===t?new tt(e,n):new je(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Qe(e,n):new Je(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ee(t,this.value)):null!==t&&Ie(this.value)===Ie(t)&&this.matchesComparison(Ee(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class qe extends Ve{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new qe(e,t)}matches(e){return Be(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt((e=>e.isInequality()));return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Be(e){return"and"===e.op}function ze(e){return He(e)&&Be(e)}function He(e){for(const t of e.filters)if(t instanceof qe)return!1;return!0}function $e(e){if(e instanceof je)return e.field.canonicalString()+e.op.toString()+Se(e.value);if(ze(e))return e.filters.map((e=>$e(e))).join(",");{const t=e.filters.map((e=>$e(e))).join(",");return`${e.op}(${t})`}}function Ke(e,t){return e instanceof je?function(e,t){return t instanceof je&&e.op===t.op&&e.field.isEqual(t.field)&&Te(e.value,t.value)}(e,t):e instanceof qe?function(e,t){return t instanceof qe&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,s)=>e&&Ke(n,t.filters[s])),!0)}(e,t):void _()}function Ge(e){return e instanceof je?function(e){return`${e.field.canonicalString()} ${e.op} ${Se(e.value)}`}(e):e instanceof qe?function(e){return e.op.toString()+" {"+e.getFilters().map(Ge).join(" ,")+"}"}(e):"Filter"}class We extends je{constructor(e,t,n){super(e,t,n),this.key=K.fromName(n.referenceValue)}matches(e){const t=K.comparator(e.key,this.key);return this.matchesComparison(t)}}class Qe extends je{constructor(e,t){super(e,"in",t),this.keys=Ye("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Je extends je{constructor(e,t){super(e,"not-in",t),this.keys=Ye("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ye(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>K.fromName(e.referenceValue)))}class Xe extends je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ne(t)&&_e(t.arrayValue,this.value)}}class Ze extends je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_e(this.value.arrayValue,t)}}class et extends je{constructor(e,t){super(e,"not-in",t)}matches(e){if(_e(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_e(this.value.arrayValue,t)}}class tt extends je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ne(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>_e(this.value.arrayValue,e)))}}class nt{constructor(e,t="asc"){this.field=e,this.dir=t}}function it(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class st{constructor(e,t){this.comparator=e,this.root=t||at.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ot(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ot(this.root,e,this.comparator,!1)}getReverseIterator(){return new ot(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ot(this.root,e,this.comparator,!0)}}class ot{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,t,n,s,i){this.key=e,this.value=t,this.color=null!=n?n:at.RED,this.left=null!=s?s:at.EMPTY,this.right=null!=i?i:at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,i){return new at(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,n),null):0===i?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return at.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _();if(this.right.isRed())throw _();const e=this.left.check();if(e!==this.right.check())throw _();return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1,at.EMPTY=new class{constructor(){this.size=0}get key(){throw _()}get value(){throw _()}get color(){throw _()}get left(){throw _()}get right(){throw _()}copy(e,t,n,s,i){return this}insert(e,t,n){return new at(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ct{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ut(this.data.getIterator())}getIteratorFrom(e){return new ut(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ct))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(0!==this.comparator(e,s))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ct(this.comparator);return t.data=e,t}}class ut{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class lt{constructor(e){this.fields=e,e.sort($.comparator)}static empty(){return new lt([])}unionWith(e){let t=new ct($.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new lt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return V(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ht{constructor(e){this.value=e}static empty(){return new ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!xe(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Le(t)}setAll(e){let t=$.emptyPath(),n={},s=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,s),n={},s=[],t=i.popLast()}e?n[i.lastSegment()]=Le(e):s.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,s)}delete(e){const t=this.field(e.popLast());xe(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Te(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];xe(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){ae(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new ht(Le(this.value))}}function ft(e){const t=[];return ae(e.fields,((e,n)=>{const s=new $([e]);if(xe(n)){const e=ft(n.mapValue).fields;if(0===e.length)t.push(s);else for(const n of e)t.push(s.child(n))}else t.push(s)})),new lt(t)}class pt{constructor(e,t,n,s,i,r,o){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=i,this.data=r,this.documentState=o}static newInvalidDocument(e){return new pt(e,0,B.min(),B.min(),B.min(),ht.empty(),0)}static newFoundDocument(e,t,n,s){return new pt(e,1,t,B.min(),n,s,0)}static newNoDocument(e,t){return new pt(e,2,t,B.min(),B.min(),ht.empty(),0)}static newUnknownDocument(e,t){return new pt(e,3,t,B.min(),B.min(),ht.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(B.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=B.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mt{constructor(e,t=null,n=[],s=[],i=null,r=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=r,this.endAt=o,this.ft=null}}function gt(e,t=null,n=[],s=[],i=null,r=null,o=null){return new mt(e,t,n,s,i,r,o)}function yt(e){const t=k(e);if(null===t.ft){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>$e(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ue(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Se(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Se(e))).join(",")),t.ft=e}return t.ft}function vt(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!it(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ke(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Fe(e.startAt,t.startAt)&&Fe(e.endAt,t.endAt)}function wt(e){return K.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class bt{constructor(e,t=null,n=[],s=[],i=null,r="F",o=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=r,this.startAt=o,this.endAt=u,this.dt=null,this._t=null,this.startAt,this.endAt}}function It(e,t,n,s,i,r,o,u){return new bt(e,t,n,s,i,r,o,u)}function Tt(e){return new bt(e)}function _t(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Et(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function kt(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function St(e){return null!==e.collectionGroup}function At(e){const t=k(e);if(null===t.dt){t.dt=[];const e=kt(t),n=Et(t);if(null!==e&&null===n)e.isKeyField()||t.dt.push(new nt(e)),t.dt.push(new nt($.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.dt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new nt($.keyField(),e))}}}return t.dt}function Ct(e){const t=k(e);if(!t._t)if("F"===t.limitType)t._t=gt(t.path,t.collectionGroup,At(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of At(t)){const t="desc"===n.dir?"asc":"desc";e.push(new nt(n.field,t))}const n=t.endAt?new Me(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Me(t.startAt.position,t.startAt.inclusive):null;t._t=gt(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}return t._t}function Ot(e,t){t.getFirstInequalityField(),kt(e);const n=e.filters.concat([t]);return new bt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Nt(e,t,n){return new bt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Rt(e,t){return vt(Ct(e),Ct(t))&&e.limitType===t.limitType}function Dt(e){return`${yt(Ct(e))}|lt:${e.limitType}`}function xt(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Ge(e))).join(", ")}]`),ue(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Se(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Se(e))).join(",")),`Target(${t})`}(Ct(e))}; limitType=${e.limitType})`}function Lt(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):K.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of At(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const s=Ue(e,t,n);return e.inclusive?s<=0:s<0}(e.startAt,At(e),t))&&!(e.endAt&&!function(e,t,n){const s=Ue(e,t,n);return e.inclusive?s>=0:s>0}(e.endAt,At(e),t))}(e,t)}function Pt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Mt(e){return(t,n)=>{let s=!1;for(const i of At(e)){const e=Ut(i,t,n);if(0!==e)return e;s=s||i.field.isKeyField()}return 0}}function Ut(e,t,n){const s=e.field.isKeyField()?K.comparator(t.key,n.key):function(e,t,n){const s=t.data.field(e),i=n.data.field(e);return null!==s&&null!==i?Ee(s,i):_()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return _()}}function Ft(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:le(t)?"-0":t}}function Vt(e){return{integerValue:""+e}}function jt(e,t){return he(t)?Vt(t):Ft(e,t)}class qt{constructor(){this._=void 0}}function Bt(e,t,n){return e instanceof $t?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Kt?Gt(e,t):e instanceof Wt?Qt(e,t):function(e,t){const n=Ht(e,t),s=Yt(n)+Yt(e.gt);return Oe(n)&&Oe(e.gt)?Vt(s):Ft(e.yt,s)}(e,t)}function zt(e,t,n){return e instanceof Kt?Gt(e,t):e instanceof Wt?Qt(e,t):n}function Ht(e,t){return e instanceof Jt?Oe(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class $t extends qt{}class Kt extends qt{constructor(e){super(),this.elements=e}}function Gt(e,t){const n=Xt(t);for(const t of e.elements)n.some((e=>Te(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Wt extends qt{constructor(e){super(),this.elements=e}}function Qt(e,t){let n=Xt(t);for(const t of e.elements)n=n.filter((e=>!Te(e,t)));return{arrayValue:{values:n}}}class Jt extends qt{constructor(e,t){super(),this.yt=e,this.gt=t}}function Yt(e){return me(e.integerValue||e.doubleValue)}function Xt(e){return Ne(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Zt{constructor(e,t){this.version=e,this.transformResults=t}}class en{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tn(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class nn{}function rn(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new pn(e.key,en.none()):new un(e.key,e.data,en.none());{const n=e.data,s=ht.empty();let i=new ct($.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?s.delete(e):s.set(e,t),i=i.add(e)}return new ln(e.key,s,new lt(i.toArray()),en.none())}}function sn(e,t,n){e instanceof un?function(e,t,n){const s=e.value.clone(),i=dn(e.fieldTransforms,t,n.transformResults);s.setAll(i),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):e instanceof ln?function(e,t,n){if(!tn(e.precondition,t))return void t.convertToUnknownDocument(n.version);const s=dn(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(hn(e)),i.setAll(s),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function on(e,t,n,s){return e instanceof un?function(e,t,n,s){if(!tn(e.precondition,t))return n;const i=e.value.clone(),r=fn(e.fieldTransforms,s,t);return i.setAll(r),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,s):e instanceof ln?function(e,t,n,s){if(!tn(e.precondition,t))return n;const i=fn(e.fieldTransforms,s,t),r=t.data;return r.setAll(hn(e)),r.setAll(i),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,s):function(e,t,n){return tn(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function an(e,t){let n=null;for(const s of e.fieldTransforms){const e=t.data.field(s.field),i=Ht(s.transform,e||null);null!=i&&(null===n&&(n=ht.empty()),n.set(s.field,i))}return n||null}function cn(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&V(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Kt&&t instanceof Kt||e instanceof Wt&&t instanceof Wt?V(e.elements,t.elements,Te):e instanceof Jt&&t instanceof Jt?Te(e.gt,t.gt):e instanceof $t&&t instanceof $t}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class un extends nn{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ln extends nn{constructor(e,t,n,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function hn(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}})),t}function dn(e,t,n){const s=new Map;E(e.length===n.length);for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,u=t.data.field(r.field);s.set(r.field,zt(o,u,n[i]))}return s}function fn(e,t,n){const s=new Map;for(const i of e){const e=i.transform,r=n.data.field(i.field);s.set(i.field,Bt(e,r,t))}return s}class pn extends nn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mn extends nn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gn{constructor(e){this.count=e}}var yn,vn;function wn(e){switch(e){default:return _();case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0}}function bn(e){if(void 0===e)return w("GRPC error has no .code"),S.UNKNOWN;switch(e){case yn.OK:return S.OK;case yn.CANCELLED:return S.CANCELLED;case yn.UNKNOWN:return S.UNKNOWN;case yn.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case yn.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case yn.INTERNAL:return S.INTERNAL;case yn.UNAVAILABLE:return S.UNAVAILABLE;case yn.UNAUTHENTICATED:return S.UNAUTHENTICATED;case yn.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case yn.NOT_FOUND:return S.NOT_FOUND;case yn.ALREADY_EXISTS:return S.ALREADY_EXISTS;case yn.PERMISSION_DENIED:return S.PERMISSION_DENIED;case yn.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case yn.ABORTED:return S.ABORTED;case yn.OUT_OF_RANGE:return S.OUT_OF_RANGE;case yn.UNIMPLEMENTED:return S.UNIMPLEMENTED;case yn.DATA_LOSS:return S.DATA_LOSS;default:return _()}}(vn=yn||(yn={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";class In{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,s]of n)if(this.equalsFn(t,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0===s)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<s.length;n++)if(this.equalsFn(s[n][0],e))return void(s[n]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return 1===n.length?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ae(this.inner,((t,n)=>{for(const[t,s]of n)e(t,s)}))}isEmpty(){return ce(this.inner)}size(){return this.innerSize}}const Tn=new st(K.comparator);function _n(){return Tn}const En=new st(K.comparator);function kn(...e){let t=En;for(const n of e)t=t.insert(n.key,n);return t}function Sn(e){let t=En;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function An(){return On()}function Cn(){return On()}function On(){return new In((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Nn=new st(K.comparator),Rn=new ct(K.comparator);function Dn(...e){let t=Rn;for(const n of e)t=t.add(n);return t}const xn=new ct(F);function Ln(){return xn}class Pn{constructor(e,t,n,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Mn.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Pn(B.min(),s,Ln(),_n(),Dn())}}class Mn{constructor(e,t,n,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Mn(n,t,Dn(),Dn(),Dn())}}class Un{constructor(e,t,n,s){this.It=e,this.removedTargetIds=t,this.key=n,this.Tt=s}}class Fn{constructor(e,t){this.targetId=e,this.Et=t}}class Vn{constructor(e,t,n=de.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class jn{constructor(){this.At=0,this.Rt=zn(),this.bt=de.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Dn(),t=Dn(),n=Dn();return this.Rt.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:_()}})),new Mn(this.bt,this.Pt,e,t,n)}xt(){this.vt=!1,this.Rt=zn()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class qn{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=_n(),this.qt=Bn(),this.Ut=new ct(F)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,(t=>{const n=this.Wt(t);switch(e.state){case 0:this.zt(t)&&n.Dt(e.resumeToken);break;case 1:n.Mt(),n.Vt||n.xt(),n.Dt(e.resumeToken);break;case 2:n.Mt(),n.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(n.Ft(),n.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),n.Dt(e.resumeToken));break;default:_()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach(((e,n)=>{this.zt(n)&&t(n)}))}Jt(e){const t=e.targetId,n=e.Et.count,s=this.Yt(t);if(s){const e=s.target;if(wt(e))if(0===n){const n=new K(e.path);this.Qt(t,n,pt.newNoDocument(n,B.min()))}else E(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach(((n,s)=>{const i=this.Yt(s);if(i){if(n.current&&wt(i.target)){const t=new K(i.target.path);null!==this.Lt.get(t)||this.te(s,t)||this.Qt(s,t,pt.newNoDocument(t,e))}n.St&&(t.set(s,n.Ct()),n.xt())}}));let n=Dn();this.qt.forEach(((e,t)=>{let s=!0;t.forEachWhile((e=>{const t=this.Yt(e);return!t||2===t.purpose||(s=!1,!1)})),s&&(n=n.add(e))})),this.Lt.forEach(((t,n)=>n.setReadTime(e)));const s=new Pn(e,t,this.Ut,this.Lt,n);return this.Lt=_n(),this.qt=Bn(),this.Ut=new ct(F),s}Gt(e,t){if(!this.zt(e))return;const n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,n){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,t)?s.Nt(t,1):s.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new jn,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new ct(F),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||v("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new jn),this.$t.getRemoteKeysForTarget(e).forEach((t=>{this.Qt(e,t,null)}))}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Bn(){return new st(K.comparator)}function zn(){return new st(K.comparator)}const Hn={asc:"ASCENDING",desc:"DESCENDING"},$n={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kn={and:"AND",or:"OR"};class Gn{constructor(e,t){this.databaseId=e,this.wt=t}}function Wn(e,t){return e.wt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qn(e,t){return e.wt?t.toBase64():t.toUint8Array()}function Jn(e,t){return Wn(e,t.toTimestamp())}function Yn(e){return E(!!e),B.fromTimestamp(function(e){const t=pe(e);return new j(t.seconds,t.nanos)}(e))}function Xn(e,t){return function(e){return new rt(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Zn(e){const t=rt.fromString(e);return E(Ir(t)),t}function er(e,t){return Xn(e.databaseId,t.path)}function nr(e,t){const n=Zn(t);if(n.get(1)!==e.databaseId.projectId)throw new A(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new A(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new K(or(n))}function rr(e,t){return Xn(e.databaseId,t)}function ir(e){const t=Zn(e);return 4===t.length?rt.emptyPath():or(t)}function sr(e){return new rt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function or(e){return E(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ar(e,t,n){return{name:er(e,t),fields:n.value.mapValue.fields}}function cr(e,t){let n;if(t instanceof un)n={update:ar(e,t.key,t.value)};else if(t instanceof pn)n={delete:er(e,t.key)};else if(t instanceof ln)n={update:ar(e,t.key,t.data),updateMask:wr(t.fieldMask)};else{if(!(t instanceof mn))return _();n={verify:er(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof $t)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Kt)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Wt)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Jt)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw _()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Jn(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:_()}(e,t.precondition)),n}function ur(e,t){return{documents:[rr(e,t.path)]}}function lr(e,t){const n={structuredQuery:{}},s=t.path;null!==t.collectionGroup?(n.parent=rr(e,s),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=rr(e,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const i=function(e){if(0!==e.length)return vr(qe.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const r=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:li(e.field),direction:pr(e.dir)}}(e)))}(t.orderBy);r&&(n.structuredQuery.orderBy=r);const o=function(e,t){return e.wt||ue(t)?t:{value:t}}(e,t.limit);var u;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(u=t.startAt).inclusive,values:u.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function dr(e){let t=ir(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){E(1===s);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let r=[];n.where&&(r=function(e){const t=fr(e);return t instanceof qe&&ze(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new nt(yr(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let u=null;n.limit&&(u=function(e){let t;return t="object"==typeof e?e.value:e,ue(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new Me(n,t)}(n.startAt));let a=null;return n.endAt&&(a=function(e){const t=!e.before,n=e.values||[];return new Me(n,t)}(n.endAt)),It(t,i,o,r,u,"F",c,a)}function fr(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=yr(e.unaryFilter.field);return je.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=yr(e.unaryFilter.field);return je.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=yr(e.unaryFilter.field);return je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=yr(e.unaryFilter.field);return je.create(i,"!=",{nullValue:"NULL_VALUE"});default:return _()}}(e):void 0!==e.fieldFilter?function(e){return je.create(yr(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return qe.create(e.compositeFilter.filters.map((e=>fr(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return _()}}(e.compositeFilter.op))}(e):_()}function pr(e){return Hn[e]}function mr(e){return $n[e]}function gr(e){return Kn[e]}function li(e){return{fieldPath:e.canonicalString()}}function yr(e){return $.fromServerFormat(e.fieldPath)}function vr(e){return e instanceof je?function(e){if("=="===e.op){if(De(e.value))return{unaryFilter:{field:li(e.field),op:"IS_NAN"}};if(Re(e.value))return{unaryFilter:{field:li(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(De(e.value))return{unaryFilter:{field:li(e.field),op:"IS_NOT_NAN"}};if(Re(e.value))return{unaryFilter:{field:li(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:li(e.field),op:mr(e.op),value:e.value}}}(e):e instanceof qe?function(e){const t=e.getFilters().map((e=>vr(e)));return 1===t.length?t[0]:{compositeFilter:{op:gr(e.op),filters:t}}}(e):_()}function wr(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ir(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}const Tr=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_r=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Er=_r;class kr{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const s=this.mutations[t];s.key.isEqual(e.key)&&sn(s,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=on(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=on(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Cn();return this.mutations.forEach((s=>{const i=e.get(s.key),r=i.overlayedDocument;let o=this.applyToLocalView(r,i.mutatedFields);o=t.has(s.key)?null:o;const u=rn(r,o);null!==u&&n.set(s.key,u),r.isValidDocument()||r.convertToNoDocument(B.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Dn())}isEqual(e){return this.batchId===e.batchId&&V(this.mutations,e.mutations,((e,t)=>cn(e,t)))&&V(this.baseMutations,e.baseMutations,((e,t)=>cn(e,t)))}}class Sr{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){E(e.mutations.length===n.length);let s=Nn;const i=e.mutations;for(let e=0;e<i.length;e++)s=s.insert(i[e].key,n[e].version);return new Sr(e,t,n,s)}}class Ar{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Cr{constructor(e,t,n,s,i=B.min(),r=B.min(),o=de.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Or{constructor(e){this.ie=e}}function Nr(e){const t=dr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Nt(t,t.limit,"L"):t}class Rr{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(me(e.integerValue));else if("doubleValue"in e){const n=me(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),le(n)?t.le(0):t.le(n))}else if("timestampValue"in e){const n=e.timestampValue;this.he(t,20),"string"==typeof n?t.fe(n):(t.fe(`${n.seconds||""}`),t.le(n.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(ge(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.he(t,45),t.le(n.latitude||0),t.le(n.longitude||0)}else"mapValue"in e?Pe(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):_()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const n=e.fields||{};this.he(t,55);for(const e of Object.keys(n))this.de(e,t),this.ce(n[e],t)}ye(e,t){const n=e.values||[];this.he(t,50);for(const e of n)this.ce(e,t)}me(e,t){this.he(t,37),K.fromName(e).path.forEach((e=>{this.he(t,60),this.pe(e,t)}))}he(e,t){e.le(t)}_e(e){e.le(2)}}Rr.Ie=new Rr;class Dr{constructor(){this.Je=new xr}addToCollectionParentIndex(e,t){return this.Je.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(J.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(J.min())}updateCollectionGroup(e,t,n){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class xr{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new ct(rt.comparator),i=!s.has(n);return this.index[t]=s.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new ct(rt.comparator)).toArray()}}new Uint8Array(0);class Lr{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Lr(e,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Lr.DEFAULT_COLLECTION_PERCENTILE=10,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lr.DEFAULT=new Lr(41943040,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lr.DISABLED=new Lr(-1,0,0);class Pr{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Pr(0)}static vn(){return new Pr(-1)}}class Mr{constructor(){this.changes=new In((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?te.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ur{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Fr{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&on(n.mutation,e,lt.empty(),j.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Dn()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Dn()){const s=An();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((e=>{let t=kn();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=An();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Dn())))}populateOverlays(e,t,n){const s=[];return n.forEach((e=>{t.has(e)||s.push(e)})),this.documentOverlayCache.getOverlays(e,s).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,s){let i=_n();const r=On(),o=On();return t.forEach(((e,t)=>{const o=n.get(t.key);s.has(t.key)&&(void 0===o||o.mutation instanceof ln)?i=i.insert(t.key,t):void 0!==o?(r.set(t.key,o.mutation.getFieldMask()),on(o.mutation,t,o.mutation.getFieldMask(),j.now())):r.set(t.key,lt.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>r.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Ur(t,null!==(n=r.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=On();let s=new st(((e,t)=>e-t)),i=Dn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const r=t.get(e);if(null===r)return;let o=n.get(e)||lt.empty();o=i.applyToLocalView(r,o),n.set(e,o);const u=(s.get(i.batchId)||Dn()).add(e);s=s.insert(i.batchId,u)}))})).next((()=>{const r=[],o=s.getReverseIterator();for(;o.hasNext();){const s=o.getNext(),u=s.key,c=s.value,a=Cn();c.forEach((e=>{if(!i.has(e)){const s=rn(t.get(e),n.get(e));null!==s&&a.set(e,s),i=i.add(e)}})),r.push(this.documentOverlayCache.saveOverlays(e,u,a))}return te.waitFor(r)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return K.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):St(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((i=>{const r=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-i.size):te.resolve(An());let o=-1,u=i;return r.next((t=>te.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?te.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{u=u.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,u,t,Dn()))).next((e=>({batchId:o,changes:Sn(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new K(t)).next((e=>{let t=kn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const s=t.collectionGroup;let i=kn();return this.indexManager.getCollectionParents(e,s).next((r=>te.forEach(r,(r=>{const o=function(e,t){return new bt(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,r.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s)))).next((e=>{s.forEach(((t,n)=>{const s=n.getKey();null===e.get(s)&&(e=e.insert(s,pt.newInvalidDocument(s)))}));let n=kn();return e.forEach(((e,i)=>{const r=s.get(e);void 0!==r&&on(r.mutation,i,lt.empty(),j.now()),Lt(t,i)&&(n=n.insert(e,i))})),n}))}}class Vr{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return te.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Yn(n.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Nr(e.bundledQuery),readTime:Yn(e.readTime)}}(t)),te.resolve()}}class jr{constructor(){this.overlays=new st(K.comparator),this.es=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const n=An();return te.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,s)=>{this.oe(e,t,s)})),te.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.es.get(n);return void 0!==s&&(s.forEach((e=>this.overlays=this.overlays.remove(e))),this.es.delete(n)),te.resolve()}getOverlaysForCollection(e,t,n){const s=An(),i=t.length+1,r=new K(t.child("")),o=this.overlays.getIteratorFrom(r);for(;o.hasNext();){const e=o.getNext().value,r=e.getKey();if(!t.isPrefixOf(r.path))break;r.path.length===i&&e.largestBatchId>n&&s.set(e.getKey(),e)}return te.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let i=new st(((e,t)=>e-t));const r=this.overlays.getIterator();for(;r.hasNext();){const e=r.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=An(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=An(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=s)););return te.resolve(o)}oe(e,t,n){const s=this.overlays.get(n.key);if(null!==s){const e=this.es.get(s.largestBatchId).delete(n.key);this.es.set(s.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ar(t,n));let i=this.es.get(t);void 0===i&&(i=Dn(),this.es.set(t,i)),this.es.set(t,i.add(n.key))}}class qr{constructor(){this.ns=new ct(Br.ss),this.rs=new ct(Br.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const n=new Br(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}us(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.cs(new Br(e,t))}hs(e,t){e.forEach((e=>this.removeReference(e,t)))}ls(e){const t=new K(new rt([])),n=new Br(t,e),s=new Br(t,e+1),i=[];return this.rs.forEachInRange([n,s],(e=>{this.cs(e),i.push(e.key)})),i}fs(){this.ns.forEach((e=>this.cs(e)))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new K(new rt([])),n=new Br(t,e),s=new Br(t,e+1);let i=Dn();return this.rs.forEachInRange([n,s],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Br(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Br{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return K.comparator(e.key,t.key)||F(e._s,t._s)}static os(e,t){return F(e._s,t._s)||K.comparator(e.key,t.key)}}class zr{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ct(Br.ss)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,s){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new kr(i,t,n,s);this.mutationQueue.push(r);for(const t of s)this.gs=this.gs.add(new Br(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return te.resolve(r)}lookupMutationBatch(e,t){return te.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ps(n),i=s<0?0:s;return te.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Br(t,0),s=new Br(t,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([n,s],(e=>{const t=this.ys(e._s);i.push(t)})),te.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ct(F);return t.forEach((e=>{const t=new Br(e,0),s=new Br(e,Number.POSITIVE_INFINITY);this.gs.forEachInRange([t,s],(e=>{n=n.add(e._s)}))})),te.resolve(this.Is(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let i=n;K.isDocumentKey(i)||(i=i.child(""));const r=new Br(new K(i),0);let o=new ct(F);return this.gs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===s&&(o=o.add(e._s)),!0)}),r),te.resolve(this.Is(o))}Is(e){const t=[];return e.forEach((e=>{const n=this.ys(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){E(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let n=this.gs;return te.forEach(t.mutations,(s=>{const i=new Br(s.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.gs=n}))}An(e){}containsKey(e,t){const n=new Br(t,0),s=this.gs.firstAfterOrEqual(n);return te.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Hr{constructor(e){this.Es=e,this.docs=new st(K.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),i=s?s.size:0,r=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:r}),this.size+=r-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return te.resolve(n?n.document.mutableCopy():pt.newInvalidDocument(t))}getEntries(e,t){let n=_n();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():pt.newInvalidDocument(e))})),te.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let i=_n();const r=t.path,o=new K(r.child("")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:e,value:{document:o}}=u.getNext();if(!r.isPrefixOf(e.path))break;e.path.length>r.length+1||Y(Q(o),n)<=0||(s.has(o.key)||Lt(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return te.resolve(i)}getAllFromCollectionGroup(e,t,n,s){_()}As(e,t){return te.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new $r(this)}getSize(e){return te.resolve(this.size)}}class $r extends Mr{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(n)})),te.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Kr{constructor(e){this.persistence=e,this.Rs=new In((e=>yt(e)),vt),this.lastRemoteSnapshotVersion=B.min(),this.highestTargetId=0,this.bs=0,this.Ps=new qr,this.targetCount=0,this.vs=Pr.Pn()}forEachTarget(e,t){return this.Rs.forEach(((e,n)=>t(n))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),te.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Pr(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Dn(t),te.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,n){let s=0;const i=[];return this.Rs.forEach(((r,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Rs.delete(r),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)})),te.waitFor(i).next((()=>s))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const n=this.Rs.get(t)||null;return te.resolve(n)}addMatchingKeys(e,t,n){return this.Ps.us(t,n),te.resolve()}removeMatchingKeys(e,t,n){this.Ps.hs(t,n);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((t=>{i.push(s.markPotentiallyOrphaned(e,t))})),te.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),te.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ps.ds(t);return te.resolve(n)}containsKey(e,t){return te.resolve(this.Ps.containsKey(t))}}class Gr{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new re(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Kr(this),this.indexManager=new Dr,this.remoteDocumentCache=function(e){return new Hr(e)}((e=>this.referenceDelegate.xs(e))),this.yt=new Or(t),this.Ns=new Vr(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jr,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Vs[e.toKey()];return n||(n=new zr(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,n){v("MemoryPersistence","Starting transaction:",e);const s=new Wr(this.Ss.next());return this.referenceDelegate.ks(),n(s).next((e=>this.referenceDelegate.Os(s).next((()=>e)))).toPromise().then((e=>(s.raiseOnCommittedEvent(),e)))}Ms(e,t){return te.or(Object.values(this.Vs).map((n=>()=>n.containsKey(e,t))))}}class Wr extends Z{constructor(e){super(),this.currentSequenceNumber=e}}class Qr{constructor(e){this.persistence=e,this.Fs=new qr,this.$s=null}static Bs(e){return new Qr(e)}get Ls(){if(this.$s)return this.$s;throw _()}addReference(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),te.resolve()}removeReference(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),te.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach((e=>this.Ls.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ls.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Ls,(n=>{const s=K.fromPath(n);return this.qs(e,s).next((e=>{e||t.removeEntry(s,B.min())}))})).next((()=>(this.$s=null,t.apply(e))))}updateLimboDocument(e,t){return this.qs(e,t).next((e=>{e?this.Ls.delete(t.toString()):this.Ls.add(t.toString())}))}xs(e){return 0}qs(e,t){return te.or([()=>te.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Jr{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Si=n,this.Di=s}static Ci(e,t){let n=Dn(),s=Dn();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:s=s.add(e.doc.key)}return new Jr(e,t.fromCache,n,s)}}class Yr{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,n,s){return this.ki(e,t).next((i=>i||this.Oi(e,t,s,n))).next((n=>n||this.Mi(e,t)))}ki(e,t){if(_t(t))return te.resolve(null);let n=Ct(t);return this.indexManager.getIndexType(e,n).next((s=>0===s?null:(null!==t.limit&&1===s&&(t=Nt(t,null,"F"),n=Ct(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const i=Dn(...s);return this.Ni.getDocuments(e,i).next((s=>this.indexManager.getMinOffset(e,n).next((n=>{const r=this.Fi(t,s);return this.$i(t,r,i,n.readTime)?this.ki(e,Nt(t,null,"F")):this.Bi(e,r,t,n)}))))})))))}Oi(e,t,n,s){return _t(t)||s.isEqual(B.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((i=>{const r=this.Fi(t,i);return this.$i(t,r,n,s)?this.Mi(e,t):(y()<=c.a.DEBUG&&v("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xt(t)),this.Bi(e,r,t,W(s,-1)))}))}Fi(e,t){let n=new ct(Mt(e));return t.forEach(((t,s)=>{Lt(e,s)&&(n=n.add(s))})),n}$i(e,t,n,s){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Mi(e,t){return y()<=c.a.DEBUG&&v("QueryEngine","Using full collection scan to execute query:",xt(t)),this.Ni.getDocumentsMatchingQuery(e,t,J.min())}Bi(e,t,n,s){return this.Ni.getDocumentsMatchingQuery(e,n,s).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Xr{constructor(e,t,n,s){this.persistence=e,this.Li=t,this.yt=s,this.qi=new st(F),this.Ui=new In((e=>yt(e)),vt),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(n)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fr(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.qi)))}}function Zr(e,t,n,s){return new Xr(e,t,n,s)}async function ei(e,t){const n=k(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let s;return n.mutationQueue.getAllMutationBatches(e).next((i=>(s=i,n.Qi(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],r=[];let o=Dn();for(const e of s){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({ji:e,removedBatchIds:i,addedBatchIds:r})))}))}))}function ti(e){const t=k(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Cs.getLastRemoteSnapshotVersion(e)))}function ni(e,t,n){let s=Dn(),i=Dn();return n.forEach((e=>s=s.add(e))),t.getEntries(e,s).next((e=>{let s=_n();return n.forEach(((n,r)=>{const o=e.get(n);r.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),r.isNoDocument()&&r.version.isEqual(B.min())?(t.removeEntry(n,r.readTime),s=s.insert(n,r)):!o.isValidDocument()||r.version.compareTo(o.version)>0||0===r.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(r),s=s.insert(n,r)):v("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",r.version)})),{Wi:s,zi:i}}))}function ri(e,t){const n=k(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function ii(e,t){const n=k(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let s;return n.Cs.getTargetData(e,t).next((i=>i?(s=i,te.resolve(s)):n.Cs.allocateTargetId(e).next((i=>(s=new Cr(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,s).next((()=>s)))))))})).then((e=>{const s=n.qi.get(e.targetId);return(null===s||e.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}async function si(e,t,n){const s=k(e),i=s.qi.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(e=>s.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ne(e))throw e;v("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}s.qi=s.qi.remove(t),s.Ui.delete(i.target)}function oi(e,t,n){const s=k(e);let i=B.min(),r=Dn();return s.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const s=k(e),i=s.Ui.get(n);return void 0!==i?te.resolve(s.qi.get(i)):s.Cs.getTargetData(t,n)}(s,e,Ct(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{r=e}))})).next((()=>s.Li.getDocumentsMatchingQuery(e,t,n?i:B.min(),n?r:Dn()))).next((e=>(ai(s,Pt(t),e),{documents:e,Hi:r})))))}function ai(e,t,n){let s=e.Ki.get(t)||B.min();n.forEach(((e,t)=>{t.readTime.compareTo(s)>0&&(s=t.readTime)})),e.Ki.set(t,s)}class ci{constructor(){this.activeTargetIds=Ln()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ui{constructor(){this.Lr=new ci,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,n){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new ci,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hi{Ur(e){}shutdown(){}}class di{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){v("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){v("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const fi={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pi{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class mi extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.oo=t+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,n,s,i){const r=this.ho(e,t);v("RestConnection","Sending: ",r,n);const o={};return this.lo(o,s,i),this.fo(e,r,o,n).then((e=>(v("RestConnection","Received: ",e),e)),(t=>{throw I("RestConnection",`${e} failed with error: `,t,"url: ",r,"request:",n),t}))}_o(e,t,n,s,i,r){return this.ao(e,t,n,s,i)}lo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+f,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}ho(e,t){const n=fi[e];return`${this.oo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,n,s){return new Promise(((i,r)=>{const o=new h.g;o.setWithCredentials(!0),o.listenOnce(h.c.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case h.a.NO_ERROR:const t=o.getResponseJson();v("Connection","XHR received:",JSON.stringify(t)),i(t);break;case h.a.TIMEOUT:v("Connection",'RPC "'+e+'" timed out'),r(new A(S.DEADLINE_EXCEEDED,"Request time out"));break;case h.a.HTTP_ERROR:const n=o.getStatus();if(v("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(t)>=0?t:S.UNKNOWN}(t.status);r(new A(e,t.message))}else r(new A(S.UNKNOWN,"Server responded with status "+o.getStatus()))}else r(new A(S.UNAVAILABLE,"Connection failed."));break;default:_()}}finally{v("Connection",'RPC "'+e+'" completed.')}}));const u=JSON.stringify(s);o.send(t,"POST",u,n,15)}))}wo(e,t,n){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Object(h.h)(),r=Object(h.i)(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new h.d({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const u=s.join("");v("Connection","Creating WebChannel: "+u,o);const c=i.createWebChannel(u,o);let a=!1,l=!1;const d=new pi({Hr:e=>{l?v("Connection","Not sending because WebChannel is closed:",e):(a||(v("Connection","Opening WebChannel transport."),c.open(),a=!0),v("Connection","WebChannel sending:",e),c.send(e))},Jr:()=>c.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(c,h.f.EventType.OPEN,(()=>{l||v("Connection","WebChannel transport opened.")})),f(c,h.f.EventType.CLOSE,(()=>{l||(l=!0,v("Connection","WebChannel transport closed"),d.io())})),f(c,h.f.EventType.ERROR,(e=>{l||(l=!0,I("Connection","WebChannel transport errored:",e),d.io(new A(S.UNAVAILABLE,"The operation could not be completed")))})),f(c,h.f.EventType.MESSAGE,(e=>{var t;if(!l){const n=e.data[0];E(!!n);const s=n,i=s.error||(null===(t=s[0])||void 0===t?void 0:t.error);if(i){v("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=yn[e];if(void 0!==t)return bn(t)}(e),n=i.message;void 0===t&&(t=S.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),l=!0,d.io(new A(t,n)),c.close()}else v("Connection","WebChannel received:",n),d.ro(n)}})),f(r,h.b.STAT_EVENT,(e=>{e.stat===h.e.PROXY?v("Connection","Detected buffering proxy"):e.stat===h.e.NOPROXY&&v("Connection","Detected no buffering proxy")})),setTimeout((()=>{d.so()}),0),d}}function gi(){return"undefined"!=typeof document?document:null}function yi(e){return new Gn(e,!0)}class vi{constructor(e,t,n=1e3,s=1.5,i=6e4){this.Hs=e,this.timerId=t,this.mo=n,this.yo=s,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-n);s>0&&v("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,(()=>(this.Eo=Date.now(),e()))),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class wi{constructor(e,t,n,s,i,r,o,u){this.Hs=e,this.vo=n,this.Vo=s,this.connection=i,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new vi(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(()=>this.$o())))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,t){this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==e?this.xo.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(w(t.toString()),w("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):t&&t.code===S.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(t)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.So===t&&this.Go(e,n)}),(t=>{e((()=>{const e=new A(S.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Qo(e)}))}))}Go(e,t){const n=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((()=>{n((()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,(()=>(this.ko()&&(this.state=3),Promise.resolve()))),this.listener.Yr())))})),this.stream.Zr((e=>{n((()=>this.Qo(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Oo(){this.state=5,this.xo.Ro((async()=>{this.state=0,this.start()}))}Qo(e){return v("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget((()=>this.So===e?t():(v("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bi extends wi{constructor(e,t,n,s,i,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,r),this.yt=i}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:_()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=function(e,t){return e.wt?(E(void 0===t||"string"==typeof t),de.fromBase64String(t||"")):(E(void 0===t||t instanceof Uint8Array),de.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){const t=void 0===e.code?S.UNKNOWN:bn(e.code);return new A(t,e.message||"")}(o);n=new Vn(s,i,r,u||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=nr(e,s.document.name),r=Yn(s.document.updateTime),o=s.document.createTime?Yn(s.document.createTime):B.min(),u=new ht({mapValue:{fields:s.document.fields}}),c=pt.newFoundDocument(i,r,o,u),a=s.targetIds||[],l=s.removedTargetIds||[];n=new Un(a,l,c.key,c)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=nr(e,s.document),r=s.readTime?Yn(s.readTime):B.min(),o=pt.newNoDocument(i,r),u=s.removedTargetIds||[];n=new Un([],u,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=nr(e,s.document),r=s.removedTargetIds||[];n=new Un([],r,i,null)}else{if(!("filter"in t))return _();{t.filter;const e=t.filter;e.targetId;const s=e.count||0,i=new gn(s),r=e.targetId;n=new Fn(r,i)}}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return B.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?B.min():t.readTime?Yn(t.readTime):B.min()}(e);return this.listener.Wo(t,n)}zo(e){const t={};t.database=sr(this.yt),t.addTarget=function(e,t){let n;const s=t.target;return n=wt(s)?{documents:ur(e,s)}:{query:lr(e,s)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Qn(e,t.resumeToken):t.snapshotVersion.compareTo(B.min())>0&&(n.readTime=Wn(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}Ho(e){const t={};t.database=sr(this.yt),t.removeTarget=e,this.Bo(t)}}class Ii extends wi{constructor(e,t,n,s,i,r){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,r),this.yt=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(E(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function(e,t){return e&&e.length>0?(E(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Yn(e.updateTime):Yn(t);return n.isEqual(B.min())&&(n=Yn(t)),new Zt(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Yn(e.commitTime);return this.listener.Zo(n,t)}return E(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=sr(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>cr(this.yt,e)))};this.Bo(t)}}class Ti extends class{}{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.yt=s,this.nu=!1}su(){if(this.nu)throw new A(S.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,i])=>this.connection.ao(e,t,n,s,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new A(S.UNKNOWN,e.toString())}))}_o(e,t,n,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,r])=>this.connection._o(e,t,n,i,r,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new A(S.UNKNOWN,e.toString())}))}terminate(){this.nu=!0}}class _i{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve()))))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(w(t),this.ou=!1):v("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Ei{constructor(e,t,n,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.Ur((e=>{n.enqueueAndForget((async()=>{xi(this)&&(v("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=k(e);t._u.add(4),await Si(t),t.gu.set("Unknown"),t._u.delete(4),await ki(t)}(this))}))})),this.gu=new _i(n,s)}}async function ki(e){if(xi(e))for(const t of e.wu)await t(!0)}async function Si(e){for(const t of e.wu)await t(!1)}function Ai(e,t){const n=k(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),Di(n)?Ri(n):Yi(n).ko()&&Oi(n,t))}function Ci(e,t){const n=k(e),s=Yi(n);n.du.delete(t),s.ko()&&Ni(n,t),0===n.du.size&&(s.ko()?s.Fo():xi(n)&&n.gu.set("Unknown"))}function Oi(e,t){e.yu.Ot(t.targetId),Yi(e).zo(t)}function Ni(e,t){e.yu.Ot(t),Yi(e).Ho(t)}function Ri(e){e.yu=new qn({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ne:t=>e.du.get(t)||null}),Yi(e).start(),e.gu.uu()}function Di(e){return xi(e)&&!Yi(e).No()&&e.du.size>0}function xi(e){return 0===k(e)._u.size}function Li(e){e.yu=void 0}async function Pi(e){e.du.forEach(((t,n)=>{Oi(e,t)}))}async function Mi(e,t){Li(e),Di(e)?(e.gu.hu(t),Ri(e)):e.gu.set("Unknown")}async function Ui(e,t,n){if(e.gu.set("Online"),t instanceof Vn&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const s of t.targetIds)e.du.has(s)&&(await e.remoteSyncer.rejectListen(s,n),e.du.delete(s),e.yu.removeTarget(s))}(e,t)}catch(n){v("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Fi(e,n)}else if(t instanceof Un?e.yu.Kt(t):t instanceof Fn?e.yu.Jt(t):e.yu.jt(t),!n.isEqual(B.min()))try{const t=await ti(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.yu.Zt(t);return n.targetChanges.forEach(((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.du.get(s);i&&e.du.set(s,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.du.get(t);if(!n)return;e.du.set(t,n.withResumeToken(de.EMPTY_BYTE_STRING,n.snapshotVersion)),Ni(e,t);const s=new Cr(n.target,t,1,n.sequenceNumber);Oi(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){v("RemoteStore","Failed to raise snapshot:",t),await Fi(e,t)}}async function Fi(e,t,n){if(!ne(t))throw t;e._u.add(1),await Si(e),e.gu.set("Offline"),n||(n=()=>ti(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{v("RemoteStore","Retrying IndexedDB access"),await n(),e._u.delete(1),await ki(e)}))}function Vi(e,t){return t().catch((n=>Fi(e,n,t)))}async function ji(e){const t=k(e),n=Xi(t);let s=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;qi(t);)try{const e=await ri(t.localStore,s);if(null===e){0===t.fu.length&&n.Fo();break}s=e.batchId,Bi(t,e)}catch(e){await Fi(t,e)}zi(t)&&Hi(t)}function qi(e){return xi(e)&&e.fu.length<10}function Bi(e,t){e.fu.push(t);const n=Xi(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function zi(e){return xi(e)&&!Xi(e).No()&&e.fu.length>0}function Hi(e){Xi(e).start()}async function $i(e){Xi(e).eu()}async function Ki(e){const t=Xi(e);for(const n of e.fu)t.Xo(n.mutations)}async function Gi(e,t,n){const s=e.fu.shift(),i=Sr.from(s,t,n);await Vi(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ji(e)}async function Wi(e,t){t&&Xi(e).Yo&&await async function(e,t){if(wn(n=t.code)&&n!==S.ABORTED){const n=e.fu.shift();Xi(e).Mo(),await Vi(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ji(e)}var n}(e,t),zi(e)&&Hi(e)}async function Qi(e,t){const n=k(e);n.asyncQueue.verifyOperationInProgress(),v("RemoteStore","RemoteStore received new credentials");const s=xi(n);n._u.add(3),await Si(n),s&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n._u.delete(3),await ki(n)}async function Ji(e,t){const n=k(e);t?(n._u.delete(2),await ki(n)):t||(n._u.add(2),await Si(n),n.gu.set("Unknown"))}function Yi(e){return e.pu||(e.pu=function(e,t,n){const s=k(e);return s.su(),new bi(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,n)}(e.datastore,e.asyncQueue,{Yr:Pi.bind(null,e),Zr:Mi.bind(null,e),Wo:Ui.bind(null,e)}),e.wu.push((async t=>{t?(e.pu.Mo(),Di(e)?Ri(e):e.gu.set("Unknown")):(await e.pu.stop(),Li(e))}))),e.pu}function Xi(e){return e.Iu||(e.Iu=function(e,t,n){const s=k(e);return s.su(),new Ii(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,n)}(e.datastore,e.asyncQueue,{Yr:$i.bind(null,e),Zr:Wi.bind(null,e),tu:Ki.bind(null,e),Zo:Gi.bind(null,e)}),e.wu.push((async t=>{t?(e.Iu.Mo(),await ji(e)):(await e.Iu.stop(),e.fu.length>0&&(v("RemoteStore",`Stopping write stream with ${e.fu.length} pending writes`),e.fu=[]))}))),e.Iu}class Zi{constructor(e,t,n,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new q,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,s,i){const r=Date.now()+n,o=new Zi(e,t,r,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new A(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function es(e,t){if(w("AsyncQueue",`${t}: ${e}`),ne(e))return new A(S.UNAVAILABLE,`${t}: ${e}`);throw e}class ts{constructor(e){this.comparator=e?(t,n)=>e(t,n)||K.comparator(t.key,n.key):(e,t)=>K.comparator(e.key,t.key),this.keyedMap=kn(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new ts(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ts))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(!e.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ts;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ns{constructor(){this.Tu=new st(K.comparator)}track(e){const t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):_():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class rs{constructor(e,t,n,s,i,r,o,u,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,s,i){const r=[];return t.forEach((e=>{r.push({type:0,doc:e})})),new rs(e,t,ts.emptySet(t),r,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rt(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class is{constructor(){this.Au=void 0,this.listeners=[]}}class ss{constructor(){this.queries=new In((e=>Dt(e)),Rt),this.onlineState="Unknown",this.Ru=new Set}}async function os(e,t){const n=k(e),s=t.query;let i=!1,r=n.queries.get(s);if(r||(i=!0,r=new is),i)try{r.Au=await n.onListen(s)}catch(e){const n=es(e,`Initialization of query '${xt(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,r),r.listeners.push(t),t.bu(n.onlineState),r.Au&&t.Pu(r.Au)&&ls(n)}async function as(e,t){const n=k(e),s=t.query;let i=!1;const r=n.queries.get(s);if(r){const e=r.listeners.indexOf(t);e>=0&&(r.listeners.splice(e,1),i=0===r.listeners.length)}if(i)return n.queries.delete(s),n.onUnlisten(s)}function cs(e,t){const n=k(e);let s=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.Pu(e)&&(s=!0);i.Au=e}}s&&ls(n)}function us(e,t,n){const s=k(e),i=s.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);s.queries.delete(t)}function ls(e){e.Ru.forEach((e=>{e.next()}))}class hs{constructor(e,t,n){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=n||{}}Pu(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new rs(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){if(e.docChanges.length>0)return!0;const t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}xu(e){e=rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class ds{constructor(e){this.key=e}}class fs{constructor(e){this.key=e}}class ps{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Dn(),this.mutatedKeys=Dn(),this.Gu=Mt(e),this.Qu=new ts(this.Gu)}get ju(){return this.qu}Wu(e,t){const n=t?t.zu:new ns,s=t?t.Qu:this.Qu;let i=t?t.mutatedKeys:this.mutatedKeys,r=s,o=!1;const u="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,c="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((e,t)=>{const a=s.get(e),l=Lt(this.query,t)?t:null,h=!!a&&this.mutatedKeys.has(a.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;a&&l?a.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Hu(a,l)||(n.track({type:2,doc:l}),f=!0,(u&&this.Gu(l,u)>0||c&&this.Gu(l,c)<0)&&(o=!0)):!a&&l?(n.track({type:0,doc:l}),f=!0):a&&!l&&(n.track({type:1,doc:a}),f=!0,(u||c)&&(o=!0)),f&&(l?(r=r.add(l),i=d?i.add(e):i.delete(e)):(r=r.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;r.size>this.query.limit;){const e="F"===this.query.limitType?r.last():r.first();r=r.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Qu:r,zu:n,$i:o,mutatedKeys:i}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _()}};return n(e)-n(t)}(e.type,t.type)||this.Gu(e.doc,t.doc))),this.Ju(n);const r=t?this.Yu():[],o=0===this.Ku.size&&this.current?1:0,u=o!==this.Uu;return this.Uu=o,0!==i.length||u?{snapshot:new rs(this.query,e.Qu,s,i,e.mutatedKeys,0===o,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:r}:{Xu:r}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ns,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach((e=>this.qu=this.qu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.qu=this.qu.delete(e))),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Dn(),this.Qu.forEach((e=>{this.Zu(e.key)&&(this.Ku=this.Ku.add(e.key))}));const t=[];return e.forEach((e=>{this.Ku.has(e)||t.push(new fs(e))})),this.Ku.forEach((n=>{e.has(n)||t.push(new ds(n))})),t}tc(e){this.qu=e.Hi,this.Ku=Dn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return rs.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class ms{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class gs{constructor(e){this.key=e,this.nc=!1}}class ys{constructor(e,t,n,s,i,r){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=r,this.sc={},this.ic=new In((e=>Dt(e)),Rt),this.rc=new Map,this.oc=new Set,this.uc=new st(K.comparator),this.cc=new Map,this.ac=new qr,this.hc={},this.lc=new Map,this.fc=Pr.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}async function vs(e,t){const n=Ms(e);let s,i;const r=n.ic.get(t);if(r)s=r.targetId,n.sharedClientState.addLocalQueryTarget(s),i=r.view.ec();else{const e=await ii(n.localStore,Ct(t));n.isPrimaryClient&&Ai(n.remoteStore,e);const r=n.sharedClientState.addLocalQueryTarget(e.targetId);s=e.targetId,i=await ws(n,t,s,"current"===r,e.resumeToken)}return i}async function ws(e,t,n,s,i){e._c=(t,n,s)=>async function(e,t,n,s){let i=t.view.Wu(n);i.$i&&(i=await oi(e.localStore,t.query,!1).then((({documents:e})=>t.view.Wu(e,i))));const r=s&&s.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,r);return Ns(e,t.targetId,o.Xu),o.snapshot}(e,t,n,s);const r=await oi(e.localStore,t,!0),o=new ps(t,r.Hi),u=o.Wu(r.documents),c=Mn.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==e.onlineState,i),a=o.applyChanges(u,e.isPrimaryClient,c);Ns(e,n,a.Xu);const l=new ms(t,n,o);return e.ic.set(t,l),e.rc.has(n)?e.rc.get(n).push(t):e.rc.set(n,[t]),a.snapshot}async function bs(e,t){const n=k(e),s=n.ic.get(t),i=n.rc.get(s.targetId);if(i.length>1)return n.rc.set(s.targetId,i.filter((e=>!Rt(e,t)))),void n.ic.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await si(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),Ci(n.remoteStore,s.targetId),Cs(n,s.targetId)})).catch(ee)):(Cs(n,s.targetId),await si(n.localStore,s.targetId,!0))}async function Is(e,t){const n=k(e);try{const e=await function(e,t){const n=k(e),s=t.snapshotVersion;let i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const r=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;const o=[];t.targetChanges.forEach(((r,u)=>{const c=i.get(u);if(!c)return;o.push(n.Cs.removeMatchingKeys(e,r.removedDocuments,u).next((()=>n.Cs.addMatchingKeys(e,r.addedDocuments,u))));let a=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?a=a.withResumeToken(de.EMPTY_BYTE_STRING,B.min()).withLastLimboFreeSnapshotVersion(B.min()):r.resumeToken.approximateByteSize()>0&&(a=a.withResumeToken(r.resumeToken,s)),i=i.insert(u,a),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,a,r)&&o.push(n.Cs.updateTargetData(e,a))}));let u=_n(),c=Dn();if(t.documentUpdates.forEach((s=>{t.resolvedLimboDocuments.has(s)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,s))})),o.push(ni(e,r,t.documentUpdates).next((e=>{u=e.Wi,c=e.zi}))),!s.isEqual(B.min())){const t=n.Cs.getLastRemoteSnapshotVersion(e).next((t=>n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,s)));o.push(t)}return te.waitFor(o).next((()=>r.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,u,c))).next((()=>u))})).then((e=>(n.qi=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const s=n.cc.get(t);s&&(E(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?s.nc=!0:e.modifiedDocuments.size>0?E(s.nc):e.removedDocuments.size>0&&(E(s.nc),s.nc=!1))})),await xs(n,e,t)}catch(e){await ee(e)}}function Ts(e,t,n){const s=k(e);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const e=[];s.ic.forEach(((n,s)=>{const i=s.view.bu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=k(e);n.onlineState=t;let s=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.bu(t)&&(s=!0)})),s&&ls(n)}(s.eventManager,t),e.length&&s.sc.Wo(e),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function _s(e,t,n){const s=k(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.cc.get(t),r=i&&i.key;if(r){let e=new st(K.comparator);e=e.insert(r,pt.newNoDocument(r,B.min()));const n=Dn().add(r),i=new Pn(B.min(),new Map,new ct(F),e,n);await Is(s,i),s.uc=s.uc.remove(r),s.cc.delete(t),Ds(s)}else await si(s.localStore,t,!1).then((()=>Cs(s,t,n))).catch(ee)}async function Es(e,t){const n=k(e),s=t.batch.batchId;try{const e=await function(e,t){const n=k(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const s=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,s){const i=n.batch,r=i.keys();let o=te.resolve();return r.forEach((e=>{o=o.next((()=>s.getEntry(t,e))).next((t=>{const r=n.docVersions.get(e);E(null!==r),t.version.compareTo(r)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),s.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Dn();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,s)))}))}(n.localStore,t);As(n,s,null),Ss(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await xs(n,e)}catch(e){await ee(e)}}async function ks(e,t,n){const s=k(e);try{const e=await function(e,t){const n=k(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let s;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(E(null!==t),s=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,s,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,s))).next((()=>n.localDocuments.getDocuments(e,s)))}))}(s.localStore,t);As(s,t,n),Ss(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await xs(s,e)}catch(n){await ee(n)}}function Ss(e,t){(e.lc.get(t)||[]).forEach((e=>{e.resolve()})),e.lc.delete(t)}function As(e,t,n){const s=k(e);let i=s.hc[s.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),s.hc[s.currentUser.toKey()]=i}}function Cs(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.rc.get(t))e.ic.delete(s),n&&e.sc.wc(s,n);e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((t=>{e.ac.containsKey(t)||Os(e,t)}))}function Os(e,t){e.oc.delete(t.path.canonicalString());const n=e.uc.get(t);null!==n&&(Ci(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),Ds(e))}function Ns(e,t,n){for(const s of n)s instanceof ds?(e.ac.addReference(s.key,t),Rs(e,s)):s instanceof fs?(v("SyncEngine","Document no longer in limbo: "+s.key),e.ac.removeReference(s.key,t),e.ac.containsKey(s.key)||Os(e,s.key)):_()}function Rs(e,t){const n=t.key,s=n.path.canonicalString();e.uc.get(n)||e.oc.has(s)||(v("SyncEngine","New document in limbo: "+n),e.oc.add(s),Ds(e))}function Ds(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){const t=e.oc.values().next().value;e.oc.delete(t);const n=new K(rt.fromString(t)),s=e.fc.next();e.cc.set(s,new gs(n)),e.uc=e.uc.insert(n,s),Ai(e.remoteStore,new Cr(Ct(Tt(n.path)),s,2,re.at))}}async function xs(e,t,n){const s=k(e),i=[],r=[],o=[];s.ic.isEmpty()||(s.ic.forEach(((e,u)=>{o.push(s._c(u,t,n).then((e=>{if((e||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(u.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Jr.Ci(u.targetId,e);r.push(t)}})))})),await Promise.all(o),s.sc.Wo(i),await async function(e,t){const n=k(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>te.forEach(t,(t=>te.forEach(t.Si,(s=>n.persistence.referenceDelegate.addReference(e,t.targetId,s))).next((()=>te.forEach(t.Di,(s=>n.persistence.referenceDelegate.removeReference(e,t.targetId,s)))))))))}catch(e){if(!ne(e))throw e;v("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.qi.get(t),s=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(s);n.qi=n.qi.insert(t,i)}}}(s.localStore,r))}async function Ls(e,t){const n=k(e);if(!n.currentUser.isEqual(t)){v("SyncEngine","User change. New user:",t.toKey());const e=await ei(n.localStore,t);n.currentUser=t,function(e,t){e.lc.forEach((e=>{e.forEach((e=>{e.reject(new A(S.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await xs(n,e.ji)}}function Ps(e,t){const n=k(e),s=n.cc.get(t);if(s&&s.nc)return Dn().add(s.key);{let e=Dn();const s=n.rc.get(t);if(!s)return e;for(const t of s){const s=n.ic.get(t);e=e.unionWith(s.view.ju)}return e}}function Ms(e){const t=k(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Is.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ps.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_s.bind(null,t),t.sc.Wo=cs.bind(null,t.eventManager),t.sc.wc=us.bind(null,t.eventManager),t}function Us(e){const t=k(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Es.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ks.bind(null,t),t}class Fs{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=yi(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Zr(this.persistence,new Yr,e.initialUser,this.yt)}yc(e){return new Gr(Qr.Bs,this.yt)}gc(e){return new ui}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Vs{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ts(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ls.bind(null,this.syncEngine),await Ji(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ss}createDatastore(e){const t=yi(e.databaseInfo.databaseId),n=(s=e.databaseInfo,new mi(s));var s;return function(e,t,n,s){return new Ti(e,t,n,s)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,s=e.asyncQueue,i=e=>Ts(this.syncEngine,e,0),r=di.C()?new di:new hi,new Ei(t,n,s,i,r);var t,n,s,i,r}createSyncEngine(e,t){return function(e,t,n,s,i,r,o){const u=new ys(e,t,n,s,i,r);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=k(e);v("RemoteStore","RemoteStore shutting down."),t._u.add(5),await Si(t),t.mu.shutdown(),t.gu.set("Unknown")}(this.remoteStore)}}function js(e,t,n){if(!n)throw new A(S.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function qs(e){if(!K.isDocumentKey(e))throw new A(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Bs(e){if(K.isDocumentKey(e))throw new A(S.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function zs(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":_()}function Hs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new A(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zs(e);throw new A(S.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function $s(e,t){if(t<=0)throw new A(S.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const Ks=new Map;class Gs{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new A(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new A(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,s){if(!0===t&&!0===s)throw new A(S.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ws{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gs({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new A(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new A(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gs(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new O;switch(e.type){case"gapi":const t=e.client;return new x(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new A(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ks.get(e);t&&(v("ComponentProvider","Removing Datastore"),Ks.delete(e),t.terminate())}(this),Promise.resolve()}}class Qs{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qs(this.firestore,e,this._key)}}class Js{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class Ys extends Js{constructor(e,t,n){super(e,t,Tt(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qs(this.firestore,null,new K(e))}withConverter(e){return new Ys(this.firestore,e,this._path)}}function Xs(e,t,...n){if(e=Object(l.p)(e),js("collection","path",t),e instanceof Ws){const s=rt.fromString(t,...n);return Bs(s),new Ys(e,null,s)}{if(!(e instanceof Qs||e instanceof Ys))throw new A(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(rt.fromString(t,...n));return Bs(s),new Ys(e.firestore,null,s)}}function Zs(e,t,...n){if(e=Object(l.p)(e),1===arguments.length&&(t=U.R()),js("doc","path",t),e instanceof Ws){const s=rt.fromString(t,...n);return qs(s),new Qs(e,null,new K(s))}{if(!(e instanceof Qs||e instanceof Ys))throw new A(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(rt.fromString(t,...n));return qs(s),new Qs(e.firestore,e instanceof Ys?e.converter:null,new K(s))}}class eo{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):w("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class to{constructor(e,t,n,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=d.UNAUTHENTICATED,this.clientId=U.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{v("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(v("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new A(S.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new q;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=es(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function no(e,t){e.asyncQueue.verifyOperationInProgress(),v("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener((async e=>{s.isEqual(e)||(await ei(t.localStore,e),s=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function ro(e,t){e.asyncQueue.verifyOperationInProgress();const n=await io(e);v("FirestoreClient","Initializing OnlineComponentProvider");const s=await e.getConfiguration();await t.initialize(n,s),e.setCredentialChangeListener((e=>Qi(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Qi(t.remoteStore,n))),e.onlineComponents=t}async function io(e){return e.offlineComponents||(v("FirestoreClient","Using default OfflineComponentProvider"),await no(e,new Fs)),e.offlineComponents}async function so(e){return e.onlineComponents||(v("FirestoreClient","Using default OnlineComponentProvider"),await ro(e,new Vs)),e.onlineComponents}function oo(e){return so(e).then((e=>e.syncEngine))}async function ao(e){const t=await so(e),n=t.eventManager;return n.onListen=vs.bind(null,t.syncEngine),n.onUnlisten=bs.bind(null,t.syncEngine),n}function co(e,t,n={}){const s=new q;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,s,i){const r=new eo({next:r=>{t.enqueueAndForget((()=>as(e,o)));const u=r.docs.has(n);!u&&r.fromCache?i.reject(new A(S.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&r.fromCache&&s&&"server"===s.source?i.reject(new A(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(r)},error:e=>i.reject(e)}),o=new hs(Tt(n.path),r,{includeMetadataChanges:!0,Nu:!0});return os(e,o)}(await ao(e),e.asyncQueue,t,n,s))),s.promise}function uo(e,t,n={}){const s=new q;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,s,i){const r=new eo({next:n=>{t.enqueueAndForget((()=>as(e,o))),n.fromCache&&"server"===s.source?i.reject(new A(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new hs(n,r,{includeMetadataChanges:!0,Nu:!0});return os(e,o)}(await ao(e),e.asyncQueue,t,n,s))),s.promise}class th{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new vi(this,"async_queue_retry"),this.Wc=()=>{const e=gi();e&&v("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const e=gi();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=gi();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise((()=>{}));const t=new q;return this.Hc((()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Lc.push(e),this.Jc())))}async Jc(){if(0!==this.Lc.length){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!ne(e))throw e;v("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro((()=>this.Jc()))}}Hc(e){const t=this.Bc.then((()=>(this.Gc=!0,e().catch((e=>{this.Kc=e,this.Gc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw w("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Gc=!1,e))))));return this.Bc=t,t}enqueueAfterDelay(e,t,n){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=Zi.createAndSchedule(this,e,t,n,(e=>this.Yc(e)));return this.Uc.push(s),s}zc(){this.Kc&&_()}verifyOperationInProgress(){}async Xc(){let e;do{e=this.Bc,await e}while(e!==this.Bc)}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then((()=>{this.Uc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()}))}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}class lo extends Ws{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new th,this._persistenceKey=(null==s?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||po(this),this._firestoreClient.terminate()}}function ho(e,t){const s="object"==typeof e?e:Object(r.getApp)(),i="string"==typeof e?e:t||"(default)",n=Object(r._getProvider)(s,"firestore").getImmediate({identifier:i});if(!n._initialized){const e=Object(l.n)("firestore");e&&function(e,t,n,s={}){var i;const r=(e=Hs(e,Ws))._getSettings();if("firestore.googleapis.com"!==r.host&&r.host!==t&&I("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},r),{host:`${t}:${n}`,ssl:!1})),s.mockUserToken){let t,n;if("string"==typeof s.mockUserToken)t=s.mockUserToken,n=d.MOCK_USER;else{t=Object(l.g)(s.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const r=s.mockUserToken.sub||s.mockUserToken.user_id;if(!r)throw new A(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new d(r)}e._authCredentials=new N(new C(t,n))}}(n,...e)}return n}function fo(e){return e._firestoreClient||po(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function po(e){var t;const n=e._freezeSettings(),s=function(e,t,n,s){return new ie(e,t,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new to(e._authCredentials,e._appCheckCredentials,e._queue,s)}class mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mo(de.fromBase64String(e))}catch(e){throw new A(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new mo(de.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class go{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new A(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yo{constructor(e){this._methodName=e}}class vo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new A(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new A(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return F(this._lat,e._lat)||F(this._long,e._long)}}const wo=/^__.*__$/;class bo{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ln(e,this.data,this.fieldMask,t,this.fieldTransforms):new un(e,this.data,t,this.fieldTransforms)}}function Io(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _()}}class To{constructor(e,t,n,s,i,r){this.settings=e,this.databaseId=t,this.yt=n,this.ignoreUndefinedProperties=s,void 0===i&&this.na(),this.fieldTransforms=i||[],this.fieldMask=r||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new To(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:n,oa:!1});return s.ua(e),s}ca(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:n,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Lo(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Io(this.sa)&&wo.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class _o{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=n||yi(e)}da(e,t,n,s=!1){return new To({sa:e,methodName:t,fa:n,path:$.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Eo(e){const t=e._freezeSettings(),n=yi(e._databaseId);return new _o(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ko(e,t,n,s,i,r={}){const o=e.da(r.merge||r.mergeFields?2:0,t,n,i);No("Data must be an object, but it was:",o,s);const u=Co(s,o);let c,a;if(r.merge)c=new lt(o.fieldMask),a=o.fieldTransforms;else if(r.mergeFields){const e=[];for(const s of r.mergeFields){const i=Ro(t,s,n);if(!o.contains(i))throw new A(S.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Po(e,i)||e.push(i)}c=new lt(e),a=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,a=o.fieldTransforms;return new bo(new ht(u),c,a)}function So(e,t,n,s=!1){return Ao(n,e.da(s?4:3,t))}function Ao(e,t){if(Oo(e=Object(l.p)(e)))return No("Unsupported field value:",t,e),Co(e,t);if(e instanceof yo)return function(e,t){if(!Io(t.sa))throw t.ha(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.ha(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){const n=[];let s=0;for(const i of e){let e=Ao(i,t.aa(s));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),s++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Object(l.p)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return jt(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=j.fromDate(e);return{timestampValue:Wn(t.yt,n)}}if(e instanceof j){const n=new j(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Wn(t.yt,n)}}if(e instanceof vo)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof mo)return{bytesValue:Qn(t.yt,e._byteString)};if(e instanceof Qs){const n=t.databaseId,s=e.firestore._databaseId;if(!s.isEqual(n))throw t.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Xn(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha(`Unsupported field value: ${zs(e)}`)}(e,t)}function Co(e,t){const n={};return ce(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ae(e,((e,s)=>{const i=Ao(s,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Oo(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof j||e instanceof vo||e instanceof mo||e instanceof Qs||e instanceof yo)}function No(e,t,n){if(!Oo(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const s=zs(n);throw"an object"===s?t.ha(e+" a custom object"):t.ha(e+" "+s)}}function Ro(e,t,n){if((t=Object(l.p)(t))instanceof go)return t._internalPath;if("string"==typeof t)return xo(e,t);throw Lo("Field path arguments must be of type string or ",e,!1,void 0,n)}const Do=new RegExp("[~\\*/\\[\\]]");function xo(e,t,n){if(t.search(Do)>=0)throw Lo(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new go(...t.split("."))._internalPath}catch(r){throw Lo(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Lo(e,t,n,s,i){const r=s&&!s.isEmpty(),o=void 0!==i;let u=`Function ${t}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new A(S.INVALID_ARGUMENT,u+e+c)}function Po(e,t){return e.some((e=>e.isEqual(t)))}class Mo{constructor(e,t,n,s,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uo(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fo("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uo extends Mo{data(){return super.data()}}function Fo(e,t){return"string"==typeof t?xo(e,t):t instanceof go?t._internalPath:t._delegate._internalPath}function Vo(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new A(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jo{}class qo extends jo{}function Bo(e,t,...n){let s=[];t instanceof jo&&s.push(t),s=s.concat(n),function(e){const t=e.filter((e=>e instanceof ol)).length,n=e.filter((e=>e instanceof zo)).length;if(t>1||t>0&&n>0)throw new A(S.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const t of s)e=t._apply(e);return e}class zo extends qo{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new zo(e,t,n)}_apply(e){const t=this._parse(e);return Yo(e._query,t),new Js(e.firestore,e.converter,Ot(e._query,t))}_parse(e){const t=Eo(e.firestore),n=function(e,t,n,s,i,r,o){let u;if(i.isKeyField()){if("array-contains"===r||"array-contains-any"===r)throw new A(S.INVALID_ARGUMENT,`Invalid Query. You can't perform '${r}' queries on documentId().`);if("in"===r||"not-in"===r){Jo(o,r);const t=[];for(const n of o)t.push(Qo(s,e,n));u={arrayValue:{values:t}}}else u=Qo(s,e,o)}else"in"!==r&&"not-in"!==r&&"array-contains-any"!==r||Jo(o,r),u=So(n,"where",o,"in"===r||"not-in"===r);return je.create(i,r,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ho(e,t,n){const s=t,i=Fo("where",e);return zo._create(i,s,n)}class ol extends jo{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ol(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:qe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const s=t.getFlattenedFilters();for(const e of s)Yo(n,e),n=Ot(n,e)}(e._query,t),new Js(e.firestore,e.converter,Ot(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class $o extends qo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $o(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new A(S.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new A(S.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const s=new nt(t,n);return function(e,t){if(null===Et(e)){const n=kt(e);null!==n&&Xo(e,n,t.field)}}(e,s),s}(e._query,this._field,this._direction);return new Js(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new bt(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Ko(e,t="asc"){const n=t,s=Fo("orderBy",e);return $o._create(s,n)}class Go extends qo{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Go(e,t,n)}_apply(e){return new Js(e.firestore,e.converter,Nt(e._query,this._limit,this._limitType))}}function Wo(e){return $s("limit",e),Go._create("limit",e,"F")}function Qo(e,t,n){if("string"==typeof(n=Object(l.p)(n))){if(""===n)throw new A(S.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!St(t)&&-1!==n.indexOf("/"))throw new A(S.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(rt.fromString(n));if(!K.isDocumentKey(s))throw new A(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ce(e,new K(s))}if(n instanceof Qs)return Ce(e,n._key);throw new A(S.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zs(n)}.`)}function Jo(e,t){if(!Array.isArray(e)||0===e.length)throw new A(S.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new A(S.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Yo(e,t){if(t.isInequality()){const n=kt(e),s=t.field;if(null!==n&&!n.isEqual(s))throw new A(S.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${s.toString()}'`);const i=Et(e);null!==i&&Xo(e,s,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new A(S.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new A(S.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function Xo(e,t,n){if(!n.isEqual(t))throw new A(S.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Zo{convertValue(e,t="none"){switch(Ie(e)){case 0:return null;case 1:return e.booleanValue;case 2:return me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ge(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _()}}convertObject(e,t){const n={};return ae(e.fields,((e,s)=>{n[e]=this.convertValue(s,t)})),n}convertGeoPoint(e){return new vo(me(e.latitude),me(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ve(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(we(e));default:return null}}convertTimestamp(e){const t=pe(e);return new j(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=rt.fromString(e);E(Ir(n));const s=new se(n.get(1),n.get(3)),i=new K(n.popFirst(5));return s.isEqual(t)||w(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function ea(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class ta{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class na extends Mo{constructor(e,t,n,s,i,r){super(e,t,n,s,r),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ra(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Fo("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class ra extends na{data(e={}){return super.data(e)}}class ia{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ta(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new ra(this._firestore,this._userDataWriter,n.key,n,new ta(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new A(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const s=new ra(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ta(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:s,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const s=new ra(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ta(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,r=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),r=n.indexOf(t.doc.key)),{type:sa(t.type),doc:s,oldIndex:i,newIndex:r}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function sa(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _()}}function oa(e){e=Hs(e,Qs);const t=Hs(e.firestore,lo);return co(fo(t),e._key).then((n=>ha(t,e,n)))}class aa extends Zo{constructor(e){super(),this.firestore=e}convertBytes(e){return new mo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qs(this.firestore,null,t)}}function ca(e){e=Hs(e,Js);const t=Hs(e.firestore,lo),n=fo(t),s=new aa(t);return Vo(e._query),uo(n,e._query).then((n=>new ia(t,s,e,n)))}function ua(e,t,n){e=Hs(e,Qs);const s=Hs(e.firestore,lo),i=ea(e.converter,t,n);return la(s,[ko(Eo(s),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,en.none())])}function la(e,t){return function(e,t){const n=new q;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const s=Us(e);try{const e=await function(e,t){const n=k(e),s=j.now(),i=t.reduce(((e,t)=>e.add(t.key)),Dn());let r,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let u=_n(),c=Dn();return n.Gi.getEntries(e,i).next((e=>{u=e,u.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,u))).next((i=>{r=i;const o=[];for(const e of t){const t=an(e,r.get(e.key).overlayedDocument);null!=t&&o.push(new ln(e.key,t,ft(t.value.mapValue),en.exists(!0)))}return n.mutationQueue.addMutationBatch(e,s,o,t)})).next((t=>{o=t;const s=t.applyToLocalDocumentSet(r,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,s)}))})).then((()=>({batchId:o.batchId,changes:Sn(r)})))}(s.localStore,t);s.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let s=e.hc[e.currentUser.toKey()];s||(s=new st(F)),s=s.insert(t,n),e.hc[e.currentUser.toKey()]=s}(s,e.batchId,n),await xs(s,e.changes),await ji(s.remoteStore)}catch(e){const t=es(e,"Failed to persist write");n.reject(t)}}(await oo(e),t,n))),n.promise}(fo(e),t)}function ha(e,t,n){const s=n.docs.get(t._key),i=new aa(e);return new na(e,i,t._key,s,new ta(n.hasPendingWrites,n.fromCache),t.converter)}!function(e,t=!0){!function(e){f=e}(r.SDK_VERSION),Object(r._registerComponent)(new o.a("firestore",((e,{instanceIdentifier:n,options:s})=>{const i=e.getProvider("app").getImmediate(),r=new lo(new R(e.getProvider("auth-internal")),new P(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new A(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new se(e.options.projectId,t)}(i,n),i);return s=Object.assign({useFetchStreams:t},s),r._setSettings(s),r}),"PUBLIC").setMultipleInstances(!0)),Object(r.registerVersion)(b,"3.8.3",e),Object(r.registerVersion)(b,"3.8.3","esm2017")}()}).call(this,n(90))},21:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return sr})),n.d(t,"b",(function(){return ar})),n.d(t,"c",(function(){return or})),n.d(t,"d",(function(){return ur})),n.d(t,"e",(function(){return cr})),n.d(t,"f",(function(){return lr})),n.d(t,"g",(function(){return dr})),n.d(t,"h",(function(){return rr})),n.d(t,"i",(function(){return ir}));var r,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},c={},l=l||{},h=o||self;function d(){}function f(a){var b=typeof a;return"array"==(b="object"!=b?b:a?Array.isArray(a)?"array":b:"null")||"object"==b&&"number"==typeof a.length}function p(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function v(a,b,e){return a.call.apply(a.bind,arguments)}function w(a,b,e){if(!a)throw Error();if(2<arguments.length){var t=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,t),a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function q(a,b,e){return(q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:w).apply(null,arguments)}function I(a,b){var e=Array.prototype.slice.call(arguments,1);return function(){var t=e.slice();return t.push.apply(t,arguments),a.apply(this,t)}}function T(a,b){function e(){}e.prototype=b.prototype,a.X=b.prototype,a.prototype=new e,a.prototype.constructor=a,a.Wb=function(e,t,n){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return b.prototype[t].apply(e,r)}}function _(){this.s=this.s,this.o=this.o}_.prototype.s=!1,_.prototype.na=function(){var a;!this.s&&(this.s=!0,this.M(),0)&&(a=this,Object.prototype.hasOwnProperty.call(a,m)&&a[m]||(a[m]=++y))},_.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const E=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"==typeof a)return"string"!=typeof b||1!=b.length?-1:a.indexOf(b,0);for(let e=0;e<a.length;e++)if(e in a&&a[e]===b)return e;return-1};function k(a){const b=a.length;if(0<b){const e=Array(b);for(let t=0;t<b;t++)e[t]=a[t];return e}return[]}function S(a,b){for(let e=1;e<arguments.length;e++){const t=arguments[e];if(f(t)){const e=a.length||0,n=t.length||0;a.length=e+n;for(let r=0;r<n;r++)a[e+r]=t[r]}else a.push(t)}}function A(a,b){this.type=a,this.g=this.target=b,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{h.addEventListener("test",d,b),h.removeEventListener("test",d,b)}catch(e){}return a}();function O(a){return/^[\s\xa0]*$/.test(a)}var N=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function R(a,b){return a<b?-1:a>b?1:0}function D(){var a=h.navigator;return a&&(a=a.userAgent)?a:""}function x(a){return-1!=D().indexOf(a)}function L(a){return L[" "](a),a}L[" "]=d;var P,a,M=x("Opera"),U=x("Trident")||x("MSIE"),F=x("Edge"),V=F||U,j=x("Gecko")&&!(-1!=D().toLowerCase().indexOf("webkit")&&!x("Edge"))&&!(x("Trident")||x("MSIE"))&&!x("Edge"),B=-1!=D().toLowerCase().indexOf("webkit")&&!x("Edge");function z(){var a=h.document;return a?a.documentMode:void 0}e:{var H="",$=(a=D(),j?/rv:([^\);]+)(\)|;)/.exec(a):F?/Edge\/([\d\.]+)/.exec(a):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):B?/WebKit\/(\S+)/.exec(a):M?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if($&&(H=$?$[1]:""),U){var K=z();if(null!=K&&K>parseFloat(H)){P=String(K);break e}}P=H}var G,W={};function Q(){return function(a){var b=W;return Object.prototype.hasOwnProperty.call(b,9)?b[9]:b[9]=a(9)}((function(){let a=0;const b=N(String(P)).split("."),e=N("9").split("."),t=Math.max(b.length,e.length);for(let o=0;0==a&&o<t;o++){var n=b[o]||"",r=e[o]||"";do{if(n=/(\d*)(\D*)(.*)/.exec(n)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==n[0].length&&0==r[0].length)break;a=R(0==n[1].length?0:parseInt(n[1],10),0==r[1].length?0:parseInt(r[1],10))||R(0==n[2].length,0==r[2].length)||R(n[2],r[2]),n=n[3],r=r[3]}while(0==a)}return 0<=a}))}if(h.document&&U){var J=z();G=J||(parseInt(P,10)||void 0)}else G=void 0;var Y=G;function X(a,b){if(A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var e=this.type=a.type,t=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=b,b=a.relatedTarget){if(j){e:{try{L(b.nodeName);var n=!0;break e}catch(e){}n=!1}n||(b=null)}}else"mouseover"==e?b=a.fromElement:"mouseout"==e&&(b=a.toElement);this.relatedTarget=b,t?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:Z[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&X.X.h.call(this)}}T(X,A);var Z={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.X.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ee="closure_listenable_"+(1e6*Math.random()|0),te=0;function ne(a,b,e,t,n){this.listener=a,this.proxy=null,this.src=b,this.type=e,this.capture=!!t,this.ha=n,this.key=++te,this.ba=this.ea=!1}function re(a){a.ba=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ie(a,b,e){for(const t in a)b.call(e,a[t],t,a)}function se(a){const b={};for(const e in a)b[e]=a[e];return b}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(a,b){let e,t;for(let n=1;n<arguments.length;n++){for(e in t=arguments[n],t)a[e]=t[e];for(let n=0;n<oe.length;n++)e=oe[n],Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])}}function ce(a){this.src=a,this.g={},this.h=0}function ue(a,b){var e=b.type;if(e in a.g){var t,n=a.g[e],r=E(n,b);(t=0<=r)&&Array.prototype.splice.call(n,r,1),t&&(re(b),0==a.g[e].length&&(delete a.g[e],a.h--))}}function le(a,b,e,t){for(var n=0;n<a.length;++n){var r=a[n];if(!r.ba&&r.listener==b&&r.capture==!!e&&r.ha==t)return n}return-1}ce.prototype.add=function(a,b,e,t,n){var r=a.toString();(a=this.g[r])||(a=this.g[r]=[],this.h++);var o=le(a,b,t,n);return-1<o?(b=a[o],e||(b.ea=!1)):((b=new ne(b,this.src,r,!!t,n)).ea=e,a.push(b)),b};var he="closure_lm_"+(1e6*Math.random()|0),de={};function fe(a,b,e,t,n){if(t&&t.once)return me(a,b,e,t,n);if(Array.isArray(b)){for(var r=0;r<b.length;r++)fe(a,b[r],e,t,n);return null}return e=Te(e),a&&a[ee]?a.N(b,e,p(t)?!!t.capture:!!t,n):pe(a,b,e,!1,t,n)}function pe(a,b,e,t,n,r){if(!b)throw Error("Invalid event type");var o=p(n)?!!n.capture:!!n,c=be(a);if(c||(a[he]=c=new ce(a)),(e=c.add(b,e,t,o,r)).proxy)return e;if(t=function(){function a(e){return b.call(a.src,a.listener,e)}const b=we;return a}(),e.proxy=t,t.src=a,t.listener=e,a.addEventListener)C||(n=o),void 0===n&&(n=!1),a.addEventListener(b.toString(),t,n);else if(a.attachEvent)a.attachEvent(ve(b.toString()),t);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(t)}return e}function me(a,b,e,t,n){if(Array.isArray(b)){for(var r=0;r<b.length;r++)me(a,b[r],e,t,n);return null}return e=Te(e),a&&a[ee]?a.O(b,e,p(t)?!!t.capture:!!t,n):pe(a,b,e,!0,t,n)}function ge(a,b,e,t,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)ge(a,b[r],e,t,n);else t=p(t)?!!t.capture:!!t,e=Te(e),a&&a[ee]?(a=a.i,(b=String(b).toString())in a.g&&(-1<(e=le(r=a.g[b],e,t,n))&&(re(r[e]),Array.prototype.splice.call(r,e,1),0==r.length&&(delete a.g[b],a.h--)))):a&&(a=be(a))&&(b=a.g[b.toString()],a=-1,b&&(a=le(b,e,t,n)),(e=-1<a?b[a]:null)&&ye(e))}function ye(a){if("number"!=typeof a&&a&&!a.ba){var b=a.src;if(b&&b[ee])ue(b.i,a);else{var e=a.type,t=a.proxy;b.removeEventListener?b.removeEventListener(e,t,a.capture):b.detachEvent?b.detachEvent(ve(e),t):b.addListener&&b.removeListener&&b.removeListener(t),(e=be(b))?(ue(e,a),0==e.h&&(e.src=null,b[he]=null)):re(a)}}}function ve(a){return a in de?de[a]:de[a]="on"+a}function we(a,b){if(a.ba)a=!0;else{b=new X(b,this);var e=a.listener,t=a.ha||a.src;a.ea&&ye(a),a=e.call(t,b)}return a}function be(a){return(a=a[he])instanceof ce?a:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(a){return"function"==typeof a?a:(a[Ie]||(a[Ie]=function(b){return a.handleEvent(b)}),a[Ie])}function _e(){_.call(this),this.i=new ce(this),this.P=this,this.I=null}function Ee(a,b){var e,t=a.I;if(t)for(e=[];t;t=t.I)e.push(t);if(a=a.P,t=b.type||b,"string"==typeof b)b=new A(b,a);else if(b instanceof A)b.target=b.target||a;else{var n=b;ae(b=new A(t,a),n)}if(n=!0,e)for(var r=e.length-1;0<=r;r--){var o=b.g=e[r];n=ke(o,t,!0,b)&&n}if(n=ke(o=b.g=a,t,!0,b)&&n,n=ke(o,t,!1,b)&&n,e)for(r=0;r<e.length;r++)n=ke(o=b.g=e[r],t,!1,b)&&n}function ke(a,b,e,t){if(!(b=a.i.g[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var o=b[r];if(o&&!o.ba&&o.capture==e){var c=o.listener,u=o.ha||o.src;o.ea&&ue(a.i,o),n=!1!==c.call(u,t)&&n}}return n&&!t.defaultPrevented}T(_e,_),_e.prototype[ee]=!0,_e.prototype.removeEventListener=function(a,b,e,t){ge(this,a,b,e,t)},_e.prototype.M=function(){if(_e.X.M.call(this),this.i){var e,a=this.i;for(e in a.g){for(var t=a.g[e],n=0;n<t.length;n++)re(t[n]);delete a.g[e],a.h--}}this.I=null},_e.prototype.N=function(a,b,e,t){return this.i.add(String(a),b,!1,e,t)},_e.prototype.O=function(a,b,e,t){return this.i.add(String(a),b,!0,e,t)};var Se=h.JSON.stringify;function Ae(){var a=Le;let b=null;return a.g&&(b=a.g,a.g=a.g.next,a.g||(a.h=null),b.next=null),b}var Ce,Oe=new class{constructor(a,b){this.i=a,this.j=b,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}((()=>new Ne),(a=>a.reset()));class Ne{constructor(){this.next=this.g=this.h=null}set(a,b){this.h=a,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}function Re(a){h.setTimeout((()=>{throw a}),0)}function De(a,b){Ce||function(){var a=h.Promise.resolve(void 0);Ce=function(){a.then(Pe)}}(),xe||(Ce(),xe=!0),Le.add(a,b)}var xe=!1,Le=new class{constructor(){this.h=this.g=null}add(a,b){const e=Oe.get();e.set(a,b),this.h?this.h.next=e:this.g=e,this.h=e}};function Pe(){for(var a;a=Ae();){try{a.h.call(a.g)}catch(e){Re(e)}var b=Oe;b.j(a),100>b.h&&(b.h++,a.next=b.g,b.g=a)}xe=!1}function Me(a,b){_e.call(this),this.h=a||1,this.g=b||h,this.j=q(this.lb,this),this.l=Date.now()}function Ue(a){a.ca=!1,a.R&&(a.g.clearTimeout(a.R),a.R=null)}function Fe(a,b,e){if("function"==typeof a)e&&(a=q(a,e));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=q(a.handleEvent,a)}return 2147483647<Number(b)?-1:h.setTimeout(a,b||0)}function Ve(a){a.g=Fe((()=>{a.g=null,a.i&&(a.i=!1,Ve(a))}),a.j);const b=a.h;a.h=null,a.m.apply(null,b)}T(Me,_e),(r=Me.prototype).ca=!1,r.R=null,r.lb=function(){if(this.ca){var a=Date.now()-this.l;0<a&&a<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-a):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ee(this,"tick"),this.ca&&(Ue(this),this.start()))}},r.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Me.X.M.call(this),Ue(this),delete this.g};class je extends _{constructor(a,b){super(),this.m=a,this.j=b,this.h=null,this.i=!1,this.g=null}l(a){this.h=arguments,this.g?this.i=!0:Ve(this)}M(){super.M(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qe(a){_.call(this),this.h=a,this.g={}}T(qe,_);var Be=[];function ze(a,b,e,t){Array.isArray(e)||(e&&(Be[0]=e.toString()),e=Be);for(var n=0;n<e.length;n++){var r=fe(b,e[n],t||a.handleEvent,!1,a.h||a);if(!r)break;a.g[r.key]=r}}function He(a){ie(a.g,(function(b,e){this.g.hasOwnProperty(e)&&ye(b)}),a),a.g={}}function $e(){this.g=!0}function Ke(a,b,e,t){a.info((function(){return"XMLHTTP TEXT ("+b+"): "+function(a,b){if(!a.g)return b;if(!b)return null;try{var e=JSON.parse(b);if(e)for(a=0;a<e.length;a++)if(Array.isArray(e[a])){var t=e[a];if(!(2>t.length)){var n=t[1];if(Array.isArray(n)&&!(1>n.length)){var r=n[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<n.length;o++)n[o]=""}}}return Se(e)}catch(e){return b}}(a,e)+(t?" "+t:"")}))}qe.prototype.M=function(){qe.X.M.call(this),He(this)},qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$e.prototype.Aa=function(){this.g=!1},$e.prototype.info=function(){};var Ge={},We=null;function Qe(){return We=We||new _e}function Je(a){A.call(this,Ge.Pa,a)}function Ye(a){const b=Qe();Ee(b,new Je(b))}function Xe(a,b){A.call(this,Ge.STAT_EVENT,a),this.stat=b}function Ze(a){const b=Qe();Ee(b,new Xe(b,a))}function et(a,b){A.call(this,Ge.Qa,a),this.size=b}function tt(a,b){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){a()}),b)}Ge.Pa="serverreachability",T(Je,A),Ge.STAT_EVENT="statevent",T(Xe,A),Ge.Qa="timingevent",T(et,A);var nt={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},it={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function st(){}function ot(a){return a.h||(a.h=a.i())}function at(){}st.prototype.h=null;var ct,ut={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function lt(){A.call(this,"d")}function ht(){A.call(this,"c")}function ft(){}function pt(a,b,e,t){this.l=a,this.j=b,this.m=e,this.U=t||1,this.S=new qe(this),this.O=gt,a=V?125:void 0,this.T=new Me(a),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}T(lt,A),T(ht,A),T(ft,st),ft.prototype.g=function(){return new XMLHttpRequest},ft.prototype.i=function(){return{}},ct=new ft;var gt=45e3,yt={},vt={};function wt(a,b,e){a.K=1,a.v=Ft(xt(b)),a.s=e,a.P=!0,bt(a,null)}function bt(a,b){a.F=Date.now(),Et(a),a.A=xt(a.v);var e=a.A,t=a.U;Array.isArray(t)||(t=[String(t)]),Yt(e.i,"t",t),a.C=0,e=a.l.H,a.h=new mt,a.g=Qn(a.l,e?b:null,!a.s),0<a.N&&(a.L=new je(q(a.La,a,a.g),a.N)),ze(a.S,a.g,"readystatechange",a.ib),b=a.H?se(a.H):{},a.s?(a.u||(a.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.g.da(a.A,a.u,a.s,b)):(a.u="GET",a.g.da(a.A,a.u,null,b)),Ye(),function(a,b,e,t,n,r){a.info((function(){if(a.g)if(r)for(var o="",c=r.split("&"),u=0;u<c.length;u++){var l=c[u].split("=");if(1<l.length){var h=l[0];l=l[1];var d=h.split("_");o=2<=d.length&&"type"==d[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+t+") [attempt "+n+"]: "+b+"\n"+e+"\n"+o}))}(a.j,a.u,a.A,a.m,a.U,a.s)}function It(a){return!!a.g&&("GET"==a.u&&2!=a.K&&a.l.Da)}function Tt(a,b,e){let t,n=!0;for(;!a.I&&a.C<e.length;){if(t=_t(a,e),t==vt){4==b&&(a.o=4,Ze(14),n=!1),Ke(a.j,a.m,null,"[Incomplete Response]");break}if(t==yt){a.o=4,Ze(15),Ke(a.j,a.m,e,"[Invalid Chunk]"),n=!1;break}Ke(a.j,a.m,t,null),Ot(a,t)}It(a)&&t!=vt&&t!=yt&&(a.h.g="",a.C=0),4!=b||0!=e.length||a.h.h||(a.o=1,Ze(16),n=!1),a.i=a.i&&n,n?0<e.length&&!a.$&&(a.$=!0,(b=a.l).g==a&&b.$&&!b.K&&(b.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),qn(b),b.K=!0,Ze(11))):(Ke(a.j,a.m,e,"[Invalid Chunked Response]"),Ct(a),At(a))}function _t(a,b){var e=a.C,t=b.indexOf("\n",e);return-1==t?vt:(e=Number(b.substring(e,t)),isNaN(e)?yt:(t+=1)+e>b.length?vt:(b=b.substr(t,e),a.C=t+e,b))}function Et(a){a.V=Date.now()+a.O,kt(a,a.O)}function kt(a,b){if(null!=a.B)throw Error("WatchDog timer not null");a.B=tt(q(a.gb,a),b)}function St(a){a.B&&(h.clearTimeout(a.B),a.B=null)}function At(a){0==a.l.G||a.I||Hn(a.l,a)}function Ct(a){St(a);var b=a.L;b&&"function"==typeof b.na&&b.na(),a.L=null,Ue(a.T),He(a.S),a.g&&(b=a.g,a.g=null,b.abort(),b.na())}function Ot(a,b){try{var e=a.l;if(0!=e.G&&(e.g==a||rn(e.h,a)))if(!a.J&&rn(e.h,a)&&3==e.G){try{var t=e.Fa.g.parse(b)}catch(e){t=null}if(Array.isArray(t)&&3==t.length){var n=t;if(0==n[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<a.F))break e;zn(e),xn(e)}jn(e),Ze(18)}}else e.Ba=n[1],0<e.Ba-e.T&&37500>n[2]&&e.L&&0==e.A&&!e.v&&(e.v=tt(q(e.cb,e),6e3));if(1>=nn(e.h)&&e.ja){try{e.ja()}catch(e){}e.ja=void 0}}else Kn(e,11)}else if((a.J||e.g==a)&&zn(e),!O(b))for(n=e.Fa.g.parse(b),b=0;b<n.length;b++){let l=n[b];if(e.T=l[0],l=l[1],2==e.G)if("c"==l[0]){e.I=l[1],e.ka=l[2];const n=l[3];null!=n&&(e.ma=n,e.j.info("VER="+e.ma));const h=l[4];null!=h&&(e.Ca=h,e.j.info("SVER="+e.Ca));const d=l[5];null!=d&&"number"==typeof d&&0<d&&(t=1.5*d,e.J=t,e.j.info("backChannelRequestTimeoutMs_="+t)),t=e;const f=a.g;if(f){const e=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var r=t.h;r.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(r.j=r.l,r.g=new Set,r.h&&(sn(r,r.h),r.h=null))}if(t.D){const e=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(t.za=e,Ut(t.F,t.D,e))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-a.F,e.j.info("Handshake RTT: "+e.P+"ms"));var o=a;if((t=e).sa=Wn(t,t.H?t.ka:null,t.V),o.J){on(t.h,o);var c=o,u=t.J;u&&c.setTimeout(u),c.B&&(St(c),Et(c)),t.g=o}else Vn(t);0<e.i.length&&Pn(e)}else"stop"!=l[0]&&"close"!=l[0]||Kn(e,7);else 3==e.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Kn(e,7):Dn(e):"noop"!=l[0]&&e.l&&e.l.wa(l),e.A=0)}Ye()}catch(e){}}function Nt(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(f(a)||"string"==typeof a)Array.prototype.forEach.call(a,b,void 0);else for(var e=function(a){if(a.oa&&"function"==typeof a.oa)return a.oa();if(!a.W||"function"!=typeof a.W){if("undefined"!=typeof Map&&a instanceof Map)return Array.from(a.keys());if(!("undefined"!=typeof Set&&a instanceof Set)){if(f(a)||"string"==typeof a){var b=[];a=a.length;for(var e=0;e<a;e++)b.push(e);return b}b=[],e=0;for(const t in a)b[e++]=t;return b}}}(a),t=function(a){if(a.W&&"function"==typeof a.W)return a.W();if("undefined"!=typeof Map&&a instanceof Map||"undefined"!=typeof Set&&a instanceof Set)return Array.from(a.values());if("string"==typeof a)return a.split("");if(f(a)){for(var b=[],e=a.length,t=0;t<e;t++)b.push(a[t]);return b}for(t in b=[],e=0,a)b[e++]=a[t];return b}(a),n=t.length,r=0;r<n;r++)b.call(void 0,t[r],e&&e[r],a)}(r=pt.prototype).setTimeout=function(a){this.O=a},r.ib=function(a){a=a.target;const b=this.L;b&&3==Sn(a)?b.l():this.La(a)},r.La=function(a){try{if(a==this.g)e:{const d=Sn(this.g);var b=this.g.Ea();this.g.aa();if(!(3>d)&&(3!=d||V||this.g&&(this.h.h||this.g.fa()||An(this.g)))){this.I||4!=d||7==b||Ye(),St(this);var e=this.g.aa();this.Y=e;t:if(It(this)){var t=An(this.g);a="";var n=t.length,r=4==Sn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ct(this),At(this);var o="";break t}this.h.i=new h.TextDecoder}for(b=0;b<n;b++)this.h.h=!0,a+=this.h.i.decode(t[b],{stream:r&&b==n-1});t.splice(0,n),this.h.g+=a,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==e,function(a,b,e,t,n,r,o){a.info((function(){return"XMLHTTP RESP ("+t+") [ attempt "+n+"]: "+b+"\n"+e+"\n"+r+" "+o}))}(this.j,this.u,this.A,this.m,this.U,d,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(c)){var l=c;break t}}l=null}if(!(e=l)){this.i=!1,this.o=3,Ze(12),Ct(this),At(this);break e}Ke(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ot(this,e)}this.P?(Tt(this,d,o),V&&this.i&&3==d&&(ze(this.S,this.T,"tick",this.hb),this.T.start())):(Ke(this.j,this.m,o,null),Ot(this,o)),4==d&&Ct(this),this.i&&!this.I&&(4==d?Hn(this.l,this):(this.i=!1,Et(this)))}else 400==e&&0<o.indexOf("Unknown SID")?(this.o=3,Ze(12)):(this.o=0,Ze(13)),Ct(this),At(this)}}}catch(e){}},r.hb=function(){if(this.g){var a=Sn(this.g),b=this.g.fa();this.C<b.length&&(St(this),Tt(this,a,b),this.i&&4!=a&&Et(this))}},r.cancel=function(){this.I=!0,Ct(this)},r.gb=function(){this.B=null;const a=Date.now();0<=a-this.V?(function(a,b){a.info((function(){return"TIMEOUT: "+b}))}(this.j,this.A),2!=this.K&&(Ye(),Ze(17)),Ct(this),this.o=2,At(this)):kt(this,this.V-a)};var Rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dt(a,b){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,a instanceof Dt){this.h=void 0!==b?b:a.h,Lt(this,a.j),this.s=a.s,this.g=a.g,Pt(this,a.m),this.l=a.l,b=a.i;var e=new Gt;e.i=b.i,b.g&&(e.g=new Map(b.g),e.h=b.h),Mt(this,e),this.o=a.o}else a&&(e=String(a).match(Rt))?(this.h=!!b,Lt(this,e[1]||"",!0),this.s=Vt(e[2]||""),this.g=Vt(e[3]||"",!0),Pt(this,e[4]),this.l=Vt(e[5]||"",!0),Mt(this,e[6]||"",!0),this.o=Vt(e[7]||"")):(this.h=!!b,this.i=new Gt(null,this.h))}function xt(a){return new Dt(a)}function Lt(a,b,e){a.j=e?Vt(b,!0):b,a.j&&(a.j=a.j.replace(/:$/,""))}function Pt(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.m=b}else a.m=null}function Mt(a,b,e){b instanceof Gt?(a.i=b,function(a,b){b&&!a.j&&(Wt(a),a.i=null,a.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Qt(this,t),Yt(this,n,e))}),a)),a.j=b}(a.i,a.h)):(e||(b=jt(b,$t)),a.i=new Gt(b,a.h))}function Ut(a,b,e){a.i.set(b,e)}function Ft(a){return Ut(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Vt(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function jt(a,b,e){return"string"==typeof a?(a=encodeURI(a).replace(b,qt),e&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function qt(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Dt.prototype.toString=function(){var a=[],b=this.j;b&&a.push(jt(b,Bt,!0),":");var e=this.g;return(e||"file"==b)&&(a.push("//"),(b=this.s)&&a.push(jt(b,Bt,!0),"@"),a.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&a.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&a.push("/"),a.push(jt(e,"/"==e.charAt(0)?Ht:zt,!0))),(e=this.i.toString())&&a.push("?",e),(e=this.o)&&a.push("#",jt(e,Kt)),a.join("")};var Bt=/[#\/\?@]/g,zt=/[#\?:]/g,Ht=/[#\?]/g,$t=/[#\?@]/g,Kt=/#/g;function Gt(a,b){this.h=this.g=null,this.i=a||null,this.j=!!b}function Wt(a){a.g||(a.g=new Map,a.h=0,a.i&&function(a,b){if(a){a=a.split("&");for(var e=0;e<a.length;e++){var t=a[e].indexOf("="),n=null;if(0<=t){var r=a[e].substring(0,t);n=a[e].substring(t+1)}else r=a[e];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.i,(function(b,e){a.add(decodeURIComponent(b.replace(/\+/g," ")),e)})))}function Qt(a,b){Wt(a),b=Xt(a,b),a.g.has(b)&&(a.i=null,a.h-=a.g.get(b).length,a.g.delete(b))}function Jt(a,b){return Wt(a),b=Xt(a,b),a.g.has(b)}function Yt(a,b,e){Qt(a,b),0<e.length&&(a.i=null,a.g.set(Xt(a,b),k(e)),a.h+=e.length)}function Xt(a,b){return b=String(b),a.j&&(b=b.toLowerCase()),b}(r=Gt.prototype).add=function(a,b){Wt(this),this.i=null,a=Xt(this,a);var e=this.g.get(a);return e||this.g.set(a,e=[]),e.push(b),this.h+=1,this},r.forEach=function(a,b){Wt(this),this.g.forEach((function(e,t){e.forEach((function(e){a.call(b,e,t,this)}),this)}),this)},r.oa=function(){Wt(this);const a=Array.from(this.g.values()),b=Array.from(this.g.keys()),e=[];for(let t=0;t<b.length;t++){const n=a[t];for(let r=0;r<n.length;r++)e.push(b[t])}return e},r.W=function(a){Wt(this);let b=[];if("string"==typeof a)Jt(this,a)&&(b=b.concat(this.g.get(Xt(this,a))));else{a=Array.from(this.g.values());for(let e=0;e<a.length;e++)b=b.concat(a[e])}return b},r.set=function(a,b){return Wt(this),this.i=null,Jt(this,a=Xt(this,a))&&(this.h-=this.g.get(a).length),this.g.set(a,[b]),this.h+=1,this},r.get=function(a,b){return a&&0<(a=this.W(a)).length?String(a[0]):b},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],b=Array.from(this.g.keys());for(var e=0;e<b.length;e++){var t=b[e];const r=encodeURIComponent(String(t)),o=this.W(t);for(t=0;t<o.length;t++){var n=r;""!==o[t]&&(n+="="+encodeURIComponent(String(o[t]))),a.push(n)}}return this.i=a.join("&")};function Zt(a){this.l=a||en,h.PerformanceNavigationTiming?a=0<(a=h.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(h.g&&h.g.Ga&&h.g.Ga()&&h.g.Ga().$b),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var en=10;function tn(a){return!!a.h||!!a.g&&a.g.size>=a.j}function nn(a){return a.h?1:a.g?a.g.size:0}function rn(a,b){return a.h?a.h==b:!!a.g&&a.g.has(b)}function sn(a,b){a.g?a.g.add(b):a.h=b}function on(a,b){a.h&&a.h==b?a.h=null:a.g&&a.g.has(b)&&a.g.delete(b)}function an(a){if(null!=a.h)return a.i.concat(a.h.D);if(null!=a.g&&0!==a.g.size){let b=a.i;for(const e of a.g.values())b=b.concat(e.D);return b}return k(a.i)}function cn(){}function un(){this.g=new cn}function ln(a,b,e){const t=e||"";try{Nt(a,(function(e,n){let r=e;p(e)&&(r=Se(e)),b.push(t+n+"="+encodeURIComponent(r))}))}catch(e){throw b.push(t+"type="+encodeURIComponent("_badmap")),e}}function dd(a,b,e,t,n){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,n(t)}catch(e){}}function hn(a){this.l=a.ac||null,this.j=a.jb||!1}function dn(a,b){_e.call(this),this.D=a,this.u=b,this.m=void 0,this.readyState=fn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zt.prototype.cancel=function(){if(this.i=an(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const a of this.g.values())a.cancel();this.g.clear()}},cn.prototype.stringify=function(a){return h.JSON.stringify(a,void 0)},cn.prototype.parse=function(a){return h.JSON.parse(a,void 0)},T(hn,st),hn.prototype.g=function(){return new dn(this.l,this.j)},hn.prototype.i=function(a){return function(){return a}}({}),T(dn,_e);var fn=0;function pn(a){a.j.read().then(a.Ta.bind(a)).catch(a.ga.bind(a))}function mn(a){a.readyState=4,a.l=null,a.j=null,a.A=null,gn(a)}function gn(a){a.onreadystatechange&&a.onreadystatechange.call(a)}(r=dn.prototype).open=function(a,b){if(this.readyState!=fn)throw this.abort(),Error("Error reopening a connection");this.C=a,this.B=b,this.readyState=1,gn(this)},r.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.v,method:this.C,credentials:this.m,cache:void 0};a&&(b.body=a),(this.D||h).fetch(new Request(this.B,b)).then(this.Wa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mn(this)),this.readyState=fn},r.Wa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,gn(this)),this.g&&(this.readyState=3,gn(this),this.g)))if("arraybuffer"===this.responseType)a.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==h.ReadableStream&&"body"in a){if(this.j=a.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pn(this)}else a.text().then(this.Va.bind(this),this.ga.bind(this))},r.Ta=function(a){if(this.g){if(this.u&&a.value)this.response.push(a.value);else if(!this.u){var b=a.value?a.value:new Uint8Array(0);(b=this.A.decode(b,{stream:!a.done}))&&(this.response=this.responseText+=b)}a.done?mn(this):gn(this),3==this.readyState&&pn(this)}},r.Va=function(a){this.g&&(this.response=this.responseText=a,mn(this))},r.Ua=function(a){this.g&&(this.response=a,mn(this))},r.ga=function(){this.g&&mn(this)},r.setRequestHeader=function(a,b){this.v.append(a,b)},r.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],b=this.h.entries();for(var e=b.next();!e.done;)e=e.value,a.push(e[0]+": "+e[1]),e=b.next();return a.join("\r\n")},Object.defineProperty(dn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(a){this.m=a?"include":"same-origin"}});var yn=h.JSON.parse;function vn(a){_e.call(this),this.headers=new Map,this.u=a||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wn,this.K=this.L=!1}T(vn,_e);var wn="",bn=/^https?$/i,In=["POST","PUT"];function Tn(a,b){a.h=!1,a.g&&(a.l=!0,a.g.abort(),a.l=!1),a.j=b,a.m=5,_n(a),En(a)}function _n(a){a.D||(a.D=!0,Ee(a,"complete"),Ee(a,"error"))}function td(a){if(a.h&&void 0!==l&&(!a.C[1]||4!=Sn(a)||2!=a.aa()))if(a.v&&4==Sn(a))Fe(a.Ha,0,a);else if(Ee(a,"readystatechange"),4==Sn(a)){a.h=!1;try{const c=a.aa();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var e;if(!(e=b)){var t;if(t=0===c){var n=String(a.H).match(Rt)[1]||null;if(!n&&h.self&&h.self.location){var r=h.self.location.protocol;n=r.substr(0,r.length-1)}t=!bn.test(n?n.toLowerCase():"")}e=t}if(e)Ee(a,"complete"),Ee(a,"success");else{a.m=6;try{var o=2<Sn(a)?a.g.statusText:""}catch(e){o=""}a.j=o+" ["+a.aa()+"]",_n(a)}}finally{En(a)}}}function En(a,b){if(a.g){kn(a);const e=a.g,t=a.C[0]?d:null;a.g=null,a.C=null,b||Ee(a,"ready");try{e.onreadystatechange=t}catch(e){}}}function kn(a){a.g&&a.K&&(a.g.ontimeout=null),a.A&&(h.clearTimeout(a.A),a.A=null)}function Sn(a){return a.g?a.g.readyState:0}function An(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.J){case wn:case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Cn(a){let b="";return ie(a,(function(e,t){b+=t,b+=":",b+=e,b+="\r\n"})),b}function On(a,b,e){e:{for(t in e){var t=!1;break e}t=!0}t||(e=Cn(e),"string"==typeof a?null!=e&&encodeURIComponent(String(e)):Ut(a,b,e))}function Nn(a,b,e){return e&&e.internalChannelParams&&e.internalChannelParams[a]||b}function Rn(a){this.Ca=0,this.i=[],this.j=new $e,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Nn("failFast",!1,a),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Nn("baseRetryDelayMs",5e3,a),this.bb=Nn("retryDelaySeedMs",1e4,a),this.$a=Nn("forwardChannelMaxRetries",2,a),this.ta=Nn("forwardChannelRequestTimeoutMs",2e4,a),this.ra=a&&a.xmlHttpFactory||void 0,this.Da=a&&a.Zb||!1,this.J=void 0,this.H=a&&a.supportsCrossDomainXhr||!1,this.I="",this.h=new Zt(a&&a.concurrentRequestLimit),this.Fa=new un,this.O=a&&a.fastHandshake||!1,this.N=a&&a.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=a&&a.Xb||!1,a&&a.Aa&&this.j.Aa(),a&&a.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&a&&a.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Dn(a){if(Ln(a),3==a.G){var b=a.U++,e=xt(a.F);Ut(e,"SID",a.I),Ut(e,"RID",b),Ut(e,"TYPE","terminate"),Un(a,e),(b=new pt(a,a.j,b,void 0)).K=2,b.v=Ft(xt(e)),e=!1,h.navigator&&h.navigator.sendBeacon&&(e=h.navigator.sendBeacon(b.v.toString(),"")),!e&&h.Image&&((new Image).src=b.v,e=!0),e||(b.g=Qn(b.l,null),b.g.da(b.v)),b.F=Date.now(),Et(b)}Gn(a)}function xn(a){a.g&&(qn(a),a.g.cancel(),a.g=null)}function Ln(a){xn(a),a.u&&(h.clearTimeout(a.u),a.u=null),zn(a),a.h.cancel(),a.m&&("number"==typeof a.m&&h.clearTimeout(a.m),a.m=null)}function Pn(a){tn(a.h)||a.m||(a.m=!0,De(a.Ja,a),a.C=0)}function Mn(a,b){var e;e=b?b.m:a.U++;const t=xt(a.F);Ut(t,"SID",a.I),Ut(t,"RID",e),Ut(t,"AID",a.T),Un(a,t),a.o&&a.s&&On(t,a.o,a.s),e=new pt(a,a.j,e,a.C+1),null===a.o&&(e.H=a.s),b&&(a.i=b.D.concat(a.i)),b=Fn(a,e,1e3),e.setTimeout(Math.round(.5*a.ta)+Math.round(.5*a.ta*Math.random())),sn(a.h,e),wt(e,t,b)}function Un(a,b){a.ia&&ie(a.ia,(function(e,t){Ut(b,t,e)})),a.l&&Nt({},(function(e,t){Ut(b,t,e)}))}function Fn(a,b,e){e=Math.min(a.i.length,e);var t=a.l?q(a.l.Ra,a.l,a):null;e:{var n=a.i;let r=-1;for(;;){const o=["count="+e];-1==r?0<e?(r=n[0].h,o.push("ofs="+r)):r=0:o.push("ofs="+r);let c=!0;for(let u=0;u<e;u++){let e=n[u].h;const l=n[u].g;if(e-=r,0>e)r=Math.max(0,n[u].h-100),c=!1;else try{ln(l,o,"req"+e+"_")}catch(e){t&&t(l)}}if(c){t=o.join("&");break e}}}return a=a.i.splice(0,e),b.D=a,t}function Vn(a){a.g||a.u||(a.Z=1,De(a.Ia,a),a.A=0)}function jn(a){return!(a.g||a.u||3<=a.A)&&(a.Z++,a.u=tt(q(a.Ia,a),$n(a,a.A)),a.A++,!0)}function qn(a){null!=a.B&&(h.clearTimeout(a.B),a.B=null)}function Bn(a){a.g=new pt(a,a.j,"rpc",a.Z),null===a.o&&(a.g.H=a.s),a.g.N=0;var b=xt(a.sa);Ut(b,"RID","rpc"),Ut(b,"SID",a.I),Ut(b,"CI",a.L?"0":"1"),Ut(b,"AID",a.T),Ut(b,"TYPE","xmlhttp"),Un(a,b),a.o&&a.s&&On(b,a.o,a.s),a.J&&a.g.setTimeout(a.J);var e=a.g;a=a.ka,e.K=1,e.v=Ft(xt(b)),e.s=null,e.P=!0,bt(e,a)}function zn(a){null!=a.v&&(h.clearTimeout(a.v),a.v=null)}function Hn(a,b){var e=null;if(a.g==b){zn(a),qn(a),a.g=null;var t=2}else{if(!rn(a.h,b))return;e=b.D,on(a.h,b),t=1}if(0!=a.G)if(a.pa=b.Y,b.i)if(1==t){e=b.s?b.s.length:0,b=Date.now()-b.F;var n=a.C;Ee(t=Qe(),new et(t,e)),Pn(a)}else Vn(a);else if(3==(n=b.o)||0==n&&0<a.pa||!(1==t&&function(a,b){return!(nn(a.h)>=a.h.j-(a.m?1:0)||(a.m?(a.i=b.D.concat(a.i),0):1==a.G||2==a.G||a.C>=(a.Za?0:a.$a)||(a.m=tt(q(a.Ja,a,b),$n(a,a.C)),a.C++,0)))}(a,b)||2==t&&jn(a)))switch(e&&0<e.length&&(b=a.h,b.i=b.i.concat(e)),n){case 1:Kn(a,5);break;case 4:Kn(a,10);break;case 3:Kn(a,6);break;default:Kn(a,2)}}function $n(a,b){let e=a.Xa+Math.floor(Math.random()*a.bb);return a.l||(e*=2),e*b}function Kn(a,b){if(a.j.info("Error code "+b),2==b){var e=null;a.l&&(e=null);var t=q(a.kb,a);e||(e=new Dt("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||Lt(e,"https"),Ft(e)),function(a,b){const e=new $e;if(h.Image){const t=new Image;t.onload=I(dd,e,t,"TestLoadImage: loaded",!0,b),t.onerror=I(dd,e,t,"TestLoadImage: error",!1,b),t.onabort=I(dd,e,t,"TestLoadImage: abort",!1,b),t.ontimeout=I(dd,e,t,"TestLoadImage: timeout",!1,b),h.setTimeout((function(){t.ontimeout&&t.ontimeout()}),1e4),t.src=a}else b(!1)}(e.toString(),t)}else Ze(2);a.G=0,a.l&&a.l.va(b),Gn(a),Ln(a)}function Gn(a){if(a.G=0,a.la=[],a.l){const b=an(a.h);0==b.length&&0==a.i.length||(S(a.la,b),S(a.la,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ua()}}function Wn(a,b,e){var t=e instanceof Dt?xt(e):new Dt(e,void 0);if(""!=t.g)b&&(t.g=b+"."+t.g),Pt(t,t.m);else{var n=h.location;t=n.protocol,b=b?b+"."+n.hostname:n.hostname,n=+n.port;var r=new Dt(null,void 0);t&&Lt(r,t),b&&(r.g=b),n&&Pt(r,n),e&&(r.l=e),t=r}return e=a.D,b=a.za,e&&b&&Ut(t,e,b),Ut(t,"VER",a.ma),Un(a,t),t}function Qn(a,b,e){if(b&&!a.H)throw Error("Can't create secondary domain capable XhrIo object.");return(b=e&&a.Da&&!a.ra?new vn(new hn({jb:!0})):new vn(a.ra)).Ka(a.H),b}function Jn(){}function Yn(){if(U&&!(10<=Number(Y)))throw Error("Environmental error: no available transport.")}function Xn(a,b){_e.call(this),this.g=new Rn(b),this.l=a,this.h=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.s=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.ya&&(a?a["X-WebChannel-Client-Profile"]=b.ya:a={"X-WebChannel-Client-Profile":b.ya}),this.g.S=a,(a=b&&b.Yb)&&!O(a)&&(this.g.o=a),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!O(b)&&(this.g.D=b,null!==(a=this.h)&&b in a&&(b in(a=this.h)&&delete a[b])),this.j=new nr(this)}function Zn(a){lt.call(this);var b=a.__sm__;if(b){e:{for(const e in b){a=e;break e}a=void 0}(this.i=a)&&(a=this.i,b=null!==b&&a in b?b[a]:void 0),this.data=b}else this.data=a}function er(){ht.call(this),this.status=1}function nr(a){this.g=a}(r=vn.prototype).Ka=function(a){this.L=a},r.da=function(a,b,e,t){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+a);b=b?b.toUpperCase():"GET",this.H=a,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ct.g(),this.C=this.u?ot(this.u):ot(ct),this.g.onreadystatechange=q(this.Ha,this);try{this.F=!0,this.g.open(b,String(a),!0),this.F=!1}catch(e){return void Tn(this,e)}if(a=e||"",e=new Map(this.headers),t)if(Object.getPrototypeOf(t)===Object.prototype)for(var n in t)e.set(n,t[n]);else{if("function"!=typeof t.keys||"function"!=typeof t.get)throw Error("Unknown input type for opt_headers: "+String(t));for(const n of t.keys())e.set(n,t.get(n))}t=Array.from(e.keys()).find((e=>"content-type"==e.toLowerCase())),n=h.FormData&&a instanceof h.FormData,!(0<=E(In,b))||t||n||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,n]of e)this.g.setRequestHeader(t,n);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kn(this),0<this.B&&((this.K=function(a){return U&&Q()&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=q(this.qa,this)):this.A=Fe(this.qa,this.B,this)),this.v=!0,this.g.send(a),this.v=!1}catch(e){Tn(this,e)}},r.qa=function(){void 0!==l&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ee(this,"timeout"),this.abort(8))},r.abort=function(a){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=a||7,Ee(this,"complete"),Ee(this,"abort"),En(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),En(this,!0)),vn.X.M.call(this)},r.Ha=function(){this.s||(this.F||this.v||this.l?td(this):this.fb())},r.fb=function(){td(this)},r.aa=function(){try{return 2<Sn(this)?this.g.status:-1}catch(e){return-1}},r.fa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Sa=function(a){if(this.g){var b=this.g.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),yn(b)}},r.Ea=function(){return this.m},r.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=Rn.prototype).ma=8,r.G=1,r.Ja=function(a){if(this.m)if(this.m=null,1==this.G){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const n=new pt(this,this.j,a,void 0);let r=this.s;if(this.S&&(r?(r=se(r),ae(r,this.S)):r=this.S),null!==this.o||this.N||(n.H=r,r=null),this.O)e:{for(var b=0,e=0;e<this.i.length;e++){var t=this.i[e];if(void 0===(t="__data__"in t.g&&"string"==typeof(t=t.g.__data__)?t.length:void 0))break;if(4096<(b+=t)){b=e;break e}if(4096===b||e===this.i.length-1){b=e+1;break e}}b=1e3}else b=1e3;b=Fn(this,n,b),Ut(e=xt(this.F),"RID",a),Ut(e,"CVER",22),this.D&&Ut(e,"X-HTTP-Session-Id",this.D),Un(this,e),r&&(this.N?b="headers="+encodeURIComponent(String(Cn(r)))+"&"+b:this.o&&On(e,this.o,r)),sn(this.h,n),this.Ya&&Ut(e,"TYPE","init"),this.O?(Ut(e,"$req",b),Ut(e,"SID","null"),n.Z=!0,wt(n,e,null)):wt(n,e,b),this.G=2}}else 3==this.G&&(a?Mn(this,a):0==this.i.length||tn(this.h)||Mn(this))},r.Ia=function(){if(this.u=null,Bn(this),this.$&&!(this.K||null==this.g||0>=this.P)){var a=2*this.P;this.j.info("BP detection timer enabled: "+a),this.B=tt(q(this.eb,this),a)}},r.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ze(10),xn(this),Bn(this))},r.cb=function(){null!=this.v&&(this.v=null,xn(this),jn(this),Ze(19))},r.kb=function(a){a?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))},(r=Jn.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Ra=function(){},Yn.prototype.g=function(a,b){return new Xn(a,b)},T(Xn,_e),Xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var a=this.g,b=this.l,e=this.h||void 0;Ze(0),a.V=b,a.ia=e||{},a.L=a.Y,a.F=Wn(a,null,a.V),Pn(a)},Xn.prototype.close=function(){Dn(this.g)},Xn.prototype.u=function(a){var b=this.g;if("string"==typeof a){var e={};e.__data__=a,a=e}else this.v&&((e={}).__data__=Se(a),a=e);b.i.push(new class{constructor(a,b){this.h=a,this.g=b}}(b.ab++,a)),3==b.G&&Pn(b)},Xn.prototype.M=function(){this.g.l=null,delete this.j,Dn(this.g),delete this.g,Xn.X.M.call(this)},T(Zn,lt),T(er,ht),T(nr,Jn),nr.prototype.xa=function(){Ee(this.g,"a")},nr.prototype.wa=function(a){Ee(this.g,new Zn(a))},nr.prototype.va=function(a){Ee(this.g,new er)},nr.prototype.ua=function(){Ee(this.g,"b")},Yn.prototype.createWebChannel=Yn.prototype.g,Xn.prototype.send=Xn.prototype.u,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,it.COMPLETE="complete",at.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",_e.prototype.listen=_e.prototype.N,vn.prototype.listenOnce=vn.prototype.O,vn.prototype.getLastError=vn.prototype.Oa,vn.prototype.getLastErrorCode=vn.prototype.Ea,vn.prototype.getStatus=vn.prototype.aa,vn.prototype.getResponseJson=vn.prototype.Sa,vn.prototype.getResponseText=vn.prototype.fa,vn.prototype.send=vn.prototype.da,vn.prototype.setWithCredentials=vn.prototype.Ka;var rr=c.createWebChannelTransport=function(){return new Yn},ir=c.getStatEventTarget=function(){return Qe()},sr=c.ErrorCode=nt,or=c.EventType=it,ar=c.Event=Ge,cr=c.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ur=c.FetchXmlHttpFactory=hn,lr=c.WebChannel=at,dr=c.XhrIo=vn}).call(this,n(39))},215:function(e,t,n){"use strict";function r(e,t){return t=t||{},new Promise((function(n,r){var s=new XMLHttpRequest,o=[],u={},a=function e(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:e,headers:{keys:function(){return o},entries:function(){return o.map((function(e){return[e,s.getResponseHeader(e)]}))},get:function(e){return s.getResponseHeader(e)},has:function(e){return null!=s.getResponseHeader(e)}}}};for(var i in s.open(t.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().toLowerCase().replace(/^(.+?):/gm,(function(e,t){u[t]||o.push(u[t]=t)})),n(a())},s.onerror=r,s.withCredentials="include"==t.credentials,t.headers)s.setRequestHeader(i,t.headers[i]);s.send(t.body||null)}))}n.d(t,"a",(function(){return r}))},217:function(e,t,n){"use strict";var r=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===o}(e)}(e)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function c(e,t){return!1!==t.clone&&t.isMergeableObject(e)?m((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function l(e,source,t){return e.concat(source).map((function(element){return c(element,t)}))}function h(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(symbol){return Object.propertyIsEnumerable.call(e,symbol)})):[]}(e))}function d(object,e){try{return e in object}catch(e){return!1}}function f(e,source,t){var n={};return t.isMergeableObject(e)&&h(e).forEach((function(r){n[r]=c(e[r],t)})),h(source).forEach((function(r){(function(e,t){return d(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,r)||(d(e,r)&&t.isMergeableObject(source[r])?n[r]=function(e,t){if(!t.customMerge)return m;var n=t.customMerge(e);return"function"==typeof n?n:m}(r,t)(e[r],source[r],t):n[r]=c(source[r],t))})),n}function m(e,source,t){(t=t||{}).arrayMerge=t.arrayMerge||l,t.isMergeableObject=t.isMergeableObject||r,t.cloneUnlessOtherwiseSpecified=c;var n=Array.isArray(source);return n===Array.isArray(e)?n?t.arrayMerge(e,source,t):f(e,source,t):c(source,t)}m.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return m(e,n,t)}),{})};var y=m;e.exports=y},219:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(152),o=n(22);n(78),n(19),n(120);function c(e){return null!==e&&"object"===Object(o.a)(e)}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",o=arguments.length>3?arguments[3]:void 0;if(!c(t))return l(e,{},n,o);var object=Object.assign({},t);for(var h in e)if("__proto__"!==h&&"constructor"!==h){var d=e[h];null!=d&&(o&&o(object,h,d,n)||(Array.isArray(d)&&Array.isArray(object[h])?object[h]=[].concat(Object(r.a)(d),Object(r.a)(object[h])):c(d)&&c(object[h])?object[h]=l(d,object[h],(n?"".concat(n,"."):"")+h.toString(),o):object[h]=d))}return object}function h(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(p,t){return l(p,t,"",e)}),{})}}var d=h();h((function(object,e,t){if(void 0!==object[e]&&"function"==typeof t)return object[e]=t(object[e]),!0})),h((function(object,e,t){if(Array.isArray(object[e])&&"function"==typeof t)return object[e]=t(object[e]),!0}))},222:function(e,t,n){(function(e){e.installComponents=function(component,e){var n="function"==typeof component.exports?component.exports.extendOptions:component.options;for(var i in"function"==typeof component.exports&&(n.components=component.exports.options.components),n.components=n.components||{},e)n.components[i]=n.components[i]||e[i];n.functional&&function(component,e){if(component.exports[t])return;component.exports[t]=!0;var n=component.exports.render;component.exports.render=function(t,r){return n(t,Object.assign({},r,{_c:function(t,a,b){return r._c(e[t]||t,a,b)}}))}}(component,n.components)};var t="_functionalComponents"}).call(this,n(39))},288:function(e,t,n){var content=n(289);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(97).default)("65b97e00",content,!0,{sourceMap:!1})},289:function(e,t,n){var r=n(96)((function(i){return i[1]}));r.push([e.i,'/*! tailwindcss v2.2.19 | MIT License | https://tailwindcss.com*/\n\n/*! modern-normalize v1.1.0 | MIT License | https://github.com/sindresorhus/modern-normalize */html{-webkit-text-size-adjust:100%;line-height:1.15;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,"Segoe UI",Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";margin:0}hr{color:inherit;height:0}abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,"Liberation Mono",Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],button{-webkit-appearance:button}::-moz-focus-inner{border-style:none;padding:0}legend{padding:0}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{border:0 solid;box-sizing:border-box}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::-moz-placeholder, textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{color:inherit;line-height:inherit;padding:0}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}*,:after,:before{--tw-border-opacity:1;border-color:#e5e7eb;border-color:rgba(229,231,235,var(--tw-border-opacity))}.pointer-events-none{pointer-events:none}.absolute{position:absolute}.relative{position:relative}.top-0{top:0}.right-0{right:0}.bottom-0{bottom:0}.z-10{z-index:10}.col-span-1{grid-column:span 1/span 1}.col-span-12{grid-column:span 12/span 12}.m-1{margin:.25rem}.m-12{margin:3rem}.m-16{margin:4rem}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:.5rem;margin-top:.5rem}.my-4{margin-bottom:1rem;margin-top:1rem}.my-8{margin-bottom:2rem;margin-top:2rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mt-20{margin-top:5rem}.mr-4{margin-right:1rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.mb-12{margin-bottom:3rem}.mb-auto{margin-bottom:auto}.ml-2{margin-left:.5rem}.flex{display:flex}.table{display:table}.grid{display:grid}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-12{height:3rem}.h-20{height:5rem}.h-24{height:6rem}.h-full{height:100%}.h-screen{height:100vh}.w-4{width:1rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-10{width:2.5rem}.w-12{width:3rem}.w-20{width:5rem}.w-24{width:6rem}.w-full{width:100%}.min-w-0{min-width:0}.max-w-screen-xl{max-width:1280px}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}@keyframes spin{to{transform:rotate(1turn)}}@keyframes ping{75%,to{opacity:0;transform:scale(2)}}@keyframes pulse{50%{opacity:.5}}@keyframes bounce{0%,to{animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-around{justify-content:space-around}.gap-6{gap:1.5rem}.space-y-5>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:0;margin-bottom:calc(1.25rem*var(--tw-space-y-reverse));margin-top:1.25rem;margin-top:calc(1.25rem*(1 - var(--tw-space-y-reverse)))}.overflow-hidden,.truncate{overflow:hidden}.truncate{text-overflow:ellipsis;white-space:nowrap}.rounded-sm{border-radius:.125rem}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.border-2{border-width:2px}.border{border-width:1px}.border-t-2{border-top-width:2px}.border-t-4{border-top-width:4px}.border-t{border-top-width:1px}.border-r{border-right-width:1px}.border-b{border-bottom-width:1px}.border-l-4{border-left-width:4px}.border-l{border-left-width:1px}.border-transparent{border-color:transparent}.border-gray-100{--tw-border-opacity:1;border-color:#f3f4f6;border-color:rgba(243,244,246,var(--tw-border-opacity))}.border-gray-200{--tw-border-opacity:1;border-color:#e5e7eb;border-color:rgba(229,231,235,var(--tw-border-opacity))}.border-gray-300{--tw-border-opacity:1;border-color:#d1d5db;border-color:rgba(209,213,219,var(--tw-border-opacity))}.border-gray-500{--tw-border-opacity:1;border-color:#6b7280;border-color:rgba(107,114,128,var(--tw-border-opacity))}.border-red-100{--tw-border-opacity:1;border-color:#fee2e2;border-color:rgba(254,226,226,var(--tw-border-opacity))}.border-red-500{--tw-border-opacity:1;border-color:#ef4444;border-color:rgba(239,68,68,var(--tw-border-opacity))}.border-red-600{--tw-border-opacity:1;border-color:#dc2626;border-color:rgba(220,38,38,var(--tw-border-opacity))}.border-green-100{--tw-border-opacity:1;border-color:#d1fae5;border-color:rgba(209,250,229,var(--tw-border-opacity))}.border-green-500{--tw-border-opacity:1;border-color:#10b981;border-color:rgba(16,185,129,var(--tw-border-opacity))}.border-green-600{--tw-border-opacity:1;border-color:#059669;border-color:rgba(5,150,105,var(--tw-border-opacity))}.border-blue-500{--tw-border-opacity:1;border-color:#3b82f6;border-color:rgba(59,130,246,var(--tw-border-opacity))}.bg-white{--tw-bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:#f9fafb;background-color:rgba(249,250,251,var(--tw-bg-opacity))}.bg-gray-100{--tw-bg-opacity:1;background-color:#f3f4f6;background-color:rgba(243,244,246,var(--tw-bg-opacity))}.bg-gray-200{--tw-bg-opacity:1;background-color:#e5e7eb;background-color:rgba(229,231,235,var(--tw-bg-opacity))}.bg-gray-900{--tw-bg-opacity:1;background-color:#111827;background-color:rgba(17,24,39,var(--tw-bg-opacity))}.bg-red-100{--tw-bg-opacity:1;background-color:#fee2e2;background-color:rgba(254,226,226,var(--tw-bg-opacity))}.bg-green-100{--tw-bg-opacity:1;background-color:#d1fae5;background-color:rgba(209,250,229,var(--tw-bg-opacity))}.bg-blue-100{--tw-bg-opacity:1;background-color:#dbeafe;background-color:rgba(219,234,254,var(--tw-bg-opacity))}.hover\\:bg-gray-200:hover{--tw-bg-opacity:1;background-color:#e5e7eb;background-color:rgba(229,231,235,var(--tw-bg-opacity))}.hover\\:bg-red-100:hover{--tw-bg-opacity:1;background-color:#fee2e2;background-color:rgba(254,226,226,var(--tw-bg-opacity))}.hover\\:bg-red-200:hover{--tw-bg-opacity:1;background-color:#fecaca;background-color:rgba(254,202,202,var(--tw-bg-opacity))}.hover\\:bg-green-100:hover{--tw-bg-opacity:1;background-color:#d1fae5;background-color:rgba(209,250,229,var(--tw-bg-opacity))}.hover\\:bg-green-200:hover{--tw-bg-opacity:1;background-color:#a7f3d0;background-color:rgba(167,243,208,var(--tw-bg-opacity))}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-1{padding-bottom:.25rem;padding-top:.25rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.py-3{padding-bottom:.75rem;padding-top:.75rem}.py-4{padding-bottom:1rem;padding-top:1rem}.py-8{padding-bottom:2rem;padding-top:2rem}.py-9{padding-bottom:2.25rem;padding-top:2.25rem}.pt-4{padding-top:1rem}.pr-4{padding-right:1rem}.pr-10{padding-right:2.5rem}.pr-12{padding-right:3rem}.pb-6{padding-bottom:1.5rem}.pl-3{padding-left:.75rem}.text-left{text-align:left}.text-center{text-align:center}.text-sm{font-size:.875rem;line-height:1.25rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem}.text-lg,.text-xl{line-height:1.75rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem;line-height:2rem}.font-light{font-weight:300}.font-normal{font-weight:400}.font-medium{font-weight:500}.font-semibold{font-weight:600}.font-extrabold{font-weight:800}.uppercase{text-transform:uppercase}.leading-6{line-height:1.5rem}.tracking-wider{letter-spacing:.05em}.tracking-widest{letter-spacing:.1em}.text-white{--tw-text-opacity:1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:#6b7280;color:rgba(107,114,128,var(--tw-text-opacity))}.text-gray-600{--tw-text-opacity:1;color:#4b5563;color:rgba(75,85,99,var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity:1;color:#374151;color:rgba(55,65,81,var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity:1;color:#1f2937;color:rgba(31,41,55,var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:#111827;color:rgba(17,24,39,var(--tw-text-opacity))}.text-red-500{--tw-text-opacity:1;color:#ef4444;color:rgba(239,68,68,var(--tw-text-opacity))}.text-red-600{--tw-text-opacity:1;color:#dc2626;color:rgba(220,38,38,var(--tw-text-opacity))}.text-green-500{--tw-text-opacity:1;color:#10b981;color:rgba(16,185,129,var(--tw-text-opacity))}.text-green-600{--tw-text-opacity:1;color:#059669;color:rgba(5,150,105,var(--tw-text-opacity))}.text-blue-500{--tw-text-opacity:1;color:#3b82f6;color:rgba(59,130,246,var(--tw-text-opacity))}.hover\\:text-gray-100:hover{--tw-text-opacity:1;color:#f3f4f6;color:rgba(243,244,246,var(--tw-text-opacity))}.hover\\:text-gray-600:hover{--tw-text-opacity:1;color:#4b5563;color:rgba(75,85,99,var(--tw-text-opacity))}.opacity-50{opacity:.5}*,:after,:before{--tw-shadow:0 0 transparent}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);box-shadow:0 0 transparent,0 0 transparent,0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.focus\\:shadow-md:focus,.hover\\:shadow-md:hover,.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);box-shadow:0 0 transparent,0 0 transparent,0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}*,:after,:before{--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}.filter{--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);filter:/*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/ /*!*/;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition{transition-duration:.15s;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}@media (min-width:640px){.sm\\:col-span-2{grid-column:span 2/span 2}.sm\\:col-span-4{grid-column:span 4/span 4}.sm\\:col-span-6{grid-column:span 6/span 6}.sm\\:w-96{width:24rem}.sm\\:grid-cols-12{grid-template-columns:repeat(12,minmax(0,1fr))}.sm\\:flex-row{flex-direction:row}.sm\\:px-8{padding-left:2rem;padding-right:2rem}.sm\\:text-base{font-size:1rem;line-height:1.5rem}.sm\\:text-3xl{font-size:1.875rem;line-height:2.25rem}}@media (min-width:1024px){.lg\\:col-span-1{grid-column:span 1/span 1}.lg\\:col-span-3{grid-column:span 3/span 3}.lg\\:flex{display:flex}.lg\\:grid{display:grid}.lg\\:w-3\\/5{width:60%}.lg\\:flex-shrink-0{flex-shrink:0}.lg\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\\:flex-col{flex-direction:column}.lg\\:justify-center{justify-content:center}.lg\\:gap-x-8{-moz-column-gap:2rem;column-gap:2rem}.lg\\:gap-y-5{row-gap:1.25rem}.lg\\:space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:0;margin-bottom:calc(0px*var(--tw-space-y-reverse));margin-top:0;margin-top:calc(0px*(1 - var(--tw-space-y-reverse)))}.lg\\:p-12{padding:3rem}}@media (min-width:1280px){.xl\\:px-0{padding-left:0;padding-right:0}}',""]),r.locals={},e.exports=r},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return h}));var r=n(0);class o{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const c="[DEFAULT]";class l{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.a;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(component){if(component.name!==this.name)throw Error(`Mismatching Component ${component.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=component,this.shouldAutoInitialize()){if(function(component){return"EAGER"===component.instantiationMode}(component))try{this.getOrInitializeService({instanceIdentifier:c})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=c){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=c){return this.instances.has(e)}getOptions(e=c){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===c?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=c){return this.component?this.component.multipleInstances?e:c:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class h{constructor(e){this.name=e,this.providers=new Map}addComponent(component){const e=this.getProvider(component.name);if(e.isComponentSet())throw new Error(`Component ${component.name} has already been registered with ${this.name}`);e.setComponent(component)}addOrOverwriteComponent(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name),this.addComponent(component)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new l(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.k})),n.d(t,"b",(function(){return r.tb})),n.d(t,"c",(function(){return r.yb})),n.d(t,"d",(function(){return r.zb}));var r=n(1);n(0),n(11),n(20),n(30)},77:function(e,t,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var n=t.parent,r=t.slots,o=t.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?e(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||h):l.length>0?l.map((function(){return e(!1)})):e(!1))}};e.exports=r},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}Object.create;Object.create},96:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var content=e(t);return t[2]?"@media ".concat(t[2]," {").concat(content,"}"):content})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var h=[].concat(e[l]);r&&o[h[0]]||(n&&(h[2]?h[2]="".concat(n," and ").concat(h[2]):h[2]=n),t.push(h))}},t}},97:function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],c=o[0],l={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[c]?r[c].parts.push(l):n.push(r[c]={id:c,parts:[l]})}return n}n.r(t),n.d(t,"default",(function(){return w}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},head=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,h=0,d=!1,f=function(){},m=null,y="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function w(e,t,n,o){d=n,m=o||{};var l=r(e,t);return I(l),function(t){for(var n=[],i=0;i<l.length;i++){var o=l[i];(h=c[o.id]).refs--,n.push(h)}t?I(l=r(e,t)):l=[];for(i=0;i<n.length;i++){var h;if(0===(h=n[i]).refs){for(var d=0;d<h.parts.length;d++)h.parts[d]();delete c[h.id]}}}}function I(e){for(var i=0;i<e.length;i++){var t=e[i],n=c[t.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](t.parts[r]);for(;r<t.parts.length;r++)n.parts.push(_(t.parts[r]));n.parts.length>t.parts.length&&(n.parts.length=t.parts.length)}else{var o=[];for(r=0;r<t.parts.length;r++)o.push(_(t.parts[r]));c[t.id]={id:t.id,refs:1,parts:o}}}}function T(){var e=document.createElement("style");return e.type="text/css",head.appendChild(e),e}function _(e){var t,n,r=document.querySelector("style["+y+'~="'+e.id+'"]');if(r){if(d)return f;r.parentNode.removeChild(r)}if(v){var o=h++;r=l||(l=T()),t=S.bind(null,r,o,!1),n=S.bind(null,r,o,!0)}else r=T(),t=A.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var E,k=(E=[],function(e,t){return E[e]=t,E.filter(Boolean).join("\n")});function S(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=k(t,o);else{var c=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(c,l[t]):e.appendChild(c)}}function A(e,t){var n=t.css,r=t.media,o=t.sourceMap;if(r&&e.setAttribute("media",r),m.ssrId&&e.setAttribute(y,t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}}]);