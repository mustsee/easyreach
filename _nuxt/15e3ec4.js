(window.webpackJsonp=window.webpackJsonp||[]).push([[1,9,12],{314:function(t,e,o){var content=o(318);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(97).default)("77dd992a",content,!0,{sourceMap:!1})},315:function(t,e,o){var content=o(320);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(97).default)("a7021a3c",content,!0,{sourceMap:!1})},317:function(t,e,o){"use strict";o(314)},318:function(t,e,o){var r=o(96)((function(i){return i[1]}));r.push([t.i,"",""]),r.locals={},t.exports=r},319:function(t,e,o){"use strict";o(315)},320:function(t,e,o){var r=o(96)((function(i){return i[1]}));r.push([t.i,"",""]),r.locals={},t.exports=r},322:function(t,e,o){var content=o(336);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(97).default)("135295b8",content,!0,{sourceMap:!1})},331:function(t,e,o){"use strict";o.r(e);o(55),o(41),o(19),o(38);var r={props:["type","messages","index"],computed:{getType:{get:function(){return this.type},set:function(t){return this.$emit("selectChange",t)}}}},n=(o(317),o(35)),component=Object(n.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative border border-gray-300 text-gray-800 bg-white shadow-md"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.getType,expression:"getType"}],staticClass:"appearance-none w-full py-1 px-2 bg-white focus:outline-none",attrs:{name:"messages-"+t.index,id:"messages-"+t.index},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.getType=e.target.multiple?o:o[0]}}},t._l(t.messages,(function(o){return e("option",{key:o.type,domProps:{value:o.type}},[t._v(t._s(o.name))])})),0),t._v(" "),e("div",{staticClass:"pointer-events-none absolute right-0 top-0 bottom-0 flex items-center px-2 text-gray-700 border-l border-gray-300"},[e("svg",{staticClass:"h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[e("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])])}),[],!1,null,null,null);e.default=component.exports},332:function(t,e,o){"use strict";o.r(e);var r={props:["text"],computed:{getText:{get:function(){return this.text},set:function(t){return this.$emit("textChange",t)}}}},n=(o(319),o(35)),component=Object(n.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"border border-gray-300 rounded flex flex-col text-gray-800 bg-white shadow-md"},[t._m(0),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.getText,expression:"getText"}],staticClass:"flex-1 p-2 m-1 focus:outline-none",attrs:{rows:"6",spellcheck:"false",placeholder:"Text to be sent to the guest",name:"output"},domProps:{value:t.getText},on:{input:function(e){e.target.composing||(t.getText=e.target.value)}}})])}),[function(){var t=this._self._c;return t("div",{staticClass:"bg-gray-200 px-3 py-2 border-b border-gray-300"},[t("h3",{staticClass:"text-sm text-left font-medium"},[this._v("Output")])])}],!1,null,null,null);e.default=component.exports},335:function(t,e,o){"use strict";o(322)},336:function(t,e,o){var r=o(96)((function(i){return i[1]}));r.push([t.i,"",""]),r.locals={},t.exports=r},352:function(t,e,o){"use strict";o.r(e);o(38),o(42),o(36),o(53),o(37),o(54);var r=o(8),n=o(15),l=(o(64),o(78),o(41),o(19),o(56));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:["booking","messages","index"],computed:{bookId:function(){return this.booking.bookId},messageType:function(){return this.booking.messageType},text:function(){var t=this.$store.state.cardsInfos,e=this.bookId;return t[e]?t[e].text:""},type:function(){var t=this.$store.state.cardsInfos,e=this.bookId;return t[e]?t[e].type:""},getWhatsAppLink:function(){if(this.booking.phone){var t=encodeURI(this.text);return"https://web.whatsapp.com/send?phone=".concat(this.booking.phone,"&text=").concat(t)}return"https://web.whatsapp.com/"}},methods:d(d({},Object(l.b)({updateCardStatus:"updateCardStatus",updateCardStatusAndType:"updateCardStatusAndType",updateBeds24ArrivalTimeSection:"updateBeds24ArrivalTimeSection",sendMailNodeMailer:"sendMailNodeMailer"})),{},{handleSelectType:function(t){this.computeCardInfos(t)},handleTextChange:function(text){this.$store.commit("setCardText",{bookId:this.bookId,text:text})},computeCardInfos:function(t){var e=this.bookId,o=this.messages,r=this.booking,n=o.filter((function(e){return e.type===t}))[0],text=n.text,l=n.type,c=n.variables;this.$store.commit("setCardInfos",{bookId:e,text:text,type:l,variables:c}),this.$store.dispatch("setVariablesInText",{booking:r})},updateBookingStatus:function(t,e){this.$store.dispatch("updateCardStatus",{bookId:t,status:e})},updateBookingStatusAndType:function(t,e,o,n){var l=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l.$store.dispatch("updateCardStatusAndType",{bookId:t,status:e,type:o,messageType:n});case 2:l.computeCardInfos("emailMessage");case 3:case"end":return r.stop()}}),r)})))()},updateArrivalTimeSection:function(t,e){this.updateBookingStatus(t,e),this.$store.dispatch("updateBeds24ArrivalTimeSection",{bookId:t,previousArrivalTimeText:this.booking.arrivalTime,type:this.type})},sendEmail:function(t){var e=this,o=this.booking.email,text=JSON.stringify(this.text);this.$store.dispatch("sendMailNodeMailer",{guestEmail:o,text:text}).then((function(o){o.success?e.updateArrivalTimeSection(t,"done"):e.updateBookingStatus(t,"error")}))}}),mounted:function(){this.computeCardInfos(this.messageType)}},v=(o(335),o(35)),component=Object(v.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pb-6"},[e("div",{staticClass:"shadow-md lg:flex"},[e("div",{staticClass:"flex-1 px-6 py-8 bg-white lg:p-12"},[e("h3",{staticClass:"text-2xl font-extrabold text-gray-900 sm:text-3xl"},[t._v(t._s(t.booking.name))]),t._v(" "),e("p",{staticClass:"mt-6 text-base text-gray-500 truncate"},[t.booking.groupReservation?e("span",[t._v("(group of "+t._s(t.booking.personsInGroup)+")"),e("br")]):t._e(),t._v("\n        "+t._s(t.booking.phone?t.booking.phone:"No phone")+" "),e("br"),t._v(" \n        "+t._s(t.booking.email?t.booking.email:"No email"))]),t._v(" "),e("div",{staticClass:"mt-8"},[t._m(0),t._v(" "),e("ul",{staticClass:"mt-8 space-y-5"},[e("li",{staticClass:"lg:col-span-1"},[e("p",{staticClass:"text-gray-900"},[t._v("Arrival time")]),t._v(" "),e("p",{staticClass:"text-sm text-gray-700"},[t._v(t._s(t.booking.arrivalTime?t.booking.arrivalTime:"No data"))])]),t._v(" "),e("li",{staticClass:"lg:col-span-1"},[e("p",{staticClass:"text-gray-900"},[t._v("Comments")]),t._v(" "),e("p",{staticClass:"text-sm text-gray-700",domProps:{innerHTML:t._s("".concat(t.booking.guestCommentsModified?t.booking.guestCommentsModified:"No data"))}})])])])]),t._v(" "),"todo"===t.booking.status?e("div",{staticClass:"lg:w-3/5 px-6 py-8 text-center bg-gray-50 lg:flex-shrink-0 lg:flex lg:flex-col lg:justify-center lg:p-12"},[e("select-component",{attrs:{type:t.type,messages:t.messages,index:t.index},on:{selectChange:t.handleSelectType}}),t._v(" "),e("textarea-component",{staticClass:"mt-6",attrs:{text:t.text},on:{textChange:t.handleTextChange}}),t._v(" "),e("div",{staticClass:"mt-8"},["email"===t.booking.type?e("div",{staticClass:"action-button rounded-md shadow cursor-pointer",class:["flex items-center justify-center w-full px-5 py-3 text-base font-medium text-red-600 border border-red-600 bg-white rounded-md hover:bg-red-200 transition-all"],on:{click:function(e){return t.sendEmail(t.bookId)}}},[t._v("\n          Send email\n          "),e("span",{staticClass:"w-6 h-6 ml-2"},[e("svg",{attrs:{viewBox:"0 0 24 24"}},[e("g",{staticClass:"icon-tabler",attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}},[e("rect",{attrs:{width:"18",height:"14",x:"3",y:"5",rx:"2"}}),t._v(" "),e("path",{attrs:{d:"m3 7 9 6 9-6"}})])])])]):t._e(),t._v(" "),"whatsapp"===t.booking.type?e("div",{staticClass:"action-button rounded-md shadow"},[e("a",{class:["flex items-center justify-center w-full px-5 py-3 text-base font-medium text-green-600 border border-green-600 bg-white rounded-md hover:bg-green-200 transition-all"],attrs:{href:t.getWhatsAppLink,target:"_blank"},on:{click:function(e){return t.updateBookingStatus(t.booking.bookId,"inProgress")}}},[t._v("\n              Open in\n              "),e("span",{staticClass:"w-6 h-6 ml-2"},[e("svg",{attrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"}},[e("path",{attrs:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"}})])])])]):t._e()])],1):"inProgress"===t.booking.status?e("div",{staticClass:"lg:w-3/5 px-6 py-8 text-center bg-gray-50 lg:flex-shrink-0 lg:flex lg:flex-col lg:justify-center lg:p-12"},[e("div",{staticClass:"flex justify-end",attrs:{title:"Cancel"}},[e("span",{staticClass:"cursor-pointer",on:{click:function(e){return t.updateBookingStatus(t.booking.bookId,"todo")}}},[e("svg",{attrs:{width:"24",height:"24","clip-rule":"evenodd","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"m12 10.93 5.719-5.72c.146-.146.339-.219.531-.219.404 0 .75.324.75.749 0 .193-.073.385-.219.532l-5.72 5.719 5.719 5.719c.147.147.22.339.22.531 0 .427-.349.75-.75.75-.192 0-.385-.073-.531-.219l-5.719-5.719-5.719 5.719c-.146.146-.339.219-.531.219-.401 0-.75-.323-.75-.75 0-.192.073-.384.22-.531l5.719-5.719-5.72-5.719c-.146-.147-.219-.339-.219-.532 0-.425.346-.749.75-.749.192 0 .385.073.531.219z"}})])])]),t._v(" "),e("div",{staticClass:"flex flex-1 flex-col justify-center"},[t._m(1),t._v(" "),e("div",{staticClass:"flex justify-around flex-wrap mb-4"},[e("div",{staticClass:"cursor-pointer flex items-center justify-center border border-red-500 text-red-500 bg-white hover:bg-red-100 rounded-full w-20 h-20",attrs:{title:"Fail"},on:{click:function(e){return t.updateBookingStatusAndType(t.booking.bookId,"todo","email","emailMessage")}}},[e("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{fill:"currentColor",d:"M5 14h-5v-12h5v12zm18.875-4.809c0-.646-.555-1.32-1.688-1.41-.695-.055-.868-.623-.031-.812.701-.159 1.098-.652 1.098-1.181 0-.629-.559-1.309-1.826-1.543-.766-.141-.842-.891-.031-.953.688-.053.96-.291.96-.626-.001-.931-1.654-2.666-4.852-2.666-4.16 0-6.123 2.067-10.505 2.768v10.878c2.375.869 4.466 2.644 5.688 6.886.478 1.661.781 3.468 2.374 3.468 2.375 0 2.594-5.125 1.688-8.781 1.312-.688 3.751-.936 4.979-.885 1.771.072 2.271-.818 2.271-1.49 0-1.011-.833-1.35-1.354-1.51-.609-.188-.889-.807-.031-.922.836-.112 1.26-.656 1.26-1.221z"}})])]),t._v(" "),e("div",{staticClass:"cursor-pointer flex items-center justify-center text-green-500 border border-green-500 bg-white hover:bg-green-100 rounded-full w-20 h-20",attrs:{title:"Success"},on:{click:function(e){return t.updateArrivalTimeSection(t.booking.bookId,"done")}}},[e("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{fill:"currentColor",d:"M5 22h-5v-12h5v12zm17.615-8.412c-.857-.115-.578-.734.031-.922.521-.16 1.354-.5 1.354-1.51 0-.672-.5-1.562-2.271-1.49-1.228.05-3.666-.198-4.979-.885.906-3.656.688-8.781-1.688-8.781-1.594 0-1.896 1.807-2.375 3.469-1.221 4.242-3.312 6.017-5.687 6.885v10.878c4.382.701 6.345 2.768 10.505 2.768 3.198 0 4.852-1.735 4.852-2.666 0-.335-.272-.573-.96-.626-.811-.062-.734-.812.031-.953 1.268-.234 1.826-.914 1.826-1.543 0-.529-.396-1.022-1.098-1.181-.837-.189-.664-.757.031-.812 1.133-.09 1.688-.764 1.688-1.41 0-.565-.424-1.109-1.26-1.221z"}})])])])])]):"done"===t.booking.status?e("div",{staticClass:"lg:w-3/5 px-6 py-8 text-center bg-gray-50 lg:flex-shrink-0 lg:flex lg:flex-col lg:justify-center lg:p-12"},[e("div",{staticClass:"flex justify-end",attrs:{title:"Cancel"}},[e("span",{staticClass:"cursor-pointer",on:{click:function(e){return t.updateBookingStatus(t.booking.bookId,"todo")}}},[e("svg",{attrs:{width:"24",height:"24","clip-rule":"evenodd","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"m12 10.93 5.719-5.72c.146-.146.339-.219.531-.219.404 0 .75.324.75.749 0 .193-.073.385-.219.532l-5.72 5.719 5.719 5.719c.147.147.22.339.22.531 0 .427-.349.75-.75.75-.192 0-.385-.073-.531-.219l-5.719-5.719-5.719 5.719c-.146.146-.339.219-.531.219-.401 0-.75-.323-.75-.75 0-.192.073-.384.22-.531l5.719-5.719-5.72-5.719c-.146-.147-.219-.339-.219-.532 0-.425.346-.749.75-.749.192 0 .385.073.531.219z"}})])])]),t._v(" "),e("div",{staticClass:"flex flex-1 m-12 justify-center items-center"},[e("div",{staticClass:"w-12 h-12 text-green-500"},[e("svg",{attrs:{viewBox:"0 0 24 24"}},[e("path",{attrs:{fill:"currentColor",d:"M23 0l-4.5 16.5-6.097-5.43 5.852-6.175-7.844 5.421-5.411-1.316 18-9zm-11 12.501v5.499l2.193-3.323-2.193-2.176zm-8.698 6.825l-1.439-.507 5.701-5.215 1.436.396-5.698 5.326zm3.262 4.287l-1.323-.565 4.439-4.503 1.32.455-4.436 4.613zm-4.083.387l-1.481-.507 8-7.89 1.437.397-7.956 8z"}})])])])]):"error"===t.booking.status?e("div",{staticClass:"lg:w-3/5 px-6 py-8 text-center bg-gray-50 lg:flex-shrink-0 lg:flex lg:flex-col lg:justify-center lg:p-12"},[e("div",{staticClass:"flex justify-end",attrs:{title:"Cancel"}},[e("span",{staticClass:"cursor-pointer",on:{click:function(e){return t.updateBookingStatus(t.booking.bookId,"todo")}}},[e("svg",{attrs:{width:"24",height:"24","clip-rule":"evenodd","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"m12 10.93 5.719-5.72c.146-.146.339-.219.531-.219.404 0 .75.324.75.749 0 .193-.073.385-.219.532l-5.72 5.719 5.719 5.719c.147.147.22.339.22.531 0 .427-.349.75-.75.75-.192 0-.385-.073-.531-.219l-5.719-5.719-5.719 5.719c-.146.146-.339.219-.531.219-.401 0-.75-.323-.75-.75 0-.192.073-.384.22-.531l5.719-5.719-5.72-5.719c-.146-.147-.219-.339-.219-.532 0-.425.346-.749.75-.749.192 0 .385.073.531.219z"}})])])]),t._v(" "),t._m(2)]):t._e()])])}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center"},[e("h4",{staticClass:"flex-shrink-0 pr-4 text-sm font-semibold tracking-wider uppercase bg-white"},[t._v("Guest infos")]),t._v(" "),e("div",{staticClass:"flex-1 border-t-2 border-gray-200"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-16"},[e("h1",{staticClass:"mb-4 text-lg font-medium leading-6 text-gray-900"},[t._v("Message successfully sent ?")]),t._v(" "),e("h2",{staticClass:"text-sm text-gray-500"},[t._v("A successfull sending will update the Arrival time section.")])])},function(){var t=this._self._c;return t("div",{staticClass:"flex flex-1 m-12 justify-center items-center"},[t("div",{staticClass:"w-12 h-12 text-grey-500"},[this._v("\n            Error\n          ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{SelectComponent:o(331).default,TextareaComponent:o(332).default})}}]);